/*!
 * jQuery JavaScript Library v1.11.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-05-01T17:42Z
 */
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=e.length,i=rt.type(e);return"function"===i||rt.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(rt.isFunction(t))return rt.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return rt.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ht.test(t))return rt.filter(t,e,i);t=rt.filter(t,e)}return rt.grep(e,function(e){return rt.inArray(e,t)>=0!==i})}function r(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=xt[e]={};return rt.each(e.match(yt)||[],function(e,i){t[i]=!0}),t}function a(){ft.addEventListener?(ft.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(ft.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(ft.addEventListener||"load"===event.type||"complete"===ft.readyState)&&(a(),rt.ready())}function l(e,t,i){if(void 0===i&&1===e.nodeType){var n="data-"+t.replace(St,"-$1").toLowerCase();if(i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:_t.test(i)?rt.parseJSON(i):i}catch(r){}rt.data(e,t,i)}else i=void 0}return i}function c(e){var t;for(t in e)if(("data"!==t||!rt.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function d(e,t,i,n){if(rt.acceptData(e)){var r,o,a=rt.expando,s=e.nodeType,l=s?rt.cache:e,c=s?e[a]:e[a]&&a;if(c&&l[c]&&(n||l[c].data)||void 0!==i||"string"!=typeof t)return c||(c=s?e[a]=X.pop()||rt.guid++:a),l[c]||(l[c]=s?{}:{toJSON:rt.noop}),("object"==typeof t||"function"==typeof t)&&(n?l[c]=rt.extend(l[c],t):l[c].data=rt.extend(l[c].data,t)),o=l[c],n||(o.data||(o.data={}),o=o.data),void 0!==i&&(o[rt.camelCase(t)]=i),"string"==typeof t?(r=o[t],null==r&&(r=o[rt.camelCase(t)])):r=o,r}}function u(e,t,i){if(rt.acceptData(e)){var n,r,o=e.nodeType,a=o?rt.cache:e,s=o?e[rt.expando]:rt.expando;if(a[s]){if(t&&(n=i?a[s]:a[s].data)){rt.isArray(t)?t=t.concat(rt.map(t,rt.camelCase)):t in n?t=[t]:(t=rt.camelCase(t),t=t in n?[t]:t.split(" ")),r=t.length;for(;r--;)delete n[t[r]];if(i?!c(n):!rt.isEmptyObject(n))return}(i||(delete a[s].data,c(a[s])))&&(o?rt.cleanData([e],!0):it.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function h(){return!0}function p(){return!1}function f(){try{return ft.activeElement}catch(e){}}function m(e){var t=jt.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function g(e,t){var i,n,r=0,o=typeof e.getElementsByTagName!==Ct?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Ct?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],i=e.childNodes||e;null!=(n=i[r]);r++)!t||rt.nodeName(n,t)?o.push(n):rt.merge(o,g(n,t));return void 0===t||t&&rt.nodeName(e,t)?rt.merge([e],o):o}function v(e){At.test(e.type)&&(e.defaultChecked=e.checked)}function b(e,t){return rt.nodeName(e,"table")&&rt.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==rt.find.attr(e,"type"))+"/"+e.type,e}function x(e){var t=Vt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var i,n=0;null!=(i=e[n]);n++)rt._data(i,"globalEval",!t||rt._data(t[n],"globalEval"))}function k(e,t){if(1===t.nodeType&&rt.hasData(e)){var i,n,r,o=rt._data(e),a=rt._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(i in s)for(n=0,r=s[i].length;r>n;n++)rt.event.add(t,i,s[i][n])}a.data&&(a.data=rt.extend({},a.data))}}function C(e,t){var i,n,r;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!it.noCloneEvent&&t[rt.expando]){r=rt._data(t);for(n in r.events)rt.removeEvent(t,n,r.handle);t.removeAttribute(rt.expando)}"script"===i&&t.text!==e.text?(y(t).text=e.text,x(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),it.html5Clone&&e.innerHTML&&!rt.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&At.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}function _(t,i){var n,r=rt(i.createElement(t)).appendTo(i.body),o=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(r[0]))?n.display:rt.css(r[0],"display");return r.detach(),o}function S(e){var t=ft,i=Zt[e];return i||(i=_(e,t),"none"!==i&&i||(Yt=(Yt||rt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Yt[0].contentWindow||Yt[0].contentDocument).document,t.write(),t.close(),i=_(e,t),Yt.detach()),Zt[e]=i),i}function T(e,t){return{get:function(){var i=e();if(null!=i)return i?void delete this.get:(this.get=t).apply(this,arguments)}}}function E(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,r=hi.length;r--;)if(t=hi[r]+i,t in e)return t;return n}function $(e,t){for(var i,n,r,o=[],a=0,s=e.length;s>a;a++)n=e[a],n.style&&(o[a]=rt._data(n,"olddisplay"),i=n.style.display,t?(o[a]||"none"!==i||(n.style.display=""),""===n.style.display&&$t(n)&&(o[a]=rt._data(n,"olddisplay",S(n.nodeName)))):(r=$t(n),(i&&"none"!==i||!r)&&rt._data(n,"olddisplay",r?i:rt.css(n,"display"))));for(a=0;s>a;a++)n=e[a],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[a]||"":"none"));return e}function N(e,t,i){var n=li.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function A(e,t,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===i&&(a+=rt.css(e,i+Et[o],!0,r)),n?("content"===i&&(a-=rt.css(e,"padding"+Et[o],!0,r)),"margin"!==i&&(a-=rt.css(e,"border"+Et[o]+"Width",!0,r))):(a+=rt.css(e,"padding"+Et[o],!0,r),"padding"!==i&&(a+=rt.css(e,"border"+Et[o]+"Width",!0,r)));return a}function L(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=ei(e),a=it.boxSizing&&"border-box"===rt.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=ti(e,t,o),(0>r||null==r)&&(r=e.style[t]),ni.test(r))return r;n=a&&(it.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+A(e,t,i||(a?"border":"content"),n,o)+"px"}function R(e,t,i,n,r){return new R.prototype.init(e,t,i,n,r)}function O(){return setTimeout(function(){pi=void 0}),pi=rt.now()}function D(e,t){var i,n={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)i=Et[r],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function H(e,t,i){for(var n,r=(yi[t]||[]).concat(yi["*"]),o=0,a=r.length;a>o;o++)if(n=r[o].call(i,t,e))return n}function j(e,t,i){var n,r,o,a,s,l,c,d,u=this,h={},p=e.style,f=e.nodeType&&$t(e),m=rt._data(e,"fxshow");i.queue||(s=rt._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,rt.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=rt.css(e,"display"),d="none"===c?rt._data(e,"olddisplay")||S(e.nodeName):c,"inline"===d&&"none"===rt.css(e,"float")&&(it.inlineBlockNeedsLayout&&"inline"!==S(e.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",it.shrinkWrapBlocks()||u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],mi.exec(r)){if(delete t[n],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}h[n]=m&&m[n]||rt.style(e,n)}else c=void 0;if(rt.isEmptyObject(h))"inline"===("none"===c?S(e.nodeName):c)&&(p.display=c);else{m?"hidden"in m&&(f=m.hidden):m=rt._data(e,"fxshow",{}),o&&(m.hidden=!f),f?rt(e).show():u.done(function(){rt(e).hide()}),u.done(function(){var t;rt._removeData(e,"fxshow");for(t in h)rt.style(e,t,h[t])});for(n in h)a=H(f?m[n]:0,n,u),n in m||(m[n]=a.start,f&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}}function F(e,t){var i,n,r,o,a;for(i in e)if(n=rt.camelCase(i),r=t[n],o=e[i],rt.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),a=rt.cssHooks[n],a&&"expand"in a){o=a.expand(o),delete e[n];for(i in o)i in e||(e[i]=o[i],t[i]=r)}else t[n]=r}function P(e,t,i){var n,r,o=0,a=bi.length,s=rt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=pi||O(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,o=1-n,a=0,l=c.tweens.length;l>a;a++)c.tweens[a].run(o);return s.notifyWith(e,[c,o,i]),1>o&&l?i:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:rt.extend({},t),opts:rt.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:pi||O(),duration:i.duration,tweens:[],createTween:function(t,i){var n=rt.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)c.tweens[i].run(1);return t?s.resolveWith(e,[c,t]):s.rejectWith(e,[c,t]),this}}),d=c.props;for(F(d,c.opts.specialEasing);a>o;o++)if(n=bi[o].call(c,e,d,c.opts))return n;return rt.map(d,H,c),rt.isFunction(c.opts.start)&&c.opts.start.call(e,c),rt.fx.timer(rt.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function B(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,o=t.toLowerCase().match(yt)||[];if(rt.isFunction(i))for(;n=o[r++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function I(e,t,i,n){function r(s){var l;return o[s]=!0,rt.each(e[s]||[],function(e,s){var c=s(t,i,n);return"string"!=typeof c||a||o[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var o={},a=e===zi;return r(t.dataTypes[0])||!o["*"]&&r("*")}function M(e,t){var i,n,r=rt.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&rt.extend(!0,e,i),e}function W(e,t,i){for(var n,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in i)o=l[0];else{for(a in i){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}n||(n=a)}o=o||n}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function z(e,t,i,n){var r,o,a,s,l,c={},d=e.dataTypes.slice();if(d[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=d.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=c[l+" "+o]||c["* "+o],!a)for(r in c)if(s=r.split(" "),s[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[r]:c[r]!==!0&&(o=s[0],d.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(u){return{state:"parsererror",error:a?u:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function q(e,t,i,n){var r;if(rt.isArray(t))rt.each(t,function(t,r){i||Vi.test(e)?n(e,r):q(e+"["+("object"==typeof r?t:"")+"]",r,i,n)});else if(i||"object"!==rt.type(t))n(e,t);else for(r in t)q(e+"["+r+"]",t[r],i,n)}function U(){try{return new e.XMLHttpRequest}catch(t){}}function K(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function V(e){return rt.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var X=[],G=X.slice,J=X.concat,Q=X.push,Y=X.indexOf,Z={},et=Z.toString,tt=Z.hasOwnProperty,it={},nt="1.11.1",rt=function(e,t){return new rt.fn.init(e,t)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,st=/-([\da-z])/gi,lt=function(e,t){return t.toUpperCase()};rt.fn=rt.prototype={jquery:nt,constructor:rt,selector:"",length:0,toArray:function(){return G.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:G.call(this)},pushStack:function(e){var t=rt.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return rt.each(this,e,t)},map:function(e){return this.pushStack(rt.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:X.sort,splice:X.splice},rt.extend=rt.fn.extend=function(){var e,t,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||rt.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(r=arguments[s]))for(n in r)e=a[n],i=r[n],a!==i&&(c&&i&&(rt.isPlainObject(i)||(t=rt.isArray(i)))?(t?(t=!1,o=e&&rt.isArray(e)?e:[]):o=e&&rt.isPlainObject(e)?e:{},a[n]=rt.extend(c,o,i)):void 0!==i&&(a[n]=i));return a},rt.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===rt.type(e)},isArray:Array.isArray||function(e){return"array"===rt.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!rt.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==rt.type(e)||e.nodeType||rt.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(it.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[et.call(e)]||"object":typeof e},globalEval:function(t){t&&rt.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(at,"ms-").replace(st,lt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,o=0,a=e.length,s=i(e);if(n){if(s)for(;a>o&&(r=t.apply(e[o],n),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],n),r===!1)break}else if(s)for(;a>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ot,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?rt.merge(n,"string"==typeof e?[e]:e):Q.call(n,e)),n},inArray:function(e,t,i){var n;if(t){if(Y)return Y.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;)e[r++]=t[n++];if(i!==i)for(;void 0!==t[n];)e[r++]=t[n++];return e.length=r,e},grep:function(e,t,i){for(var n,r=[],o=0,a=e.length,s=!i;a>o;o++)n=!t(e[o],o),n!==s&&r.push(e[o]);return r},map:function(e,t,n){var r,o=0,a=e.length,s=i(e),l=[];if(s)for(;a>o;o++)r=t(e[o],o,n),null!=r&&l.push(r);else for(o in e)r=t(e[o],o,n),null!=r&&l.push(r);return J.apply([],l)},guid:1,proxy:function(e,t){var i,n,r;return"string"==typeof t&&(r=e[t],t=e,e=r),rt.isFunction(e)?(i=G.call(arguments,2),n=function(){return e.apply(t||this,i.concat(G.call(arguments)))},n.guid=e.guid=e.guid||rt.guid++,n):void 0},now:function(){return+new Date},support:it}),rt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ct=/*!
 * Sizzle CSS Selector Engine v1.10.19
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-04-18
 */
function(e){function t(e,t,i,n){var r,o,a,s,l,c,u,p,f,m;if((t?t.ownerDocument||t:I)!==R&&L(t),t=t||R,i=i||[],!e||"string"!=typeof e)return i;if(1!==(s=t.nodeType)&&9!==s)return[];if(D&&!n){if(r=bt.exec(e))if(a=r[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return i;if(o.id===a)return i.push(o),i}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&P(t,o)&&o.id===a)return i.push(o),i}else{if(r[2])return Z.apply(i,t.getElementsByTagName(e)),i;if((a=r[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(i,t.getElementsByClassName(a)),i}if(w.qsa&&(!H||!H.test(e))){if(p=u=B,f=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=S(e),(u=t.getAttribute("id"))?p=u.replace(xt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+h(c[l]);f=yt.test(e)&&d(t.parentNode)||t,m=c.join(",")}if(m)try{return Z.apply(i,f.querySelectorAll(m)),i}catch(g){}finally{u||t.removeAttribute("id")}}}return E(e.replace(lt,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>k.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[B]=!0,e}function r(e){var t=R.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var i=e.split("|"),n=e.length;n--;)k.attrHandle[i[n]]=t}function a(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function s(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function c(e){return n(function(t){return t=+t,n(function(i,n){for(var r,o=e([],i.length,t),a=o.length;a--;)i[r=o[a]]&&(i[r]=!(n[r]=i[r]))})})}function d(e){return e&&typeof e.getElementsByTagName!==V&&e}function u(){}function h(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function p(e,t,i){var n=t.dir,r=i&&"parentNode"===n,o=W++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,o)}:function(t,i,a){var s,l,c=[M,o];if(a){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,a))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if(l=t[B]||(t[B]={}),(s=l[n])&&s[0]===M&&s[1]===o)return c[2]=s[2];if(l[n]=c,c[2]=e(t,i,a))return!0}}}function f(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function m(e,i,n){for(var r=0,o=i.length;o>r;r++)t(e,i[r],n);return n}function g(e,t,i,n,r){for(var o,a=[],s=0,l=e.length,c=null!=t;l>s;s++)(o=e[s])&&(!i||i(o,n,r))&&(a.push(o),c&&t.push(s));return a}function v(e,t,i,r,o,a){return r&&!r[B]&&(r=v(r)),o&&!o[B]&&(o=v(o,a)),n(function(n,a,s,l){var c,d,u,h=[],p=[],f=a.length,v=n||m(t||"*",s.nodeType?[s]:s,[]),b=!e||!n&&t?v:g(v,h,e,s,l),y=i?o||(n?e:f||r)?[]:a:b;if(i&&i(b,y,s,l),r)for(c=g(y,p),r(c,[],s,l),d=c.length;d--;)(u=c[d])&&(y[p[d]]=!(b[p[d]]=u));if(n){if(o||e){if(o){for(c=[],d=y.length;d--;)(u=y[d])&&c.push(b[d]=u);o(null,y=[],c,l)}for(d=y.length;d--;)(u=y[d])&&(c=o?tt.call(n,u):h[d])>-1&&(n[c]=!(a[c]=u))}}else y=g(y===a?y.splice(f,y.length):y),o?o(null,a,y,l):Z.apply(a,y)})}function b(e){for(var t,i,n,r=e.length,o=k.relative[e[0].type],a=o||k.relative[" "],s=o?1:0,l=p(function(e){return e===t},a,!0),c=p(function(e){return tt.call(t,e)>-1},a,!0),d=[function(e,i,n){return!o&&(n||i!==$)||((t=i).nodeType?l(e,i,n):c(e,i,n))}];r>s;s++)if(i=k.relative[e[s].type])d=[p(f(d),i)];else{if(i=k.filter[e[s].type].apply(null,e[s].matches),i[B]){for(n=++s;r>n&&!k.relative[e[n].type];n++);return v(s>1&&f(d),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(lt,"$1"),i,n>s&&b(e.slice(s,n)),r>n&&b(e=e.slice(n)),r>n&&h(e))}d.push(i)}return f(d)}function y(e,i){var r=i.length>0,o=e.length>0,a=function(n,a,s,l,c){var d,u,h,p=0,f="0",m=n&&[],v=[],b=$,y=n||o&&k.find.TAG("*",c),x=M+=null==b?1:Math.random()||.1,w=y.length;for(c&&($=a!==R&&a);f!==w&&null!=(d=y[f]);f++){if(o&&d){for(u=0;h=e[u++];)if(h(d,a,s)){l.push(d);break}c&&(M=x)}r&&((d=!h&&d)&&p--,n&&m.push(d))}if(p+=f,r&&f!==p){for(u=0;h=i[u++];)h(m,v,a,s);if(n){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=Q.call(l));v=g(v)}Z.apply(l,v),c&&!n&&v.length>0&&p+i.length>1&&t.uniqueSort(l)}return c&&(M=x,$=b),m};return r?n(a):a}var x,w,k,C,_,S,T,E,$,N,A,L,R,O,D,H,j,F,P,B="sizzle"+-new Date,I=e.document,M=0,W=0,z=i(),q=i(),U=i(),K=function(e,t){return e===t&&(A=!0),0},V="undefined",X=1<<31,G={}.hasOwnProperty,J=[],Q=J.pop,Y=J.push,Z=J.push,et=J.slice,tt=J.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=rt.replace("w","w#"),at="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+nt+"*\\]",st=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+at+")*)|.*)\\)|)",lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=new RegExp("^"+nt+"*,"+nt+"*"),dt=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ut=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(st),pt=new RegExp("^"+ot+"$"),ft={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,xt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),kt=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(J=et.call(I.childNodes),I.childNodes),J[I.childNodes.length].nodeType}catch(Ct){Z={apply:J.length?function(e,t){Y.apply(e,et.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}w=t.support={},_=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},L=t.setDocument=function(e){var t,i=e?e.ownerDocument||e:I,n=i.defaultView;return i!==R&&9===i.nodeType&&i.documentElement?(R=i,O=i.documentElement,D=!_(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){L()},!1):n.attachEvent&&n.attachEvent("onunload",function(){L()})),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=vt.test(i.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=r(function(e){return O.appendChild(e).id=B,!i.getElementsByName||!i.getElementsByName(B).length}),w.getById?(k.find.ID=function(e,t){if(typeof t.getElementById!==V&&D){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},k.filter.ID=function(e){var t=e.replace(wt,kt);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(wt,kt);return function(e){var i=typeof e.getAttributeNode!==V&&e.getAttributeNode("id");return i&&i.value===t}}),k.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==V?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},k.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==V&&D?t.getElementsByClassName(e):void 0},j=[],H=[],(w.qsa=vt.test(i.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&H.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||H.push("\\["+nt+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||H.push(":checked")}),r(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&H.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),H.push(",.*:")})),(w.matchesSelector=vt.test(F=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(e){w.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),j.push("!=",st)}),H=H.length&&new RegExp(H.join("|")),j=j.length&&new RegExp(j.join("|")),t=vt.test(O.compareDocumentPosition),P=t||vt.test(O.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},K=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===I&&P(I,e)?-1:t===i||t.ownerDocument===I&&P(I,t)?1:N?tt.call(N,e)-tt.call(N,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,r=0,o=e.parentNode,s=t.parentNode,l=[e],c=[t];if(!o||!s)return e===i?-1:t===i?1:o?-1:s?1:N?tt.call(N,e)-tt.call(N,t):0;if(o===s)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[r]===c[r];)r++;return r?a(l[r],c[r]):l[r]===I?-1:c[r]===I?1:0},i):R},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==R&&L(e),i=i.replace(ut,"='$1']"),!(!w.matchesSelector||!D||j&&j.test(i)||H&&H.test(i)))try{var n=F.call(e,i);if(n||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return t(i,R,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==R&&L(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==R&&L(e);var i=k.attrHandle[t.toLowerCase()],n=i&&G.call(k.attrHandle,t.toLowerCase())?i(e,t,!D):void 0;return void 0!==n?n:w.attributes||!D?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;if(A=!w.detectDuplicates,N=!w.sortStable&&e.slice(0),e.sort(K),A){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return N=null,e},C=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=C(t);return i},k=t.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,kt),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,kt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return ft.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ht.test(i)&&(t=S(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,kt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==V&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var o=t.attr(r,e);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var c,d,u,h,p,f,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s;if(g){if(o){for(;m;){for(u=t;u=u[m];)if(s?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&b){for(d=g[B]||(g[B]={}),c=d[e]||[],p=c[0]===M&&c[1],h=c[0]===M&&c[2],u=p&&g.childNodes[p];u=++p&&u&&u[m]||(h=p=0)||f.pop();)if(1===u.nodeType&&++h&&u===t){d[e]=[M,p,h];break}}else if(b&&(c=(t[B]||(t[B]={}))[e])&&c[0]===M)h=c[1];else for(;(u=++p&&u&&u[m]||(h=p=0)||f.pop())&&((s?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++h||(b&&((u[B]||(u[B]={}))[e]=[M,h]),u!==t)););return h-=r,h===n||h%n===0&&h/n>=0}}},PSEUDO:function(e,i){var r,o=k.pseudos[e]||k.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[B]?o(i):o.length>1?(r=[e,e,"",i],k.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=o(e,i),a=r.length;a--;)n=tt.call(e,r[a]),e[n]=!(t[n]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:n(function(e){var t=[],i=[],r=T(e.replace(lt,"$1"));return r[B]?n(function(e,t,i,n){for(var o,a=r(e,null,n,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,n,o){return t[0]=e,r(t,null,o,i),!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:n(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,kt).toLowerCase(),function(t){var i;do if(i=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,i){return[0>i?i+t:i]}),even:c(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:c(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:c(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:c(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},k.pseudos.nth=k.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})k.pseudos[x]=l(x);return u.prototype=k.filters=k.pseudos,k.setFilters=new u,S=t.tokenize=function(e,i){var n,r,o,a,s,l,c,d=q[e+" "];if(d)return i?0:d.slice(0);for(s=e,l=[],c=k.preFilter;s;){(!n||(r=ct.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),n=!1,(r=dt.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(lt," ")}),s=s.slice(n.length));for(a in k.filter)!(r=ft[a].exec(s))||c[a]&&!(r=c[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return i?s.length:s?t.error(e):q(e,l).slice(0)},T=t.compile=function(e,t){var i,n=[],r=[],o=U[e+" "];if(!o){for(t||(t=S(e)),i=t.length;i--;)o=b(t[i]),o[B]?n.push(o):r.push(o);o=U(e,y(r,n)),o.selector=e}return o},E=t.select=function(e,t,i,n){var r,o,a,s,l,c="function"==typeof e&&e,u=!n&&S(e=c.selector||e);if(i=i||[],1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&D&&k.relative[o[1].type]){if(t=(k.find.ID(a.matches[0].replace(wt,kt),t)||[])[0],!t)return i;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=ft.needsContext.test(e)?0:o.length;r--&&(a=o[r],!k.relative[s=a.type]);)if((l=k.find[s])&&(n=l(a.matches[0].replace(wt,kt),yt.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(r,1),e=n.length&&h(o),!e)return Z.apply(i,n),i;break}}return(c||T(e,u))(n,t,!D,i,yt.test(e)&&d(t.parentNode)||t),i},w.sortStable=B.split("").sort(K).join("")===B,w.detectDuplicates=!!A,L(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(R.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(it,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);rt.find=ct,rt.expr=ct.selectors,rt.expr[":"]=rt.expr.pseudos,rt.unique=ct.uniqueSort,rt.text=ct.getText,rt.isXMLDoc=ct.isXML,rt.contains=ct.contains;var dt=rt.expr.match.needsContext,ut=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ht=/^.[^:#\[\.,]*$/;rt.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?rt.find.matchesSelector(n,e)?[n]:[]:rt.find.matches(e,rt.grep(t,function(e){return 1===e.nodeType}))},rt.fn.extend({find:function(e){var t,i=[],n=this,r=n.length;if("string"!=typeof e)return this.pushStack(rt(e).filter(function(){for(t=0;r>t;t++)if(rt.contains(n[t],this))return!0}));for(t=0;r>t;t++)rt.find(e,n[t],i);return i=this.pushStack(r>1?rt.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&dt.test(e)?rt(e):e||[],!1).length}});var pt,ft=e.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=rt.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:mt.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||pt).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof rt?t[0]:t,rt.merge(this,rt.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:ft,!0)),ut.test(i[1])&&rt.isPlainObject(t))for(i in t)rt.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if(n=ft.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return pt.find(e);this.length=1,this[0]=n}return this.context=ft,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):rt.isFunction(e)?"undefined"!=typeof pt.ready?pt.ready(e):e(rt):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),rt.makeArray(e,this))};gt.prototype=rt.fn,pt=rt(ft);var vt=/^(?:parents|prev(?:Until|All))/,bt={children:!0,contents:!0,next:!0,prev:!0};rt.extend({dir:function(e,t,i){for(var n=[],r=e[t];r&&9!==r.nodeType&&(void 0===i||1!==r.nodeType||!rt(r).is(i));)1===r.nodeType&&n.push(r),r=r[t];return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),rt.fn.extend({has:function(e){var t,i=rt(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(rt.contains(this,i[t]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,o=[],a=dt.test(e)||"string"!=typeof e?rt(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&rt.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?rt.unique(o):o)},index:function(e){return e?"string"==typeof e?rt.inArray(this[0],rt(e)):rt.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(rt.unique(rt.merge(this.get(),rt(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),rt.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return rt.dir(e,"parentNode")},parentsUntil:function(e,t,i){return rt.dir(e,"parentNode",i)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return rt.dir(e,"nextSibling")},prevAll:function(e){return rt.dir(e,"previousSibling")},nextUntil:function(e,t,i){return rt.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return rt.dir(e,"previousSibling",i)},siblings:function(e){return rt.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return rt.sibling(e.firstChild)},contents:function(e){return rt.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:rt.merge([],e.childNodes)}},function(e,t){rt.fn[e]=function(i,n){var r=rt.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=rt.filter(n,r)),this.length>1&&(bt[e]||(r=rt.unique(r)),vt.test(e)&&(r=r.reverse())),this.pushStack(r)}});var yt=/\S+/g,xt={};rt.Callbacks=function(e){e="string"==typeof e?xt[e]||o(e):rt.extend({},e);var t,i,n,r,a,s,l=[],c=!e.once&&[],d=function(o){for(i=e.memory&&o,n=!0,a=s||0,s=0,r=l.length,t=!0;l&&r>a;a++)if(l[a].apply(o[0],o[1])===!1&&e.stopOnFalse){i=!1;break}t=!1,l&&(c?c.length&&d(c.shift()):i?l=[]:u.disable())},u={add:function(){if(l){var n=l.length;!function o(t){rt.each(t,function(t,i){var n=rt.type(i);"function"===n?e.unique&&u.has(i)||l.push(i):i&&i.length&&"string"!==n&&o(i)})}(arguments),t?r=l.length:i&&(s=n,d(i))}return this},remove:function(){return l&&rt.each(arguments,function(e,i){for(var n;(n=rt.inArray(i,l,n))>-1;)l.splice(n,1),t&&(r>=n&&r--,a>=n&&a--)}),this},has:function(e){return e?rt.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=c=i=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,i||u.disable(),this},locked:function(){return!c},fireWith:function(e,i){return!l||n&&!c||(i=i||[],i=[e,i.slice?i.slice():i],t?c.push(i):d(i)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},rt.extend({Deferred:function(e){var t=[["resolve","done",rt.Callbacks("once memory"),"resolved"],["reject","fail",rt.Callbacks("once memory"),"rejected"],["notify","progress",rt.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return rt.Deferred(function(i){rt.each(t,function(t,o){var a=rt.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&rt.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?rt.extend(e,n):n}},r={};return n.pipe=n.then,rt.each(t,function(e,o){var a=o[2],s=o[3];n[o[1]]=a.add,s&&a.add(function(){i=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?n:this,arguments),this},r[o[0]+"With"]=a.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,n,r=0,o=G.call(arguments),a=o.length,s=1!==a||e&&rt.isFunction(e.promise)?a:0,l=1===s?e:rt.Deferred(),c=function(e,i,n){return function(r){i[e]=this,n[e]=arguments.length>1?G.call(arguments):r,n===t?l.notifyWith(i,n):--s||l.resolveWith(i,n)}};if(a>1)for(t=new Array(a),i=new Array(a),n=new Array(a);a>r;r++)o[r]&&rt.isFunction(o[r].promise)?o[r].promise().done(c(r,n,o)).fail(l.reject).progress(c(r,i,t)):--s;return s||l.resolveWith(n,o),l.promise()}});var wt;rt.fn.ready=function(e){return rt.ready.promise().done(e),this},rt.extend({isReady:!1,readyWait:1,holdReady:function(e){e?rt.readyWait++:rt.ready(!0)},ready:function(e){if(e===!0?!--rt.readyWait:!rt.isReady){if(!ft.body)return setTimeout(rt.ready);rt.isReady=!0,e!==!0&&--rt.readyWait>0||(wt.resolveWith(ft,[rt]),rt.fn.triggerHandler&&(rt(ft).triggerHandler("ready"),rt(ft).off("ready")))}}}),rt.ready.promise=function(t){if(!wt)if(wt=rt.Deferred(),"complete"===ft.readyState)setTimeout(rt.ready);else if(ft.addEventListener)ft.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{ft.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var i=!1;try{i=null==e.frameElement&&ft.documentElement}catch(n){}i&&i.doScroll&&!function r(){if(!rt.isReady){try{i.doScroll("left")}catch(e){return setTimeout(r,50)}a(),rt.ready()}}()}return wt.promise(t)};var kt,Ct="undefined";for(kt in rt(it))break;it.ownLast="0"!==kt,it.inlineBlockNeedsLayout=!1,rt(function(){var e,t,i,n;i=ft.getElementsByTagName("body")[0],i&&i.style&&(t=ft.createElement("div"),n=ft.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==Ct&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",it.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(i.style.zoom=1)),i.removeChild(n))}),function(){var e=ft.createElement("div");if(null==it.deleteExpando){it.deleteExpando=!0;try{delete e.test}catch(t){it.deleteExpando=!1}}e=null}(),rt.acceptData=function(e){var t=rt.noData[(e.nodeName+" ").toLowerCase()],i=+e.nodeType||1;return 1!==i&&9!==i?!1:!t||t!==!0&&e.getAttribute("classid")===t};var _t=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,St=/([A-Z])/g;rt.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?rt.cache[e[rt.expando]]:e[rt.expando],!!e&&!c(e)},data:function(e,t,i){return d(e,t,i)},removeData:function(e,t){return u(e,t)},_data:function(e,t,i){return d(e,t,i,!0)},_removeData:function(e,t){return u(e,t,!0)}}),rt.fn.extend({data:function(e,t){var i,n,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=rt.data(o),1===o.nodeType&&!rt._data(o,"parsedAttrs"))){for(i=a.length;i--;)a[i]&&(n=a[i].name,0===n.indexOf("data-")&&(n=rt.camelCase(n.slice(5)),l(o,n,r[n])));rt._data(o,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){rt.data(this,e)}):arguments.length>1?this.each(function(){rt.data(this,e,t)}):o?l(o,e,rt.data(o,e)):void 0},removeData:function(e){return this.each(function(){rt.removeData(this,e)})}}),rt.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=rt._data(e,t),i&&(!n||rt.isArray(i)?n=rt._data(e,t,rt.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=rt.queue(e,t),n=i.length,r=i.shift(),o=rt._queueHooks(e,t),a=function(){rt.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return rt._data(e,i)||rt._data(e,i,{empty:rt.Callbacks("once memory").add(function(){rt._removeData(e,t+"queue"),rt._removeData(e,i)})})}}),rt.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?rt.queue(this[0],e):void 0===t?this:this.each(function(){var i=rt.queue(this,e,t);rt._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&rt.dequeue(this,e)})},dequeue:function(e){return this.each(function(){rt.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=rt.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)i=rt._data(o[a],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(t)}});var Tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Et=["Top","Right","Bottom","Left"],$t=function(e,t){return e=t||e,"none"===rt.css(e,"display")||!rt.contains(e.ownerDocument,e)},Nt=rt.access=function(e,t,i,n,r,o,a){var s=0,l=e.length,c=null==i;if("object"===rt.type(i)){r=!0;for(s in i)rt.access(e,t,s,i[s],!0,o,a)}else if(void 0!==n&&(r=!0,rt.isFunction(n)||(a=!0),c&&(a?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(rt(e),i)})),t))for(;l>s;s++)t(e[s],i,a?n:n.call(e[s],s,t(e[s],i)));return r?e:c?t.call(e):l?t(e[0],i):o},At=/^(?:checkbox|radio)$/i;!function(){var e=ft.createElement("input"),t=ft.createElement("div"),i=ft.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",it.leadingWhitespace=3===t.firstChild.nodeType,it.tbody=!t.getElementsByTagName("tbody").length,it.htmlSerialize=!!t.getElementsByTagName("link").length,it.html5Clone="<:nav></:nav>"!==ft.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,i.appendChild(e),it.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",it.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,i.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",it.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,it.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){it.noCloneEvent=!1}),t.cloneNode(!0).click()),null==it.deleteExpando){it.deleteExpando=!0;try{delete t.test}catch(n){it.deleteExpando=!1}}}(),function(){var t,i,n=ft.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})i="on"+t,(it[t+"Bubbles"]=i in e)||(n.setAttribute(i,"t"),it[t+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var Lt=/^(?:input|select|textarea)$/i,Rt=/^key/,Ot=/^(?:mouse|pointer|contextmenu)|click/,Dt=/^(?:focusinfocus|focusoutblur)$/,Ht=/^([^.]*)(?:\.(.+)|)$/;rt.event={global:{},add:function(e,t,i,n,r){var o,a,s,l,c,d,u,h,p,f,m,g=rt._data(e);if(g){for(i.handler&&(l=i,i=l.handler,r=l.selector),i.guid||(i.guid=rt.guid++),(a=g.events)||(a=g.events={}),(d=g.handle)||(d=g.handle=function(e){return typeof rt===Ct||e&&rt.event.triggered===e.type?void 0:rt.event.dispatch.apply(d.elem,arguments)},d.elem=e),t=(t||"").match(yt)||[""],s=t.length;s--;)o=Ht.exec(t[s])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p&&(c=rt.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,c=rt.event.special[p]||{},u=rt.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&rt.expr.match.needsContext.test(r),namespace:f.join(".")},l),(h=a[p])||(h=a[p]=[],h.delegateCount=0,c.setup&&c.setup.call(e,n,f,d)!==!1||(e.addEventListener?e.addEventListener(p,d,!1):e.attachEvent&&e.attachEvent("on"+p,d))),c.add&&(c.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),rt.event.global[p]=!0);e=null}},remove:function(e,t,i,n,r){var o,a,s,l,c,d,u,h,p,f,m,g=rt.hasData(e)&&rt._data(e);if(g&&(d=g.events)){for(t=(t||"").match(yt)||[""],c=t.length;c--;)if(s=Ht.exec(t[c])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p){for(u=rt.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,h=d[p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=h.length;o--;)a=h[o],!r&&m!==a.origType||i&&i.guid!==a.guid||s&&!s.test(a.namespace)||n&&n!==a.selector&&("**"!==n||!a.selector)||(h.splice(o,1),a.selector&&h.delegateCount--,u.remove&&u.remove.call(e,a));l&&!h.length&&(u.teardown&&u.teardown.call(e,f,g.handle)!==!1||rt.removeEvent(e,p,g.handle),delete d[p])}else for(p in d)rt.event.remove(e,p+t[c],i,n,!0);rt.isEmptyObject(d)&&(delete g.handle,rt._removeData(e,"events"))}},trigger:function(t,i,n,r){var o,a,s,l,c,d,u,h=[n||ft],p=tt.call(t,"type")?t.type:t,f=tt.call(t,"namespace")?t.namespace.split("."):[];if(s=d=n=n||ft,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(p+rt.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),a=p.indexOf(":")<0&&"on"+p,t=t[rt.expando]?t:new rt.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:rt.makeArray(i,[t]),c=rt.event.special[p]||{},r||!c.trigger||c.trigger.apply(n,i)!==!1)){if(!r&&!c.noBubble&&!rt.isWindow(n)){for(l=c.delegateType||p,Dt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),d=s;
d===(n.ownerDocument||ft)&&h.push(d.defaultView||d.parentWindow||e)}for(u=0;(s=h[u++])&&!t.isPropagationStopped();)t.type=u>1?l:c.bindType||p,o=(rt._data(s,"events")||{})[t.type]&&rt._data(s,"handle"),o&&o.apply(s,i),o=a&&s[a],o&&o.apply&&rt.acceptData(s)&&(t.result=o.apply(s,i),t.result===!1&&t.preventDefault());if(t.type=p,!r&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(h.pop(),i)===!1)&&rt.acceptData(n)&&a&&n[p]&&!rt.isWindow(n)){d=n[a],d&&(n[a]=null),rt.event.triggered=p;try{n[p]()}catch(m){}rt.event.triggered=void 0,d&&(n[a]=d)}return t.result}},dispatch:function(e){e=rt.event.fix(e);var t,i,n,r,o,a=[],s=G.call(arguments),l=(rt._data(this,"events")||{})[e.type]||[],c=rt.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(a=rt.event.handlers.call(this,e,l),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,o=0;(n=r.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(n.namespace))&&(e.handleObj=n,e.data=n.data,i=((rt.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,s),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(r=[],o=0;s>o;o++)n=t[o],i=n.selector+" ",void 0===r[i]&&(r[i]=n.needsContext?rt(i,this).index(l)>=0:rt.find(i,this,null,[l]).length),r[i]&&r.push(n);r.length&&a.push({elem:l,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[rt.expando])return e;var t,i,n,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Ot.test(r)?this.mouseHooks:Rt.test(r)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,e=new rt.Event(o),t=n.length;t--;)i=n[t],e[i]=o[i];return e.target||(e.target=o.srcElement||ft),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||ft,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return rt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return rt.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var r=rt.extend(new rt.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?rt.event.trigger(r,null,t):rt.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},rt.removeEvent=ft.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===Ct&&(e[n]=null),e.detachEvent(n,i))},rt.Event=function(e,t){return this instanceof rt.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?h:p):this.type=e,t&&rt.extend(this,t),this.timeStamp=e&&e.timeStamp||rt.now(),void(this[rt.expando]=!0)):new rt.Event(e,t)},rt.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},rt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){rt.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==n&&!rt.contains(n,r))&&(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),it.submitBubbles||(rt.event.special.submit={setup:function(){return rt.nodeName(this,"form")?!1:void rt.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=rt.nodeName(t,"input")||rt.nodeName(t,"button")?t.form:void 0;i&&!rt._data(i,"submitBubbles")&&(rt.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),rt._data(i,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&rt.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return rt.nodeName(this,"form")?!1:void rt.event.remove(this,"._submit")}}),it.changeBubbles||(rt.event.special.change={setup:function(){return Lt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(rt.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),rt.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),rt.event.simulate("change",this,e,!0)})),!1):void rt.event.add(this,"beforeactivate._change",function(e){var t=e.target;Lt.test(t.nodeName)&&!rt._data(t,"changeBubbles")&&(rt.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||rt.event.simulate("change",this.parentNode,e,!0)}),rt._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return rt.event.remove(this,"._change"),!Lt.test(this.nodeName)}}),it.focusinBubbles||rt.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){rt.event.simulate(t,e.target,rt.event.fix(e),!0)};rt.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=rt._data(n,t);r||n.addEventListener(e,i,!0),rt._data(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=rt._data(n,t)-1;r?rt._data(n,t,r):(n.removeEventListener(e,i,!0),rt._removeData(n,t))}}}),rt.fn.extend({on:function(e,t,i,n,r){var o,a;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(o in e)this.on(o,t,i,e[o],r);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),n===!1)n=p;else if(!n)return this;return 1===r&&(a=n,n=function(e){return rt().off(e),a.apply(this,arguments)},n.guid=a.guid||(a.guid=rt.guid++)),this.each(function(){rt.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,rt(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=p),this.each(function(){rt.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){rt.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?rt.event.trigger(e,t,i,!0):void 0}});var jt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ft=/ jQuery\d+="(?:null|\d+)"/g,Pt=new RegExp("<(?:"+jt+")[\\s/>]","i"),Bt=/^\s+/,It=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Mt=/<([\w:]+)/,Wt=/<tbody/i,zt=/<|&#?\w+;/,qt=/<(?:script|style|link)/i,Ut=/checked\s*(?:[^=]|=\s*.checked.)/i,Kt=/^$|\/(?:java|ecma)script/i,Vt=/^true\/(.*)/,Xt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Gt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:it.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Jt=m(ft),Qt=Jt.appendChild(ft.createElement("div"));Gt.optgroup=Gt.option,Gt.tbody=Gt.tfoot=Gt.colgroup=Gt.caption=Gt.thead,Gt.th=Gt.td,rt.extend({clone:function(e,t,i){var n,r,o,a,s,l=rt.contains(e.ownerDocument,e);if(it.html5Clone||rt.isXMLDoc(e)||!Pt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Qt.innerHTML=e.outerHTML,Qt.removeChild(o=Qt.firstChild)),!(it.noCloneEvent&&it.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||rt.isXMLDoc(e)))for(n=g(o),s=g(e),a=0;null!=(r=s[a]);++a)n[a]&&C(r,n[a]);if(t)if(i)for(s=s||g(e),n=n||g(o),a=0;null!=(r=s[a]);a++)k(r,n[a]);else k(e,o);return n=g(o,"script"),n.length>0&&w(n,!l&&g(e,"script")),n=s=r=null,o},buildFragment:function(e,t,i,n){for(var r,o,a,s,l,c,d,u=e.length,h=m(t),p=[],f=0;u>f;f++)if(o=e[f],o||0===o)if("object"===rt.type(o))rt.merge(p,o.nodeType?[o]:o);else if(zt.test(o)){for(s=s||h.appendChild(t.createElement("div")),l=(Mt.exec(o)||["",""])[1].toLowerCase(),d=Gt[l]||Gt._default,s.innerHTML=d[1]+o.replace(It,"<$1></$2>")+d[2],r=d[0];r--;)s=s.lastChild;if(!it.leadingWhitespace&&Bt.test(o)&&p.push(t.createTextNode(Bt.exec(o)[0])),!it.tbody)for(o="table"!==l||Wt.test(o)?"<table>"!==d[1]||Wt.test(o)?0:s:s.firstChild,r=o&&o.childNodes.length;r--;)rt.nodeName(c=o.childNodes[r],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(rt.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=h.lastChild}else p.push(t.createTextNode(o));for(s&&h.removeChild(s),it.appendChecked||rt.grep(g(p,"input"),v),f=0;o=p[f++];)if((!n||-1===rt.inArray(o,n))&&(a=rt.contains(o.ownerDocument,o),s=g(h.appendChild(o),"script"),a&&w(s),i))for(r=0;o=s[r++];)Kt.test(o.type||"")&&i.push(o);return s=null,h},cleanData:function(e,t){for(var i,n,r,o,a=0,s=rt.expando,l=rt.cache,c=it.deleteExpando,d=rt.event.special;null!=(i=e[a]);a++)if((t||rt.acceptData(i))&&(r=i[s],o=r&&l[r])){if(o.events)for(n in o.events)d[n]?rt.event.remove(i,n):rt.removeEvent(i,n,o.handle);l[r]&&(delete l[r],c?delete i[s]:typeof i.removeAttribute!==Ct?i.removeAttribute(s):i[s]=null,X.push(r))}}}),rt.fn.extend({text:function(e){return Nt(this,function(e){return void 0===e?rt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ft).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=b(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=b(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?rt.filter(e,this):this,r=0;null!=(i=n[r]);r++)t||1!==i.nodeType||rt.cleanData(g(i)),i.parentNode&&(t&&rt.contains(i.ownerDocument,i)&&w(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&rt.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&rt.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return rt.clone(this,e,t)})},html:function(e){return Nt(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Ft,""):void 0;if(!("string"!=typeof e||qt.test(e)||!it.htmlSerialize&&Pt.test(e)||!it.leadingWhitespace&&Bt.test(e)||Gt[(Mt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(It,"<$1></$2>");try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(rt.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,rt.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=J.apply([],e);var i,n,r,o,a,s,l=0,c=this.length,d=this,u=c-1,h=e[0],p=rt.isFunction(h);if(p||c>1&&"string"==typeof h&&!it.checkClone&&Ut.test(h))return this.each(function(i){var n=d.eq(i);p&&(e[0]=h.call(this,i,n.html())),n.domManip(e,t)});if(c&&(s=rt.buildFragment(e,this[0].ownerDocument,!1,this),i=s.firstChild,1===s.childNodes.length&&(s=i),i)){for(o=rt.map(g(s,"script"),y),r=o.length;c>l;l++)n=s,l!==u&&(n=rt.clone(n,!0,!0),r&&rt.merge(o,g(n,"script"))),t.call(this[l],n,l);if(r)for(a=o[o.length-1].ownerDocument,rt.map(o,x),l=0;r>l;l++)n=o[l],Kt.test(n.type||"")&&!rt._data(n,"globalEval")&&rt.contains(a,n)&&(n.src?rt._evalUrl&&rt._evalUrl(n.src):rt.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Xt,"")));s=i=null}return this}}),rt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){rt.fn[e]=function(e){for(var i,n=0,r=[],o=rt(e),a=o.length-1;a>=n;n++)i=n===a?this:this.clone(!0),rt(o[n])[t](i),Q.apply(r,i.get());return this.pushStack(r)}});var Yt,Zt={};!function(){var e;it.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,i,n;return i=ft.getElementsByTagName("body")[0],i&&i.style?(t=ft.createElement("div"),n=ft.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==Ct&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(ft.createElement("div")).style.width="5px",e=3!==t.offsetWidth),i.removeChild(n),e):void 0}}();var ei,ti,ii=/^margin/,ni=new RegExp("^("+Tt+")(?!px)[a-z%]+$","i"),ri=/^(top|right|bottom|left)$/;e.getComputedStyle?(ei=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},ti=function(e,t,i){var n,r,o,a,s=e.style;return i=i||ei(e),a=i?i.getPropertyValue(t)||i[t]:void 0,i&&(""!==a||rt.contains(e.ownerDocument,e)||(a=rt.style(e,t)),ni.test(a)&&ii.test(t)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o)),void 0===a?a:a+""}):ft.documentElement.currentStyle&&(ei=function(e){return e.currentStyle},ti=function(e,t,i){var n,r,o,a,s=e.style;return i=i||ei(e),a=i?i[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),ni.test(a)&&!ri.test(t)&&(n=s.left,r=e.runtimeStyle,o=r&&r.left,o&&(r.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=n,o&&(r.left=o)),void 0===a?a:a+""||"auto"}),function(){function t(){var t,i,n,r;i=ft.getElementsByTagName("body")[0],i&&i.style&&(t=ft.createElement("div"),n=ft.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,l=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,a="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,r=t.appendChild(ft.createElement("div")),r.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=t.getElementsByTagName("td"),r[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===r[0].offsetHeight,s&&(r[0].style.display="",r[1].style.display="none",s=0===r[0].offsetHeight),i.removeChild(n))}var i,n,r,o,a,s,l;i=ft.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=i.getElementsByTagName("a")[0],n=r&&r.style,n&&(n.cssText="float:left;opacity:.5",it.opacity="0.5"===n.opacity,it.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===i.style.backgroundClip,it.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,rt.extend(it,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==l&&t(),l}}))}(),rt.swap=function(e,t,i,n){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=i.apply(e,n||[]);for(o in t)e.style[o]=a[o];return r};var oi=/alpha\([^)]*\)/i,ai=/opacity\s*=\s*([^)]*)/,si=/^(none|table(?!-c[ea]).+)/,li=new RegExp("^("+Tt+")(.*)$","i"),ci=new RegExp("^([+-])=("+Tt+")","i"),di={position:"absolute",visibility:"hidden",display:"block"},ui={letterSpacing:"0",fontWeight:"400"},hi=["Webkit","O","Moz","ms"];rt.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=ti(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":it.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=rt.camelCase(t),l=e.style;if(t=rt.cssProps[s]||(rt.cssProps[s]=E(l,s)),a=rt.cssHooks[t]||rt.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(e,!1,n))?r:l[t];if(o=typeof i,"string"===o&&(r=ci.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(rt.css(e,t)),o="number"),null!=i&&i===i&&("number"!==o||rt.cssNumber[s]||(i+="px"),it.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&void 0===(i=a.set(e,i,n)))))try{l[t]=i}catch(c){}}},css:function(e,t,i,n){var r,o,a,s=rt.camelCase(t);return t=rt.cssProps[s]||(rt.cssProps[s]=E(e.style,s)),a=rt.cssHooks[t]||rt.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,i)),void 0===o&&(o=ti(e,t,n)),"normal"===o&&t in ui&&(o=ui[t]),""===i||i?(r=parseFloat(o),i===!0||rt.isNumeric(r)?r||0:o):o}}),rt.each(["height","width"],function(e,t){rt.cssHooks[t]={get:function(e,i,n){return i?si.test(rt.css(e,"display"))&&0===e.offsetWidth?rt.swap(e,di,function(){return L(e,t,n)}):L(e,t,n):void 0},set:function(e,i,n){var r=n&&ei(e);return N(e,i,n?A(e,t,n,it.boxSizing&&"border-box"===rt.css(e,"boxSizing",!1,r),r):0)}}}),it.opacity||(rt.cssHooks.opacity={get:function(e,t){return ai.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,r=rt.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===rt.trim(o.replace(oi,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=oi.test(o)?o.replace(oi,r):o+" "+r)}}),rt.cssHooks.marginRight=T(it.reliableMarginRight,function(e,t){return t?rt.swap(e,{display:"inline-block"},ti,[e,"marginRight"]):void 0}),rt.each({margin:"",padding:"",border:"Width"},function(e,t){rt.cssHooks[e+t]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];4>n;n++)r[e+Et[n]+t]=o[n]||o[n-2]||o[0];return r}},ii.test(e)||(rt.cssHooks[e+t].set=N)}),rt.fn.extend({css:function(e,t){return Nt(this,function(e,t,i){var n,r,o={},a=0;if(rt.isArray(t)){for(n=ei(e),r=t.length;r>a;a++)o[t[a]]=rt.css(e,t[a],!1,n);return o}return void 0!==i?rt.style(e,t,i):rt.css(e,t)},e,t,arguments.length>1)},show:function(){return $(this,!0)},hide:function(){return $(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){$t(this)?rt(this).show():rt(this).hide()})}}),rt.Tween=R,R.prototype={constructor:R,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(rt.cssNumber[i]?"":"px")},cur:function(){var e=R.propHooks[this.prop];return e&&e.get?e.get(this):R.propHooks._default.get(this)},run:function(e){var t,i=R.propHooks[this.prop];return this.pos=t=this.options.duration?rt.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=rt.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){rt.fx.step[e.prop]?rt.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[rt.cssProps[e.prop]]||rt.cssHooks[e.prop])?rt.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},rt.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},rt.fx=R.prototype.init,rt.fx.step={};var pi,fi,mi=/^(?:toggle|show|hide)$/,gi=new RegExp("^(?:([+-])=|)("+Tt+")([a-z%]*)$","i"),vi=/queueHooks$/,bi=[j],yi={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),r=gi.exec(t),o=r&&r[3]||(rt.cssNumber[e]?"":"px"),a=(rt.cssNumber[e]||"px"!==o&&+n)&&gi.exec(rt.css(i.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],r=r||[],a=+n||1;do s=s||".5",a/=s,rt.style(i.elem,e,a+o);while(s!==(s=i.cur()/n)&&1!==s&&--l)}return r&&(a=i.start=+a||+n||0,i.unit=o,i.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),i}]};rt.Animation=rt.extend(P,{tweener:function(e,t){rt.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,r=e.length;r>n;n++)i=e[n],yi[i]=yi[i]||[],yi[i].unshift(t)},prefilter:function(e,t){t?bi.unshift(e):bi.push(e)}}),rt.speed=function(e,t,i){var n=e&&"object"==typeof e?rt.extend({},e):{complete:i||!i&&t||rt.isFunction(e)&&e,duration:e,easing:i&&t||t&&!rt.isFunction(t)&&t};return n.duration=rt.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in rt.fx.speeds?rt.fx.speeds[n.duration]:rt.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){rt.isFunction(n.old)&&n.old.call(this),n.queue&&rt.dequeue(this,n.queue)},n},rt.fn.extend({fadeTo:function(e,t,i,n){return this.filter($t).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=rt.isEmptyObject(e),o=rt.speed(t,i,n),a=function(){var t=P(this,rt.extend({},e),o);(r||rt._data(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=rt.timers,a=rt._data(this);if(r)a[r]&&a[r].stop&&n(a[r]);else for(r in a)a[r]&&a[r].stop&&vi.test(r)&&n(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(i),t=!1,o.splice(r,1));(t||!i)&&rt.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=rt._data(this),n=i[e+"queue"],r=i[e+"queueHooks"],o=rt.timers,a=n?n.length:0;for(i.finish=!0,rt.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),rt.each(["toggle","show","hide"],function(e,t){var i=rt.fn[t];rt.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(D(t,!0),e,n,r)}}),rt.each({slideDown:D("show"),slideUp:D("hide"),slideToggle:D("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){rt.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),rt.timers=[],rt.fx.tick=function(){var e,t=rt.timers,i=0;for(pi=rt.now();i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||rt.fx.stop(),pi=void 0},rt.fx.timer=function(e){rt.timers.push(e),e()?rt.fx.start():rt.timers.pop()},rt.fx.interval=13,rt.fx.start=function(){fi||(fi=setInterval(rt.fx.tick,rt.fx.interval))},rt.fx.stop=function(){clearInterval(fi),fi=null},rt.fx.speeds={slow:600,fast:200,_default:400},rt.fn.delay=function(e,t){return e=rt.fx?rt.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e,t,i,n,r;t=ft.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=t.getElementsByTagName("a")[0],i=ft.createElement("select"),r=i.appendChild(ft.createElement("option")),e=t.getElementsByTagName("input")[0],n.style.cssText="top:1px",it.getSetAttribute="t"!==t.className,it.style=/top/.test(n.getAttribute("style")),it.hrefNormalized="/a"===n.getAttribute("href"),it.checkOn=!!e.value,it.optSelected=r.selected,it.enctype=!!ft.createElement("form").enctype,i.disabled=!0,it.optDisabled=!r.disabled,e=ft.createElement("input"),e.setAttribute("value",""),it.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),it.radioValue="t"===e.value}();var xi=/\r/g;rt.fn.extend({val:function(e){var t,i,n,r=this[0];{if(arguments.length)return n=rt.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,rt(this).val()):e,null==r?r="":"number"==typeof r?r+="":rt.isArray(r)&&(r=rt.map(r,function(e){return null==e?"":e+""})),t=rt.valHooks[this.type]||rt.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=rt.valHooks[r.type]||rt.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(xi,""):null==i?"":i)}}}),rt.extend({valHooks:{option:{get:function(e){var t=rt.find.attr(e,"value");return null!=t?t:rt.trim(rt.text(e))}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:n.length,l=0>r?s:o?r:0;s>l;l++)if(i=n[l],!(!i.selected&&l!==r||(it.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&rt.nodeName(i.parentNode,"optgroup"))){if(t=rt(i).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var i,n,r=e.options,o=rt.makeArray(t),a=r.length;a--;)if(n=r[a],rt.inArray(rt.valHooks.option.get(n),o)>=0)try{n.selected=i=!0}catch(s){n.scrollHeight}else n.selected=!1;return i||(e.selectedIndex=-1),r}}}}),rt.each(["radio","checkbox"],function(){rt.valHooks[this]={set:function(e,t){return rt.isArray(t)?e.checked=rt.inArray(rt(e).val(),t)>=0:void 0}},it.checkOn||(rt.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var wi,ki,Ci=rt.expr.attrHandle,_i=/^(?:checked|selected)$/i,Si=it.getSetAttribute,Ti=it.input;rt.fn.extend({attr:function(e,t){return Nt(this,rt.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){rt.removeAttr(this,e)})}}),rt.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Ct?rt.prop(e,t,i):(1===o&&rt.isXMLDoc(e)||(t=t.toLowerCase(),n=rt.attrHooks[t]||(rt.expr.match.bool.test(t)?ki:wi)),void 0===i?n&&"get"in n&&null!==(r=n.get(e,t))?r:(r=rt.find.attr(e,t),null==r?void 0:r):null!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):void rt.removeAttr(e,t))},removeAttr:function(e,t){var i,n,r=0,o=t&&t.match(yt);if(o&&1===e.nodeType)for(;i=o[r++];)n=rt.propFix[i]||i,rt.expr.match.bool.test(i)?Ti&&Si||!_i.test(i)?e[n]=!1:e[rt.camelCase("default-"+i)]=e[n]=!1:rt.attr(e,i,""),e.removeAttribute(Si?i:n)},attrHooks:{type:{set:function(e,t){if(!it.radioValue&&"radio"===t&&rt.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),ki={set:function(e,t,i){return t===!1?rt.removeAttr(e,i):Ti&&Si||!_i.test(i)?e.setAttribute(!Si&&rt.propFix[i]||i,i):e[rt.camelCase("default-"+i)]=e[i]=!0,i}},rt.each(rt.expr.match.bool.source.match(/\w+/g),function(e,t){var i=Ci[t]||rt.find.attr;Ci[t]=Ti&&Si||!_i.test(t)?function(e,t,n){var r,o;return n||(o=Ci[t],Ci[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,Ci[t]=o),r}:function(e,t,i){return i?void 0:e[rt.camelCase("default-"+t)]?t.toLowerCase():null}}),Ti&&Si||(rt.attrHooks.value={set:function(e,t,i){return rt.nodeName(e,"input")?void(e.defaultValue=t):wi&&wi.set(e,t,i)}}),Si||(wi={set:function(e,t,i){var n=e.getAttributeNode(i);return n||e.setAttributeNode(n=e.ownerDocument.createAttribute(i)),n.value=t+="","value"===i||t===e.getAttribute(i)?t:void 0}},Ci.id=Ci.name=Ci.coords=function(e,t,i){var n;return i?void 0:(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},rt.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:void 0},set:wi.set},rt.attrHooks.contenteditable={set:function(e,t,i){wi.set(e,""===t?!1:t,i)}},rt.each(["width","height"],function(e,t){rt.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}}})),it.style||(rt.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Ei=/^(?:input|select|textarea|button|object)$/i,$i=/^(?:a|area)$/i;rt.fn.extend({prop:function(e,t){return Nt(this,rt.prop,e,t,arguments.length>1)},removeProp:function(e){return e=rt.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),rt.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,r,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!rt.isXMLDoc(e),o&&(t=rt.propFix[t]||t,r=rt.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=rt.find.attr(e,"tabindex");return t?parseInt(t,10):Ei.test(e.nodeName)||$i.test(e.nodeName)&&e.href?0:-1}}}}),it.hrefNormalized||rt.each(["href","src"],function(e,t){rt.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),it.optSelected||(rt.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),rt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rt.propFix[this.toLowerCase()]=this}),it.enctype||(rt.propFix.enctype="encoding");var Ni=/[\t\r\n\f]/g;rt.fn.extend({addClass:function(e){var t,i,n,r,o,a,s=0,l=this.length,c="string"==typeof e&&e;if(rt.isFunction(e))return this.each(function(t){rt(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(yt)||[];l>s;s++)if(i=this[s],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ni," "):" ")){for(o=0;r=t[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");a=rt.trim(n),i.className!==a&&(i.className=a)}return this},removeClass:function(e){var t,i,n,r,o,a,s=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(rt.isFunction(e))return this.each(function(t){rt(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(yt)||[];l>s;s++)if(i=this[s],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ni," "):"")){for(o=0;r=t[o++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");a=e?rt.trim(n):"",i.className!==a&&(i.className=a)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(rt.isFunction(e)?function(i){rt(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,n=0,r=rt(this),o=e.match(yt)||[];t=o[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(i===Ct||"boolean"===i)&&(this.className&&rt._data(this,"__className__",this.className),this.className=this.className||e===!1?"":rt._data(this,"__className__")||"")
})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ni," ").indexOf(t)>=0)return!0;return!1}}),rt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){rt.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),rt.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Ai=rt.now(),Li=/\?/,Ri=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;rt.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var i,n=null,r=rt.trim(t+"");return r&&!rt.trim(r.replace(Ri,function(e,t,r,o){return i&&t&&(n=0),0===n?e:(i=r||t,n+=!o-!r,"")}))?Function("return "+r)():rt.error("Invalid JSON: "+t)},rt.parseXML=function(t){var i,n;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(n=new DOMParser,i=n.parseFromString(t,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(t))}catch(r){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||rt.error("Invalid XML: "+t),i};var Oi,Di,Hi=/#.*$/,ji=/([?&])_=[^&]*/,Fi=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Pi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Bi=/^(?:GET|HEAD)$/,Ii=/^\/\//,Mi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Wi={},zi={},qi="*/".concat("*");try{Di=location.href}catch(Ui){Di=ft.createElement("a"),Di.href="",Di=Di.href}Oi=Mi.exec(Di.toLowerCase())||[],rt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Di,type:"GET",isLocal:Pi.test(Oi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":rt.parseJSON,"text xml":rt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?M(M(e,rt.ajaxSettings),t):M(rt.ajaxSettings,e)},ajaxPrefilter:B(Wi),ajaxTransport:B(zi),ajax:function(e,t){function i(e,t,i,n){var r,d,v,b,x,k=t;2!==y&&(y=2,s&&clearTimeout(s),c=void 0,a=n||"",w.readyState=e>0?4:0,r=e>=200&&300>e||304===e,i&&(b=W(u,w,i)),b=z(u,b,w,r),r?(u.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(rt.lastModified[o]=x),x=w.getResponseHeader("etag"),x&&(rt.etag[o]=x)),204===e||"HEAD"===u.type?k="nocontent":304===e?k="notmodified":(k=b.state,d=b.data,v=b.error,r=!v)):(v=k,(e||!k)&&(k="error",0>e&&(e=0))),w.status=e,w.statusText=(t||k)+"",r?f.resolveWith(h,[d,k,w]):f.rejectWith(h,[w,k,v]),w.statusCode(g),g=void 0,l&&p.trigger(r?"ajaxSuccess":"ajaxError",[w,u,r?d:v]),m.fireWith(h,[w,k]),l&&(p.trigger("ajaxComplete",[w,u]),--rt.active||rt.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,o,a,s,l,c,d,u=rt.ajaxSetup({},t),h=u.context||u,p=u.context&&(h.nodeType||h.jquery)?rt(h):rt.event,f=rt.Deferred(),m=rt.Callbacks("once memory"),g=u.statusCode||{},v={},b={},y=0,x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!d)for(d={};t=Fi.exec(a);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?a:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return y||(e=b[i]=b[i]||e,v[e]=t),this},overrideMimeType:function(e){return y||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||x;return c&&c.abort(t),i(0,t),this}};if(f.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,u.url=((e||u.url||Di)+"").replace(Hi,"").replace(Ii,Oi[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=rt.trim(u.dataType||"*").toLowerCase().match(yt)||[""],null==u.crossDomain&&(n=Mi.exec(u.url.toLowerCase()),u.crossDomain=!(!n||n[1]===Oi[1]&&n[2]===Oi[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Oi[3]||("http:"===Oi[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=rt.param(u.data,u.traditional)),I(Wi,u,t,w),2===y)return w;l=u.global,l&&0===rt.active++&&rt.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!Bi.test(u.type),o=u.url,u.hasContent||(u.data&&(o=u.url+=(Li.test(o)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=ji.test(o)?o.replace(ji,"$1_="+Ai++):o+(Li.test(o)?"&":"?")+"_="+Ai++)),u.ifModified&&(rt.lastModified[o]&&w.setRequestHeader("If-Modified-Since",rt.lastModified[o]),rt.etag[o]&&w.setRequestHeader("If-None-Match",rt.etag[o])),(u.data&&u.hasContent&&u.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",u.contentType),w.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+qi+"; q=0.01":""):u.accepts["*"]);for(r in u.headers)w.setRequestHeader(r,u.headers[r]);if(u.beforeSend&&(u.beforeSend.call(h,w,u)===!1||2===y))return w.abort();x="abort";for(r in{success:1,error:1,complete:1})w[r](u[r]);if(c=I(zi,u,t,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,u]),u.async&&u.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},u.timeout));try{y=1,c.send(v,i)}catch(k){if(!(2>y))throw k;i(-1,k)}}else i(-1,"No Transport");return w},getJSON:function(e,t,i){return rt.get(e,t,i,"json")},getScript:function(e,t){return rt.get(e,void 0,t,"script")}}),rt.each(["get","post"],function(e,t){rt[t]=function(e,i,n,r){return rt.isFunction(i)&&(r=r||n,n=i,i=void 0),rt.ajax({url:e,type:t,dataType:r,data:i,success:n})}}),rt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){rt.fn[t]=function(e){return this.on(t,e)}}),rt._evalUrl=function(e){return rt.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},rt.fn.extend({wrapAll:function(e){if(rt.isFunction(e))return this.each(function(t){rt(this).wrapAll(e.call(this,t))});if(this[0]){var t=rt(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(rt.isFunction(e)?function(t){rt(this).wrapInner(e.call(this,t))}:function(){var t=rt(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=rt.isFunction(e);return this.each(function(i){rt(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){rt.nodeName(this,"body")||rt(this).replaceWith(this.childNodes)}).end()}}),rt.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!it.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||rt.css(e,"display"))},rt.expr.filters.visible=function(e){return!rt.expr.filters.hidden(e)};var Ki=/%20/g,Vi=/\[\]$/,Xi=/\r?\n/g,Gi=/^(?:submit|button|image|reset|file)$/i,Ji=/^(?:input|select|textarea|keygen)/i;rt.param=function(e,t){var i,n=[],r=function(e,t){t=rt.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=rt.ajaxSettings&&rt.ajaxSettings.traditional),rt.isArray(e)||e.jquery&&!rt.isPlainObject(e))rt.each(e,function(){r(this.name,this.value)});else for(i in e)q(i,e[i],t,r);return n.join("&").replace(Ki,"+")},rt.fn.extend({serialize:function(){return rt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=rt.prop(this,"elements");return e?rt.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!rt(this).is(":disabled")&&Ji.test(this.nodeName)&&!Gi.test(e)&&(this.checked||!At.test(e))}).map(function(e,t){var i=rt(this).val();return null==i?null:rt.isArray(i)?rt.map(i,function(e){return{name:t.name,value:e.replace(Xi,"\r\n")}}):{name:t.name,value:i.replace(Xi,"\r\n")}}).get()}}),rt.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&U()||K()}:U;var Qi=0,Yi={},Zi=rt.ajaxSettings.xhr();e.ActiveXObject&&rt(e).on("unload",function(){for(var e in Yi)Yi[e](void 0,!0)}),it.cors=!!Zi&&"withCredentials"in Zi,Zi=it.ajax=!!Zi,Zi&&rt.ajaxTransport(function(e){if(!e.crossDomain||it.cors){var t;return{send:function(i,n){var r,o=e.xhr(),a=++Qi;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)void 0!==i[r]&&o.setRequestHeader(r,i[r]+"");o.send(e.hasContent&&e.data||null),t=function(i,r){var s,l,c;if(t&&(r||4===o.readyState))if(delete Yi[a],t=void 0,o.onreadystatechange=rt.noop,r)4!==o.readyState&&o.abort();else{c={},s=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(d){l=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=c.text?200:404}c&&n(s,l,c,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Yi[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),rt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return rt.globalEval(e),e}}}),rt.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),rt.ajaxTransport("script",function(e){if(e.crossDomain){var t,i=ft.head||rt("head")[0]||ft.documentElement;return{send:function(n,r){t=ft.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||r(200,"success"))},i.insertBefore(t,i.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var en=[],tn=/(=)\?(?=&|$)|\?\?/;rt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||rt.expando+"_"+Ai++;return this[e]=!0,e}}),rt.ajaxPrefilter("json jsonp",function(t,i,n){var r,o,a,s=t.jsonp!==!1&&(tn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=rt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(tn,"$1"+r):t.jsonp!==!1&&(t.url+=(Li.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||rt.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},n.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=i.jsonpCallback,en.push(r)),a&&rt.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),rt.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||ft;var n=ut.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=rt.buildFragment([e],t,r),r&&r.length&&rt(r).remove(),rt.merge([],n.childNodes))};var nn=rt.fn.load;rt.fn.load=function(e,t,i){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var n,r,o,a=this,s=e.indexOf(" ");return s>=0&&(n=rt.trim(e.slice(s,e.length)),e=e.slice(0,s)),rt.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&rt.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){r=arguments,a.html(n?rt("<div>").append(rt.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){a.each(i,r||[e.responseText,t,e])}),this},rt.expr.filters.animated=function(e){return rt.grep(rt.timers,function(t){return e===t.elem}).length};var rn=e.document.documentElement;rt.offset={setOffset:function(e,t,i){var n,r,o,a,s,l,c,d=rt.css(e,"position"),u=rt(e),h={};"static"===d&&(e.style.position="relative"),s=u.offset(),o=rt.css(e,"top"),l=rt.css(e,"left"),c=("absolute"===d||"fixed"===d)&&rt.inArray("auto",[o,l])>-1,c?(n=u.position(),a=n.top,r=n.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),rt.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+r),"using"in t?t.using.call(e,h):u.css(h)}},rt.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){rt.offset.setOffset(this,e,t)});var t,i,n={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return t=o.documentElement,rt.contains(t,r)?(typeof r.getBoundingClientRect!==Ct&&(n=r.getBoundingClientRect()),i=V(o),{top:n.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n},position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===rt.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),rt.nodeName(e[0],"html")||(i=e.offset()),i.top+=rt.css(e[0],"borderTopWidth",!0),i.left+=rt.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-rt.css(n,"marginTop",!0),left:t.left-i.left-rt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||rn;e&&!rt.nodeName(e,"html")&&"static"===rt.css(e,"position");)e=e.offsetParent;return e||rn})}}),rt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i=/Y/.test(t);rt.fn[e]=function(n){return Nt(this,function(e,n,r){var o=V(e);return void 0===r?o?t in o?o[t]:o.document.documentElement[n]:e[n]:void(o?o.scrollTo(i?rt(o).scrollLeft():r,i?r:rt(o).scrollTop()):e[n]=r)},e,n,arguments.length,null)}}),rt.each(["top","left"],function(e,t){rt.cssHooks[t]=T(it.pixelPosition,function(e,i){return i?(i=ti(e,t),ni.test(i)?rt(e).position()[t]+"px":i):void 0})}),rt.each({Height:"height",Width:"width"},function(e,t){rt.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){rt.fn[n]=function(n,r){var o=arguments.length&&(i||"boolean"!=typeof n),a=i||(n===!0||r===!0?"margin":"border");return Nt(this,function(t,i,n){var r;return rt.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?rt.css(t,i,a):rt.style(t,i,n,a)},t,o?n:void 0,o,null)}})}),rt.fn.size=function(){return this.length},rt.fn.andSelf=rt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return rt});var on=e.jQuery,an=e.$;return rt.noConflict=function(t){return e.$===rt&&(e.$=an),t&&e.jQuery===rt&&(e.jQuery=on),rt},typeof t===Ct&&(e.jQuery=e.$=rt),rt}),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var i,n=e(document);e.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var i=e('meta[name="csrf-token"]').attr("content");i&&t.setRequestHeader("X-CSRF-Token",i)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),i=e("meta[name=csrf-param]").attr("content");e('form input[name="'+i+'"]').val(t)},fire:function(t,i,n){var r=e.Event(i);return t.trigger(r,n),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var r,o,a,s,l,c,d,u;if(i.fire(n,"ajax:before")){if(s=n.data("cross-domain"),l=s===t?null:s,c=n.data("with-credentials")||null,d=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,n.is("form")){r=n.attr("method"),o=n.attr("action"),a=n.serializeArray();var h=n.data("ujs:submit-button");h&&(a.push(h),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(r=n.data("method"),o=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(r=n.data("method")||"get",o=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):(r=n.data("method"),o=i.href(n),a=n.data("params")||null);return u={type:r||"GET",data:a,dataType:d,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),i.fire(n,"ajax:beforeSend",[e,r])?void n.trigger("ajax:send",e):!1},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])},crossDomain:l},c&&(u.xhrFields={withCredentials:c}),o&&(u.url=o),i.ajax(u)}return!1},handleMethod:function(n){var r=i.href(n),o=n.data("method"),a=n.attr("target"),s=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+r+'"></form>'),d='<input name="_method" value="'+o+'" type="hidden" />';l!==t&&s!==t&&(d+='<input name="'+l+'" value="'+s+'" type="hidden" />'),a&&c.attr("target",a),c.hide().append(d).appendTo("body"),c.submit()},formElements:function(t,i){return t.is("form")?e(t[0].elements).filter(i):t.find(i)},disableFormElements:function(t){i.formElements(t,i.disableSelector).each(function(){i.disableFormElement(e(this))})},disableFormElement:function(e){var i,n;i=e.is("button")?"html":"val",n=e.data("disable-with"),e.data("ujs:enable-with",e[i]()),n!==t&&e[i](n),e.prop("disabled",!0)},enableFormElements:function(t){i.formElements(t,i.enableSelector).each(function(){i.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,n=e.data("confirm"),r=!1;return n?(i.fire(e,"confirm")&&(r=i.confirm(n),t=i.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,i,n){var r,o,a=e(),s=i||"input,textarea",l=t.find(s);return l.each(function(){if(r=e(this),o=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!o==!n){if(r.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;a=a.add(r)}}),a.length?a:!1},nonBlankInputs:function(e,t){return i.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var n=e.data("disable-with");e.data("ujs:enable-with",e.html()),n!==t&&e.html(n),e.bind("click.railsDisable",function(e){return i.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(e(this))}),n.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(e(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var r=e(this),o=r.data("method"),a=r.data("params"),s=n.metaKey||n.ctrlKey;if(!i.allowAction(r))return i.stopEverything(n);if(!s&&r.is(i.linkDisableSelector)&&i.disableElement(r),r.data("remote")!==t){if(s&&(!o||"GET"===o)&&!a)return!0;var l=i.handleRemote(r);return l===!1?i.enableElement(r):l.error(function(){i.enableElement(r)}),!1}return r.data("method")?(i.handleMethod(r),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var r=i.handleRemote(n);return r===!1?i.enableFormElement(n):r.error(function(){i.enableFormElement(n)}),!1}),n.delegate(i.inputChangeSelector,"change.rails",function(t){var n=e(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(t)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var r,o,a=e(this),s=a.data("remote")!==t;if(!i.allowAction(a))return i.stopEverything(n);if(a.attr("novalidate")==t&&(r=i.blankInputs(a,i.requiredInputSelector),r&&i.fire(a,"ajax:aborted:required",[r])))return i.stopEverything(n);if(s){if(o=i.nonBlankInputs(a,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(a)},13);var l=i.fire(a,"ajax:aborted:file",[o]);return l||setTimeout(function(){i.enableFormElements(a)},13),l}return i.handleRemote(a),!1}setTimeout(function(){i.disableFormElements(a)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);var r=n.attr("name"),o=r?{name:r,value:n.val()}:null;n.closest("form").data("ujs:submit-button",o)}),n.delegate(i.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&i.disableFormElements(e(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&i.enableFormElements(e(this))}),e(function(){i.refreshCSRFTokens()}))}(jQuery),window.Modernizr=function(e,t,i){function n(e){b.cssText=e}function r(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var n in e){var r=e[n];if(!o(r,"-")&&b[r]!==i)return"pfx"==t?r:!0}return!1}function s(e,t,n){for(var o in e){var a=t[e[o]];if(a!==i)return n===!1?e[o]:r(a,"function")?a.bind(n||t):a}return!1}function l(e,t,i){var n=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+w.join(n+" ")+n).split(" ");return r(t,"string")||r(t,"undefined")?a(o,t):(o=(e+" "+k.join(n+" ")+n).split(" "),s(o,t,i))}var c,d,u,h="2.6.2",p={},f=!0,m=t.documentElement,g="modernizr",v=t.createElement(g),b=v.style,y=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),x="Webkit Moz O ms",w=x.split(" "),k=x.toLowerCase().split(" "),C={},_=[],S=_.slice,T=function(e,i,n,r){var o,a,s,l,c=t.createElement("div"),d=t.body,u=d||t.createElement("body");if(parseInt(n,10))for(;n--;)s=t.createElement("div"),s.id=r?r[n]:g+(n+1),c.appendChild(s);return o=["&#173;",'<style id="s',g,'">',e,"</style>"].join(""),c.id=g,(d?c:u).innerHTML+=o,u.appendChild(c),d||(u.style.background="",u.style.overflow="hidden",l=m.style.overflow,m.style.overflow="hidden",m.appendChild(u)),a=i(c,e),d?c.parentNode.removeChild(c):(u.parentNode.removeChild(u),m.style.overflow=l),!!a},E={}.hasOwnProperty;u=r(E,"undefined")||r(E.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(e,t){return E.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var i=S.call(arguments,1),n=function(){if(this instanceof n){var r=function(){};r.prototype=t.prototype;var o=new r,a=t.apply(o,i.concat(S.call(arguments)));return Object(a)===a?a:o}return t.apply(e,i.concat(S.call(arguments)))};return n}),C.csstransforms=function(){return!!l("transform")},C.csstransforms3d=function(){var e=!!l("perspective");return e&&"webkitPerspective"in m.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},C.csstransitions=function(){return l("transition")};for(var $ in C)u(C,$)&&(d=$.toLowerCase(),p[d]=C[$](),_.push((p[d]?"":"no-")+d));return p.addTest=function(e,t){if("object"==typeof e)for(var n in e)u(e,n)&&p.addTest(n,e[n]);else{if(e=e.toLowerCase(),p[e]!==i)return p;t="function"==typeof t?t():t,"undefined"!=typeof f&&f&&(m.className+=" "+(t?"":"no-")+e),p[e]=t}return p},n(""),v=c=null,function(e,t){function i(e,t){var i=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;return i.innerHTML="x<style>"+t+"</style>",n.insertBefore(i.lastChild,n.firstChild)}function n(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function r(e){var t=g[e[f]];return t||(t={},m++,e[f]=m,g[m]=t),t}function o(e,i,n){if(i||(i=t),d)return i.createElement(e);n||(n=r(i));var o;return o=n.cache[e]?n.cache[e].cloneNode():p.test(e)?(n.cache[e]=n.createElem(e)).cloneNode():n.createElem(e),o.canHaveChildren&&!h.test(e)?n.frag.appendChild(o):o}function a(e,i){if(e||(e=t),d)return e.createDocumentFragment();i=i||r(e);for(var o=i.frag.cloneNode(),a=0,s=n(),l=s.length;l>a;a++)o.createElement(s[a]);return o}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(i){return v.shivMethods?o(i,e,t):t.createElem(i)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,t.frag)}function l(e){e||(e=t);var n=r(e);return v.shivCSS&&!c&&!n.hasCSS&&(n.hasCSS=!!i(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),d||s(e,n),e}var c,d,u=e.html5||{},h=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f="_html5shiv",m=0,g={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,d=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(i){c=!0,d=!0}}();var v={elements:u.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:u.shivCSS!==!1,supportsUnknownElements:d,shivMethods:u.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:a};e.html5=v,l(t)}(this,t),p._version=h,p._prefixes=y,p._domPrefixes=k,p._cssomPrefixes=w,p.testProp=function(e){return a([e])},p.testAllProps=l,p.testStyles=T,p.prefixed=function(e,t,i){return t?l(e,t,i):l(e,"pfx")},m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+_.join(" "):""),p}(this,this.document),function(e,t,i){function n(e){return"[object Function]"==g.call(e)}function r(e){return"string"==typeof e}function o(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=v.shift();b=1,e?e.t?f(function(){("c"==e.t?h.injectCss:h.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):b=0}function l(e,i,n,r,o,l,c){function d(t){if(!p&&a(u.readyState)&&(y.r=p=1,!b&&s(),u.onload=u.onreadystatechange=null,t)){"img"!=e&&f(function(){w.removeChild(u)},50);for(var n in T[i])T[i].hasOwnProperty(n)&&T[i][n].onload()}}var c=c||h.errorTimeout,u=t.createElement(e),p=0,g=0,y={t:n,s:i,e:o,a:l,x:c};1===T[i]&&(g=1,T[i]=[]),"object"==e?u.data=i:(u.src=i,u.type=e),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){d.call(this,g)},v.splice(r,0,y),"img"!=e&&(g||2===T[i]?(w.insertBefore(u,x?null:m),f(d,c)):T[i].push(u))}function c(e,t,i,n,o){return b=0,t=t||"j",r(e)?l("c"==t?C:k,e,t,this.i++,i,n,o):(v.splice(this.i++,0,e),1==v.length&&s()),this}function d(){var e=h;return e.loader={load:c,i:0},e}var u,h,p=t.documentElement,f=e.setTimeout,m=t.getElementsByTagName("script")[0],g={}.toString,v=[],b=0,y="MozAppearance"in p.style,x=y&&!!t.createRange().compareNode,w=x?p:m.parentNode,p=e.opera&&"[object Opera]"==g.call(e.opera),p=!!t.attachEvent&&!p,k=y?"object":p?"script":"img",C=p?"script":k,_=Array.isArray||function(e){return"[object Array]"==g.call(e)},S=[],T={},E={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};h=function(e){function t(e){var t,i,n,e=e.split("!"),r=S.length,o=e.pop(),a=e.length,o={url:o,origUrl:o,prefixes:e};for(i=0;a>i;i++)n=e[i].split("="),(t=E[n.shift()])&&(o=t(o,n));for(i=0;r>i;i++)o=S[i](o);return o}function a(e,r,o,a,s){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(r&&(r=n(r)?r:r[e]||r[a]||r[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,r,o,a,s):(T[l.url]?l.noexec=!0:T[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":i,l.noexec,l.attrs,l.timeout),(n(r)||n(c))&&o.load(function(){d(),r&&r(l.origUrl,s,a),c&&c(l.origUrl,s,a),T[l.url]=2})))}function s(e,t){function i(e,i){if(e){if(r(e))i||(u=function(){var e=[].slice.call(arguments);h.apply(this,e),p()}),a(e,u,t,0,c);else if(Object(e)===e)for(l in s=function(){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(),e)e.hasOwnProperty(l)&&(!i&&!--s&&(n(u)?u=function(){var e=[].slice.call(arguments);h.apply(this,e),p()}:u[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),p()}}(h[l])),a(e[l],u,t,l,c))}else!i&&p()}var s,l,c=!!e.test,d=e.load||e.both,u=e.callback||o,h=u,p=e.complete||o;i(c?e.yep:e.nope,!!d),d&&i(d)}var l,c,u=this.yepnope.loader;if(r(e))a(e,0,u,0);else if(_(e))for(l=0;l<e.length;l++)c=e[l],r(c)?a(c,0,u,0):_(c)?h(c):Object(c)===c&&s(c,u);else Object(e)===e&&s(e,u)},h.addPrefix=function(e,t){E[e]=t},h.addFilter=function(e){S.push(e)},h.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=d(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,i,n,r,l,c){var d,u,p=t.createElement("script"),r=r||h.errorTimeout;p.src=e;for(u in n)p.setAttribute(u,n[u]);i=c?s:i||o,p.onreadystatechange=p.onload=function(){!d&&a(p.readyState)&&(d=1,i(),p.onload=p.onreadystatechange=null)},f(function(){d||(d=1,i(1))},r),l?p.onload():m.parentNode.insertBefore(p,m)},e.yepnope.injectCss=function(e,i,n,r,a,l){var c,r=t.createElement("link"),i=l?s:i||o;r.href=e,r.rel="stylesheet",r.type="text/css";for(c in n)r.setAttribute(c,n[c]);a||(m.parentNode.insertBefore(r,m),f(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},/*
	Redactor v9.1.9
	Updated: Dec 12, 2013

	http://imperavi.com/redactor/

	Copyright (c) 2009-2013, Imperavi LLC.
	License: http://imperavi.com/redactor/license/

	Usage: $('#content').redactor();
*/
function(e){function t(e,i){return new t.prototype.init(e,i)}var n=0,r=function(e){return this[0]=e.startOffset,this[1]=e.endOffset,this.range=e,this};r.prototype.equals=function(){return this[0]===this[1]},e.fn.redactor=function(i){var n=[],r=Array.prototype.slice.call(arguments,1);return this.each("string"==typeof i?function(){var t=e.data(this,"redactor");if("undefined"==typeof t||!e.isFunction(t[i]))return e.error('No such method "'+i+'" for Redactor');var o=t[i].apply(t,r);void 0!==o&&o!==t&&n.push(o)}:function(){e.data(this,"redactor")||e.data(this,"redactor",t(this,i))}),0===n.length?this:1===n.length?n[0]:n},e.Redactor=t,e.Redactor.VERSION="9.1.9",e.Redactor.opts={rangy:!1,iframe:!1,fullpage:!1,css:!1,lang:"en",direction:"ltr",placeholder:!1,wym:!1,mobile:!0,cleanup:!0,tidyHtml:!0,pastePlainText:!1,removeEmptyTags:!0,templateVars:!1,xhtml:!1,visual:!0,focus:!1,tabindex:!1,autoresize:!0,minHeight:!1,maxHeight:!1,shortcuts:!0,autosave:!1,autosaveInterval:60,autosaveFormdata:!0,plugins:!1,linkAnchor:!0,linkEmail:!0,linkProtocol:"http://",linkNofollow:!1,linkSize:50,imageFloatMargin:"10px",imageGetJson:!1,imageUpload:!1,imageUploadParam:"file",fileUpload:!1,fileUploadParam:"file",clipboardUpload:!0,clipboardUploadUrl:!1,dragUpload:!0,dnbImageTypes:["image/png","image/jpeg","image/gif"],s3:!1,uploadFields:!1,observeImages:!0,observeLinks:!0,modalOverlay:!0,tabSpaces:!1,tabFocus:!0,air:!1,airButtons:["formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent"],toolbar:!0,toolbarFixed:!1,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarFixedBox:!1,toolbarExternal:!1,buttonSource:!0,buttonSeparator:'<li class="redactor_separator"></li>',buttonsCustom:{},buttonsAdd:[],buttons:["html","|","formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent","|","image","video","file","table","link","|","alignment","|","horizontalrule"],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","justify","table"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline",tr:"table",td:"table",table:"table"},activeButtonsAdd:!1,formattingTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],linebreaks:!1,paragraphy:!0,convertDivs:!0,convertLinks:!0,convertImageLinks:!1,convertVideoLinks:!1,formattingPre:!1,phpTags:!1,allowedTags:!1,deniedTags:["html","head","link","body","meta","script","style","applet"],boldTag:"strong",italicTag:"em",indentValue:20,buffer:[],rebuffer:[],textareamode:!1,emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",rBlockTest:/^(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)$/i,alignmentTags:["P","H1","H2","H3","H4","H5","H6","DD","DL","DT","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],ownLine:["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],contOwnLine:["li","dt","dt","h[1-6]","option","script"],newLevel:["blockquote","div","dl","fieldset","form","frameset","map","ol","p","pre","select","td","th","tr","ul"],blockLevelElements:["P","H1","H2","H3","H4","H5","H6","DD","DL","DT","DIV","LI","BLOCKQUOTE","OUTPUT","FIGCAPTION","PRE","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE","TD"],langs:{en:{html:"HTML",video:"Insert Video",image:"Insert Image",table:"Table",link:"Link",link_insert:"Insert link",link_edit:"Edit link",unlink:"Unlink",formatting:"Formatting",paragraph:"Normal text",quote:"Quote",code:"Code",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",bold:"Bold",italic:"Italic",fontcolor:"Font Color",backcolor:"Back Color",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",cancel:"Cancel",insert:"Insert",save:"Save",_delete:"Delete",insert_table:"Insert Table",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",delete_column:"Delete Column",delete_row:"Delete Row",delete_table:"Delete Table",rows:"Rows",columns:"Columns",add_head:"Add Head",delete_head:"Delete Head",title:"Title",image_position:"Position",none:"None",left:"Left",right:"Right",image_web_link:"Image Web Link",text:"Text",mailto:"Email",web:"URL",video_html_code:"Video Embed Code",file:"Insert File",upload:"Upload",download:"Download",choose:"Choose",or_choose:"Or choose",drop_file_here:"Drop file here",align_left:"Align text to the left",align_center:"Center text",align_right:"Align text to the right",align_justify:"Justify text",horizontalrule:"Insert Horizontal Rule",deleted:"Deleted",anchor:"Anchor",link_new_tab:"Open link in new tab",underline:"Underline",alignment:"Alignment",filename:"Name (optional)",edit:"Edit"}}},t.fn=e.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,TAB:9,CTRL:17,META:91,LEFT:37,LEFT_WIN:91},init:function(t,r){this.rtePaste=!1,this.$element=this.$source=e(t),this.uuid=n++;var o=e.extend(!0,{},e.Redactor.opts);if(this.opts=e.extend({},o,this.$element.data(),r),this.start=!0,this.dropdowns=[],this.sourceHeight=this.$source.css("height"),this.sourceWidth=this.$source.css("width"),this.opts.fullpage&&(this.opts.iframe=!0),this.opts.linebreaks&&(this.opts.paragraphy=!1),this.opts.paragraphy&&(this.opts.linebreaks=!1),this.opts.toolbarFixedBox&&(this.opts.toolbarFixed=!0),this.document=document,this.window=window,this.savedSel=!1,this.cleanlineBefore=new RegExp("^<(/?"+this.opts.ownLine.join("|/?")+"|"+this.opts.contOwnLine.join("|")+")[ >]"),this.cleanlineAfter=new RegExp("^<(br|/?"+this.opts.ownLine.join("|/?")+"|/"+this.opts.contOwnLine.join("|/")+")[ >]"),this.cleannewLevel=new RegExp("^</?("+this.opts.newLevel.join("|")+")[ >]"),this.rTestBlock=new RegExp("^("+this.opts.blockLevelElements.join("|")+")$","i"),this.opts.linebreaks===!1){if(this.opts.allowedTags!==!1){var a=["strong","em","del"],s=["b","i","strike"];"-1"===e.inArray("p",this.opts.allowedTags)&&this.opts.allowedTags.push("p");for(i in a)"-1"!=e.inArray(a[i],this.opts.allowedTags)&&this.opts.allowedTags.push(s[i])}if(this.opts.deniedTags!==!1){var l=e.inArray("p",this.opts.deniedTags);"-1"!==l&&this.opts.deniedTags.splice(l,l)}}(this.browser("msie")||this.browser("opera"))&&(this.opts.buttons=this.removeFromArrayByValue(this.opts.buttons,"horizontalrule")),this.opts.curLang=this.opts.langs[this.opts.lang],this.buildStart()},toolbarInit:function(e){return{html:{title:e.html,func:"toggle"},formatting:{title:e.formatting,func:"show",dropdown:{p:{title:e.paragraph,func:"formatBlocks"},blockquote:{title:e.quote,func:"formatQuote",className:"redactor_format_blockquote"},pre:{title:e.code,func:"formatBlocks",className:"redactor_format_pre"},h1:{title:e.header1,func:"formatBlocks",className:"redactor_format_h1"},h2:{title:e.header2,func:"formatBlocks",className:"redactor_format_h2"},h3:{title:e.header3,func:"formatBlocks",className:"redactor_format_h3"},h4:{title:e.header4,func:"formatBlocks",className:"redactor_format_h4"},h5:{title:e.header5,func:"formatBlocks",className:"redactor_format_h5"}}},bold:{title:e.bold,exec:"bold"},italic:{title:e.italic,exec:"italic"},deleted:{title:e.deleted,exec:"strikethrough"},underline:{title:e.underline,exec:"underline"},unorderedlist:{title:"&bull; "+e.unorderedlist,exec:"insertunorderedlist"},orderedlist:{title:"1. "+e.orderedlist,exec:"insertorderedlist"},outdent:{title:"< "+e.outdent,func:"indentingOutdent"},indent:{title:"> "+e.indent,func:"indentingIndent"},image:{title:e.image,func:"imageShow"},video:{title:e.video,func:"videoShow"},file:{title:e.file,func:"fileShow"},table:{title:e.table,func:"show",dropdown:{insert_table:{title:e.insert_table,func:"tableShow"},separator_drop1:{name:"separator"},insert_row_above:{title:e.insert_row_above,func:"tableAddRowAbove"},insert_row_below:{title:e.insert_row_below,func:"tableAddRowBelow"},insert_column_left:{title:e.insert_column_left,func:"tableAddColumnLeft"},insert_column_right:{title:e.insert_column_right,func:"tableAddColumnRight"},separator_drop2:{name:"separator"},add_head:{title:e.add_head,func:"tableAddHead"},delete_head:{title:e.delete_head,func:"tableDeleteHead"},separator_drop3:{name:"separator"},delete_column:{title:e.delete_column,func:"tableDeleteColumn"},delete_row:{title:e.delete_row,func:"tableDeleteRow"},delete_table:{title:e.delete_table,func:"tableDeleteTable"}}},link:{title:e.link,func:"show",dropdown:{link:{title:e.link_insert,func:"linkShow"},unlink:{title:e.unlink,exec:"unlink"}}},fontcolor:{title:e.fontcolor,func:"show"},backcolor:{title:e.backcolor,func:"show"},alignment:{title:e.alignment,func:"show",dropdown:{alignleft:{title:e.align_left,func:"alignmentLeft"},aligncenter:{title:e.align_center,func:"alignmentCenter"},alignright:{title:e.align_right,func:"alignmentRight"},justify:{title:e.align_justify,func:"alignmentJustify"}}},alignleft:{title:e.align_left,func:"alignmentLeft"},aligncenter:{title:e.align_center,func:"alignmentCenter"},alignright:{title:e.align_right,func:"alignmentRight"},justify:{title:e.align_justify,func:"alignmentJustify"},horizontalrule:{exec:"inserthorizontalrule",title:e.horizontalrule}}},callback:function(t,i,n){var r=this.opts[t+"Callback"];return e.isFunction(r)?i===!1?r.call(this,n):r.call(this,i,n):n},destroy:function(){clearInterval(this.autosaveInterval),e(window).off(".redactor"),this.$source.off("redactor-textarea"),this.$element.off(".redactor").removeData("redactor");var t=this.get();if(this.opts.textareamode)this.$box.after(this.$source),this.$box.remove(),this.$source.val(t).show();else{var i=this.$editor;this.opts.iframe&&(i=this.$element),this.$box.after(i),this.$box.remove(),i.removeClass("redactor_editor").removeClass("redactor_editor_wym").removeAttr("contenteditable").html(t).show()}this.opts.air&&e("#redactor_air_"+this.uuid).remove()},getObject:function(){return e.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getIframe:function(){return this.opts.iframe?this.$frame:!1},getToolbar:function(){return this.$toolbar?this.$toolbar:!1},get:function(){return this.$source.val()},getCodeIframe:function(){this.$editor.removeAttr("contenteditable").removeAttr("dir");var e=this.outerHtml(this.$frame.contents().children());return this.$editor.attr({contenteditable:!0,dir:this.opts.direction}),e},set:function(e,t,i){e=e.toString(),e=e.replace(/\$/g,"&#36;"),this.opts.fullpage?this.setCodeIframe(e):this.setEditor(e,t),""==e&&(i=!1),i!==!1&&this.placeholderRemove()},setEditor:function(e,t){t!==!1&&(e=this.cleanSavePreCode(e),e=this.cleanStripTags(e),e=this.cleanConvertProtected(e),e=this.cleanConvertInlineTags(e,!0),e=this.opts.linebreaks===!1?this.cleanConverters(e):e.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi,"$2<br>")),e=e.replace(/&amp;#36;/g,"$"),e=this.cleanEmpty(e),this.$editor.html(e),this.setNonEditable(),this.setSpansVerified(),this.sync()},setCodeIframe:function(e){var t=this.iframePage();this.$frame[0].src="about:blank",e=this.cleanConvertProtected(e),e=this.cleanConvertInlineTags(e),e=this.cleanRemoveSpaces(e),t.open(),t.write(e),t.close(),this.opts.fullpage&&(this.$editor=this.$frame.contents().find("body").attr({contenteditable:!0,dir:this.opts.direction})),this.setNonEditable(),this.setSpansVerified(),this.sync()},setFullpageOnInit:function(e){e=this.cleanSavePreCode(e,!0),e=this.cleanConverters(e),e=this.cleanEmpty(e),this.$editor.html(e),this.setNonEditable(),this.setSpansVerified(),this.sync()},setSpansVerified:function(){var t=this.$editor.find("span"),i="inline";e.each(t,function(){var t=this.outerHTML,n=new RegExp("<"+this.tagName,"gi"),r=t.replace(n,"<"+i);n=new RegExp("</"+this.tagName,"gi"),r=r.replace(n,"</"+i),e(this).replaceWith(r)})},setSpansVerifiedHtml:function(e){return e=e.replace(/<span(.*?)>/,"<inline$1>"),e.replace(/<\/span>/,"</inline>")},setNonEditable:function(){this.$editor.find(".noneditable").attr("contenteditable",!1)},sync:function(){var t="";if(this.cleanUnverified(),t=this.opts.fullpage?this.getCodeIframe():this.$editor.html(),t=this.syncClean(t),t=this.cleanRemoveEmptyTags(t),t=t.replace(/<\/li><(ul|ol)>([\w\W]*?)<\/(ul|ol)>/gi,"<$1>$2</$1></li>"),"<br>"===e.trim(t)&&(t=""),this.opts.xhtml){var i=["br","hr","img","link","input","meta"];e.each(i,function(e,i){t=t.replace(new RegExp("<"+i+"(.*?[^/$]?)>","gi"),"<"+i+"$1 />")})}t=this.callback("syncBefore",!1,t),this.$source.val(t),this.callback("syncAfter",!1,t),this.start===!1&&this.callback("change",!1,t)},syncClean:function(t){return this.opts.fullpage||(t=this.cleanStripTags(t)),t=e.trim(t),t=this.placeholderRemoveFromCode(t),t=t.replace(/&#x200b;/gi,""),t=t.replace(/&#8203;/gi,""),t=t.replace(/<\/a>&nbsp;/gi,"</a> "),this.opts.linkNofollow&&(t=t.replace(/<a(.*?)rel="nofollow"(.*?)>/gi,"<a$1$2>"),t=t.replace(/<a(.*?)>/gi,'<a$1 rel="nofollow">')),t=t.replace("<!--?php","<?php"),t=t.replace("?-->","?>"),t=t.replace(/<(.*?)class="noeditable"(.*?) contenteditable="false"(.*?)>/gi,'<$1class="noeditable"$2$3>'),t=t.replace(/ data-tagblock=""/gi,""),t=t.replace(/<br\s?\/?>\n?<\/(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)>/gi,"</$1>"),t=t.replace(/<span(.*?)id="redactor-image-box"(.*?)>([\w\W]*?)<img(.*?)><\/span>/i,"$3<img$4>"),t=t.replace(/<span(.*?)id="redactor-image-resizer"(.*?)>(.*?)<\/span>/i,""),t=t.replace(/<span(.*?)id="redactor-image-editter"(.*?)>(.*?)<\/span>/i,""),t=t.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi,"$2"),t=t.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi,"$2"),t=t.replace(/<inline>/gi,"<span>"),t=t.replace(/<inline /gi,"<span "),t=t.replace(/<\/inline>/gi,"</span>"),t=t.replace(/<span(.*?)class="redactor_placeholder"(.*?)>([\w\W]*?)<\/span>/gi,""),t=t.replace(/<span>([\w\W]*?)<\/span>/gi,"$1"),t=t.replace(/&amp;/gi,"&"),t=t.replace(/\u2122/gi,"&trade;"),t=t.replace(/\xa9/gi,"&copy;"),t=this.cleanReConvertProtected(t)},buildStart:function(){this.content="",this.$box=e('<div class="redactor_box" />'),"TEXTAREA"===this.$source[0].tagName&&(this.opts.textareamode=!0),this.opts.mobile===!1&&this.isMobile()?this.buildMobile():(this.buildContent(),this.opts.iframe?(this.opts.autoresize=!1,this.iframeStart()):this.opts.textareamode?this.buildFromTextarea():this.buildFromElement(),this.opts.iframe||(this.buildOptions(),this.buildAfter()))},buildMobile:function(){this.opts.textareamode||(this.$editor=this.$source,this.$editor.hide(),this.$source=this.buildCodearea(this.$editor),this.$source.val(this.content)),this.$box.insertAfter(this.$source).append(this.$source)},buildContent:function(){this.content=e.trim(this.opts.textareamode?this.$source.val():this.$source.html())},buildFromTextarea:function(){this.$editor=e("<div />"),this.$box.insertAfter(this.$source).append(this.$editor).append(this.$source),this.buildAddClasses(this.$editor),this.buildEnable()},buildFromElement:function(){this.$editor=this.$source,this.$source=this.buildCodearea(this.$editor),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$source),this.buildEnable()},buildCodearea:function(t){return e("<textarea />").attr("name",t.attr("id")).css("height",this.sourceHeight)},buildAddClasses:function(t){e.each(this.$source.get(0).className.split(/\s+/),function(e,i){t.addClass("redactor_"+i)})},buildEnable:function(){this.$editor.addClass("redactor_editor").attr({contenteditable:!0,dir:this.opts.direction}),this.$source.attr("dir",this.opts.direction).hide(),this.set(this.content,!0,!1)},buildOptions:function(){var e=this.$editor;this.opts.iframe&&(e=this.$frame),this.opts.tabindex&&e.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&e.css("min-height",this.opts.minHeight+"px"),this.opts.maxHeight&&(this.opts.autoresize=!1,this.sourceHeight=this.opts.maxHeight),this.opts.wym&&this.$editor.addClass("redactor_editor_wym"),this.opts.autoresize||e.css("height",this.sourceHeight)},buildAfter:function(){if(this.start=!1,this.opts.toolbar&&(this.opts.toolbar=this.toolbarInit(this.opts.curLang),this.toolbarBuild()),this.modalTemplatesInit(),this.buildPlugins(),this.buildBindKeyboard(),this.opts.autosave&&this.autosave(),setTimeout(e.proxy(this.observeStart,this),4),this.browser("mozilla"))try{this.document.execCommand("enableObjectResizing",!1,!1),this.document.execCommand("enableInlineTableEditing",!1,!1)}catch(t){}this.opts.focus&&setTimeout(e.proxy(this.focus,this),100),this.opts.visual||setTimeout(e.proxy(function(){this.opts.visual=!0,this.toggle(!1)},this),200),this.callback("init")},buildBindKeyboard:function(){this.dblEnter=0,this.opts.dragUpload&&this.opts.imageUpload!==!1&&this.$editor.on("drop.redactor",e.proxy(this.buildEventDrop,this)),this.$editor.on("paste.redactor",e.proxy(this.buildEventPaste,this)),this.$editor.on("keydown.redactor",e.proxy(this.buildEventKeydown,this)),this.$editor.on("keyup.redactor",e.proxy(this.buildEventKeyup,this)),e.isFunction(this.opts.textareaKeydownCallback)&&this.$source.on("keydown.redactor-textarea",e.proxy(this.opts.textareaKeydownCallback,this)),e.isFunction(this.opts.focusCallback)&&this.$editor.on("focus.redactor",e.proxy(this.opts.focusCallback,this));var t;e(document).mousedown(function(i){t=e(i.target)}),this.$editor.on("blur.redactor",e.proxy(function(i){e(t).hasClass("redactor_toolbar")||0!=e(t).parents(".redactor_toolbar").size()||(this.selectall=!1,e.isFunction(this.opts.blurCallback)&&this.callback("blur",i))},this))},buildEventDrop:function(t){if(t=t.originalEvent||t,void 0===window.FormData||!t.dataTransfer)return!0;var i=t.dataTransfer.files.length;if(0==i)return!0;t.preventDefault();var n=t.dataTransfer.files[0];if(this.opts.dnbImageTypes!==!1&&-1==this.opts.dnbImageTypes.indexOf(n.type))return!0;this.bufferSet();var r=e('<div id="redactor-progress-drag" class="redactor-progress redactor-progress-striped"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div>');e(document.body).append(r),this.opts.s3===!1?this.dragUploadAjax(this.opts.imageUpload,n,!0,r,t,this.opts.imageUploadParam):this.s3uploadFile(n)},buildEventPaste:function(t){var i=!1;if(this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")){var n=this.browser("version").split(".");n[0]<536&&(i=!0)}if(i)return!0;if(this.browser("opera"))return!0;if(this.opts.clipboardUpload&&this.buildEventClipboardUpload(t))return!0;if(this.opts.cleanup){this.rtePaste=!0,this.selectionSave(),this.selectall||(this.opts.autoresize===!0&&this.fullscreen!==!0?(this.$editor.height(this.$editor.height()),this.saveScroll=this.document.body.scrollTop):this.saveScroll=this.$editor.scrollTop());var r=this.extractContent();setTimeout(e.proxy(function(){var e=this.extractContent();this.$editor.append(r),this.selectionRestore();var t=this.getFragmentHtml(e);this.pasteClean(t),this.opts.autoresize===!0&&this.fullscreen!==!0&&this.$editor.css("height","auto")},this),1)}},buildEventClipboardUpload:function(t){var i=t.originalEvent||t;if(this.clipboardFilePaste=!1,"undefined"==typeof i.clipboardData)return!1;if(i.clipboardData.items){var n=i.clipboardData.items[0].getAsFile();if(null!==n){this.bufferSet(),this.clipboardFilePaste=!0;var r=new FileReader;return r.onload=e.proxy(this.pasteClipboardUpload,this),r.readAsDataURL(n),!0}}return!1},buildEventKeydown:function(t){if(this.rtePaste)return!1;var i=t.which,n=t.ctrlKey||t.metaKey,r=this.getParent(),o=this.getCurrent(),a=this.getBlock(),s=!1;if(this.callback("keydown",t),this.imageResizeHide(!1),(r&&"PRE"===e(r).get(0).tagName||o&&"PRE"===e(o).get(0).tagName)&&(s=!0,i===this.keyCode.DOWN&&this.insertAfterLastElement(a)),i===this.keyCode.DOWN&&(r&&"BLOCKQUOTE"===e(r)[0].tagName&&this.insertAfterLastElement(r),o&&"BLOCKQUOTE"===e(o)[0].tagName&&this.insertAfterLastElement(o),r&&"P"===e(r)[0].tagName&&"BLOCKQUOTE"==e(r).parent()[0].tagName&&this.insertAfterLastElement(r,e(r).parent()[0]),o&&"P"===e(o)[0].tagName&&r&&"BLOCKQUOTE"==e(r)[0].tagName&&this.insertAfterLastElement(o,r)),n&&!t.shiftKey&&this.shortcuts(t,i),n&&90===i&&!t.shiftKey&&!t.altKey)return t.preventDefault(),void(this.opts.buffer.length?this.bufferUndo():this.document.execCommand("undo",!1,!1));if(n&&90===i&&t.shiftKey&&!t.altKey)return t.preventDefault(),void(0!=this.opts.rebuffer.length?this.bufferRedo():this.document.execCommand("redo",!1,!1));if(n&&65===i?this.selectall=!0:i==this.keyCode.LEFT_WIN||n||(this.selectall=!1),i!=this.keyCode.ENTER||t.shiftKey||t.ctrlKey||t.metaKey)i===this.keyCode.ENTER&&(t.ctrlKey||t.shiftKey)&&(this.bufferSet(),t.preventDefault(),this.insertLineBreak());else{if(this.browser("msie")&&1==r.nodeType&&("TD"==r.tagName||"TH"==r.tagName))return t.preventDefault(),this.bufferSet(),this.insertNode(document.createElement("br")),this.callback("enter",t),!1;if(a&&("BLOCKQUOTE"==a.tagName||"BLOCKQUOTE"==e(a).parent()[0].tagName))if(this.isEndOfElement()){if(1==this.dblEnter){var l,c;if("BLOCKQUOTE"==a.tagName?(c="br",l=a):(c="p",l=e(a).parent()[0]),t.preventDefault(),this.insertingAfterLastElement(l),this.dblEnter=0,"p"==c)e(a).parent().find("p").last().remove();else{var d=e.trim(e(a).html());e(a).html(d.replace(/<br\s?\/?>$/i,""))}return}this.dblEnter++}else this.dblEnter++;if(s===!0)return this.buildEventKeydownPre(t,o);if(!this.opts.linebreaks)if(a&&this.opts.rBlockTest.test(a.tagName))this.bufferSet(),setTimeout(e.proxy(function(){var t=this.getBlock();if("DIV"===t.tagName&&!e(t).hasClass("redactor_editor")){var i=e("<p>"+this.opts.invisibleSpace+"</p>");e(t).replaceWith(i),this.selectionStart(i)}},this),1);else if(a===!1){this.bufferSet();var u=e("<p>"+this.opts.invisibleSpace+"</p>");return this.insertNode(u[0]),this.selectionStart(u),this.callback("enter",t),!1}if(this.opts.linebreaks){if(!a||!this.opts.rBlockTest.test(a.tagName))return this.buildEventKeydownInsertLineBreak(t);this.bufferSet(),setTimeout(e.proxy(function(){var t=this.getBlock();"DIV"!==t.tagName&&"P"!==t.tagName||e(t).hasClass("redactor_editor")||this.replaceLineBreak(t)},this),1)}if("BLOCKQUOTE"==a.tagName||"FIGCAPTION"==a.tagName)return this.buildEventKeydownInsertLineBreak(t);this.callback("enter",t)}return i===this.keyCode.TAB&&this.opts.shortcuts?this.buildEventKeydownTab(t,s):void(i===this.keyCode.BACKSPACE&&this.buildEventKeydownBackspace(o))},buildEventKeydownPre:function(t,i){t.preventDefault(),this.bufferSet();var n=e(i).parent().text();return this.insertNode(document.createTextNode("\n")),-1==n.search(/\s$/)&&this.insertNode(document.createTextNode("\n")),this.sync(),this.callback("enter",t),!1},buildEventKeydownTab:function(e,t){return this.opts.tabFocus?this.isEmpty(this.get())&&this.opts.tabSpaces===!1?!0:(e.preventDefault(),t!==!0||e.shiftKey?this.opts.tabSpaces!==!1?(this.bufferSet(),this.insertNode(document.createTextNode(Array(this.opts.tabSpaces+1).join("\xa0"))),this.sync(),!1):(e.shiftKey?this.indentingOutdent():this.indentingIndent(),!1):(this.bufferSet(),this.insertNode(document.createTextNode("	")),this.sync(),!1)):!0},buildEventKeydownBackspace:function(t){if("undefined"!=typeof t.tagName&&/^(H[1-6])$/i.test(t.tagName)){var i;i=e(this.opts.linebreaks===!1?"<p>"+this.opts.invisibleSpace+"</p>":"<br>"+this.opts.invisibleSpace),e(t).replaceWith(i),this.selectionStart(i)}"undefined"!=typeof t.nodeValue&&null!==t.nodeValue&&t.remove&&3===t.nodeType&&null==t.nodeValue.match(/[^/\u200B]/g)&&t.remove()},buildEventKeydownInsertLineBreak:function(e){this.bufferSet(),e.preventDefault(),this.insertLineBreak(),this.callback("enter",e)},buildEventKeyup:function(t){if(this.rtePaste)return!1;var i=t.which,n=this.getParent(),r=this.getCurrent();if(!this.opts.linebreaks&&3==r.nodeType&&(0==n||"BODY"==n.tagName)){var o=e("<p>").append(e(r).clone());e(r).replaceWith(o);var a=e(o).next();"undefined"!=typeof a[0]&&"BR"==a[0].tagName&&a.remove(),this.selectionEnd(o)}return(this.opts.convertLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&i===this.keyCode.ENTER&&this.buildEventKeyupConverters(),i===this.keyCode.DELETE||i===this.keyCode.BACKSPACE?this.formatEmpty(t):(this.callback("keyup",t),void this.sync())},buildEventKeyupConverters:function(){this.formatLinkify(this.opts.linkProtocol,this.opts.convertLinks,this.opts.convertImageLinks,this.opts.convertVideoLinks,this.opts.linkSize),setTimeout(e.proxy(function(){this.opts.convertImageLinks&&this.observeImages(),this.opts.observeLinks&&this.observeLinks()},this),5)},buildPlugins:function(){this.opts.plugins&&e.each(this.opts.plugins,e.proxy(function(t,i){RedactorPlugins[i]&&(e.extend(this,RedactorPlugins[i]),e.isFunction(RedactorPlugins[i].init)&&this.init())},this))},iframeStart:function(){this.iframeCreate(),this.opts.textareamode?this.iframeAppend(this.$source):(this.$sourceOld=this.$source.hide(),this.$source=this.buildCodearea(this.$sourceOld),this.iframeAppend(this.$sourceOld))},iframeAppend:function(e){this.$source.attr("dir",this.opts.direction).hide(),this.$box.insertAfter(e).append(this.$frame).append(this.$source)},iframeCreate:function(){this.$frame=e('<iframe style="width: 100%;" frameborder="0" />').one("load",e.proxy(function(){if(this.opts.fullpage){this.iframePage(),""===this.content&&(this.content=this.opts.invisibleSpace),this.$frame.contents()[0].write(this.content),this.$frame.contents()[0].close();var t=setInterval(e.proxy(function(){this.$frame.contents().find("body").html()&&(clearInterval(t),this.iframeLoad())},this),0)}else this.iframeLoad()},this))},iframeDoc:function(){return this.$frame[0].contentWindow.document},iframePage:function(){var e=this.iframeDoc();return e.documentElement&&e.removeChild(e.documentElement),e},iframeAddCss:function(t){t=t||this.opts.css,this.isString(t)&&this.$frame.contents().find("head").append('<link rel="stylesheet" href="'+t+'" />'),e.isArray(t)&&e.each(t,e.proxy(function(e,t){this.iframeAddCss(t)},this))},iframeLoad:function(){this.$editor=this.$frame.contents().find("body").attr({contenteditable:!0,dir:this.opts.direction}),this.$editor[0]&&(this.document=this.$editor[0].ownerDocument,this.window=this.document.defaultView||window),this.iframeAddCss(),this.opts.fullpage?this.setFullpageOnInit(this.$editor.html()):this.set(this.content,!0,!1),this.buildOptions(),this.buildAfter()},placeholderStart:function(t){return this.isEmpty(t)&&(this.$element.attr("placeholder")&&(this.opts.placeholder=this.$element.attr("placeholder")),""===this.opts.placeholder&&(this.opts.placeholder=!1),this.opts.placeholder!==!1)?(this.opts.focus=!1,this.$editor.one("focus.redactor_placeholder",e.proxy(this.placeholderFocus,this)),e('<span class="redactor_placeholder" data-redactor="verified">').attr("contenteditable",!1).text(this.opts.placeholder)):!1},placeholderFocus:function(){this.$editor.find("span.redactor_placeholder").remove();var e="";this.opts.linebreaks===!1&&(e=this.opts.emptyHtml),this.$editor.off("focus.redactor_placeholder"),this.$editor.html(e),this.opts.linebreaks===!1?this.selectionStart(this.$editor.children()[0]):this.focus(),this.sync()},placeholderRemove:function(){this.opts.placeholder=!1,this.$editor.find("span.redactor_placeholder").remove(),this.$editor.off("focus.redactor_placeholder")},placeholderRemoveFromCode:function(e){return e.replace(/<span class="redactor_placeholder"(.*?)>(.*?)<\/span>/i,"")},shortcuts:function(e,t){this.opts.shortcuts&&(e.altKey?48===t?this.shortcutsLoadFormat(e,"p"):49===t?this.shortcutsLoadFormat(e,"h1"):50===t?this.shortcutsLoadFormat(e,"h2"):51===t?this.shortcutsLoadFormat(e,"h3"):52===t?this.shortcutsLoadFormat(e,"h4"):53===t?this.shortcutsLoadFormat(e,"h5"):54===t&&this.shortcutsLoadFormat(e,"h6"):77===t?this.shortcutsLoad(e,"removeFormat"):66===t?this.shortcutsLoad(e,"bold"):73===t?this.shortcutsLoad(e,"italic"):74===t?this.shortcutsLoad(e,"insertunorderedlist"):75===t?this.shortcutsLoad(e,"insertorderedlist"):72===t?this.shortcutsLoad(e,"superscript"):76===t&&this.shortcutsLoad(e,"subscript"))},shortcutsLoad:function(e,t){e.preventDefault(),this.execCommand(t,!1)},shortcutsLoadFormat:function(e,t){e.preventDefault(),this.formatBlocks(t)},focus:function(){this.browser("opera")?this.$editor.focus():this.window.setTimeout(e.proxy(this.focusSet,this,!0),1)},focusEnd:function(){this.focusSet()},focusSet:function(e){this.$editor.focus();var t=this.getRange();t.selectNodeContents(this.$editor[0]),t.collapse(e||!1);var i=this.getSelection();i.removeAllRanges(),i.addRange(t)},toggle:function(e){this.opts.visual?this.toggleCode(e):this.toggleVisual()},toggleVisual:function(){var e=this.$source.hide().val();"undefined"!=typeof this.modified&&(this.modified=this.cleanRemoveSpaces(this.modified,!1)!==this.cleanRemoveSpaces(e,!1)),this.modified&&(this.opts.fullpage&&""===e?this.setFullpageOnInit(e):(this.set(e),this.opts.fullpage&&this.buildBindKeyboard())),this.opts.iframe?this.$frame.show():this.$editor.show(),this.opts.fullpage&&this.$editor.attr("contenteditable",!0),this.$source.off("keydown.redactor-textarea-indenting"),this.$editor.focus(),this.selectionRestore(),this.observeStart(),this.buttonActiveVisual(),this.buttonInactive("html"),this.opts.visual=!0},toggleCode:function(e){e!==!1&&this.selectionSave();var t=null;this.opts.iframe?(t=this.$frame.height(),this.opts.fullpage&&this.$editor.removeAttr("contenteditable"),this.$frame.hide()):(t=this.$editor.innerHeight(),this.$editor.hide());var i=this.$source.val();""!==i&&this.opts.tidyHtml&&this.$source.val(this.cleanHtml(i)),this.modified=i,this.$source.height(t).show().focus(),this.$source.on("keydown.redactor-textarea-indenting",this.textareaIndenting),this.buttonInactiveVisual(),this.buttonActive("html"),this.opts.visual=!1},textareaIndenting:function(t){if(9===t.keyCode){var i=e(this),n=i.get(0).selectionStart;return i.val(i.val().substring(0,n)+"	"+i.val().substring(i.get(0).selectionEnd)),i.get(0).selectionStart=i.get(0).selectionEnd=n+1,!1}},autosave:function(){var t=!1,i=this.get(),n="";n=1==this.opts.autosaveFormdata?this.$source.closest("form").serialize():this.$source.attr("name")+"="+escape(encodeURIComponent(i)),this.autosaveInterval=setInterval(e.proxy(function(){t!==i&&e.ajax({url:this.opts.autosave,type:"post",data:n,success:e.proxy(function(e){this.callback("autosave",!1,e),t=i},this)})},this),1e3*this.opts.autosaveInterval)},toolbarBuild:function(){if(this.opts.air)this.opts.buttons=this.opts.airButtons;else if(!this.opts.buttonSource){var t=this.opts.buttons.indexOf("html"),i=this.opts.buttons[t+1];this.opts.buttons.splice(t,1),"|"===i&&this.opts.buttons.splice(t,1)}if(e.extend(this.opts.toolbar,this.opts.buttonsCustom),e.each(this.opts.buttonsAdd,e.proxy(function(e,t){this.opts.buttons.push(t)},this)),this.opts.toolbar&&e.each(this.opts.toolbar.formatting.dropdown,e.proxy(function(t){"-1"==e.inArray(t,this.opts.formattingTags)&&delete this.opts.toolbar.formatting.dropdown[t]},this)),0===this.opts.buttons.length)return!1;if(this.airEnable(),this.$toolbar=e("<ul>").addClass("redactor_toolbar").attr("id","redactor_toolbar_"+this.uuid),this.opts.air?(this.$air=e('<div class="redactor_air">').attr("id","redactor_air_"+this.uuid).hide(),this.$air.append(this.$toolbar),e("body").append(this.$air)):this.opts.toolbarExternal?e(this.opts.toolbarExternal).html(this.$toolbar):this.$box.prepend(this.$toolbar),e.each(this.opts.buttons,e.proxy(function(t,i){if("|"===i)this.$toolbar.append(e(this.opts.buttonSeparator));else if(this.opts.toolbar[i]){var n=this.opts.toolbar[i];if(this.opts.fileUpload===!1&&"file"===i)return!0;this.$toolbar.append(e("<li>").append(this.buttonBuild(i,n)))}},this)),this.$toolbar.find("a").attr("tabindex","-1"),this.opts.toolbarFixed&&(this.toolbarObserveScroll(),e(this.opts.toolbarFixedTarget).on("scroll.redactor",e.proxy(this.toolbarObserveScroll,this))),this.opts.activeButtons){var n=e.proxy(this.buttonActiveObserver,this);this.$editor.on("mouseup.redactor keyup.redactor",n)}},toolbarObserveScroll:function(){var t=e(this.opts.toolbarFixedTarget).scrollTop(),i=this.$box.offset().top,n=0,r=i+this.$box.height()+40;if(t>i){var o="100%";this.opts.toolbarFixedBox&&(n=this.$box.offset().left,o=this.$box.innerWidth(),this.$toolbar.addClass("toolbar_fixed_box")),this.toolbarFixed=!0,this.$toolbar.css({position:"fixed",width:o,zIndex:1005,top:this.opts.toolbarFixedTopOffset+"px",left:n}),r>t?this.$toolbar.css("visibility","visible"):this.$toolbar.css("visibility","hidden")}else this.toolbarFixed=!1,this.$toolbar.css({position:"relative",width:"auto",top:0,left:n}),this.opts.toolbarFixedBox&&this.$toolbar.removeClass("toolbar_fixed_box")},airEnable:function(){this.opts.air&&this.$editor.on("mouseup.redactor keyup.redactor",this,e.proxy(function(t){var i=this.getSelectionText();if("mouseup"===t.type&&""!=i&&this.airShow(t),"keyup"===t.type&&t.shiftKey&&""!=i){var n=e(this.getElement(this.getSelection().focusNode)),r=n.offset();
r.height=n.height(),this.airShow(r,!0)}},this))},airShow:function(t,i){if(this.opts.air){var n,r;if(e(".redactor_air").hide(),i)n=t.left,r=t.top+t.height+14,this.opts.iframe&&(r+=this.$box.position().top-e(this.document).scrollTop(),n+=this.$box.position().left);else{var o=this.$air.innerWidth();n=t.clientX,e(this.document).width()<n+o&&(n-=o),r=t.clientY+14,this.opts.iframe?(r+=this.$box.position().top,n+=this.$box.position().left):r+=e(this.document).scrollTop()}this.$air.css({left:n+"px",top:r+"px"}).show(),this.airBindHide()}},airBindHide:function(){if(this.opts.air){var t=e.proxy(function(t){e(t).on("mousedown.redactor",e.proxy(function(i){0===e(i.target).closest(this.$toolbar).length&&(this.$air.fadeOut(100),this.selectionRemove(),e(t).off(i))},this)).on("keydown.redactor",e.proxy(function(i){i.which===this.keyCode.ESC&&this.getSelection().collapseToStart(),this.$air.fadeOut(100),e(t).off(i)},this))},this);t(document),this.opts.iframe&&t(this.document)}},airBindMousemoveHide:function(){if(this.opts.air){var t=e.proxy(function(t){e(t).on("mousemove.redactor",e.proxy(function(i){0===e(i.target).closest(this.$toolbar).length&&(this.$air.fadeOut(100),e(t).off(i))},this))},this);t(document),this.opts.iframe&&t(this.document)}},dropdownBuild:function(t,i){e.each(i,e.proxy(function(i,n){n.className||(n.className="");var r;"separator"===n.name?r=e('<a class="redactor_separator_drop">'):(r=e('<a href="#" class="'+n.className+" redactor_dropdown_"+i+'">'+n.title+"</a>"),r.on("click",e.proxy(function(e){e.preventDefault&&e.preventDefault(),this.browser("msie")&&(e.returnValue=!1),n.callback&&n.callback.call(this,i,r,n,e),n.exec&&this.execCommand(n.exec,i),n.func&&this[n.func](i),this.buttonActiveObserver(),this.opts.air&&this.$air.fadeOut(100)},this))),t.append(r)},this))},dropdownShow:function(t,i){if(!this.opts.visual)return t.preventDefault(),!1;var n=this.$toolbar.find(".redactor_dropdown_box_"+i),r=this.buttonGet(i);if(r.hasClass("dropact"))this.dropdownHideAll();else{this.dropdownHideAll(),this.buttonActive(i),r.addClass("dropact");var o=r.position();this.toolbarFixed&&(o=r.offset());var a=n.width();o.left+a>e(document).width()&&(o.left-=a);var s=o.left+"px",l=29,c="absolute",d=l+"px";this.opts.toolbarFixed&&this.toolbarFixed?c="fixed":this.opts.air||(d=o.top+l+"px"),n.css({position:c,left:s,top:d}).show()}var u=e.proxy(function(e){this.dropdownHide(e,n)},this);e(document).one("click",u),this.$editor.one("click",u),t.stopPropagation(),this.$editor.focus()},dropdownHideAll:function(){this.$toolbar.find("a.dropact").removeClass("redactor_act").removeClass("dropact"),e(".redactor_dropdown").hide()},dropdownHide:function(t,i){e(t.target).hasClass("dropact")||(i.removeClass("dropact"),this.dropdownHideAll())},buttonBuild:function(t,i){var n=e('<a href="javascript:;" title="'+i.title+'" tabindex="-1" class="redactor_btn redactor_btn_'+t+'"></a>');if(n.on("click",e.proxy(function(e){return e.preventDefault&&e.preventDefault(),this.browser("msie")&&(e.returnValue=!1),n.hasClass("redactor_button_disabled")?!1:(this.isFocused()!==!1||i.exec||this.$editor.focus(),i.exec?(this.$editor.focus(),this.execCommand(i.exec,t),this.airBindMousemoveHide()):i.func&&"show"!==i.func?(this[i.func](t),this.airBindMousemoveHide()):i.callback?(i.callback.call(this,t,n,i,e),this.airBindMousemoveHide()):i.dropdown&&this.dropdownShow(e,t),void this.buttonActiveObserver(!1,t))},this)),i.dropdown){var r=e('<div class="redactor_dropdown redactor_dropdown_box_'+t+'" style="display: none;">');r.appendTo(this.$toolbar),this.dropdownBuild(r,i.dropdown)}return n},buttonGet:function(t){return this.opts.toolbar?e(this.$toolbar.find("a.redactor_btn_"+t)):!1},buttonActiveToggle:function(e){var t=this.buttonGet(e);t.hasClass("redactor_act")?t.removeClass("redactor_act"):t.addClass("redactor_act")},buttonActive:function(e){this.buttonGet(e).addClass("redactor_act")},buttonInactive:function(e){this.buttonGet(e).removeClass("redactor_act")},buttonInactiveAll:function(t){e.each(this.opts.toolbar,e.proxy(function(e){e!=t&&this.buttonInactive(e)},this))},buttonActiveVisual:function(){this.$toolbar.find("a.redactor_btn").not("a.redactor_btn_html").removeClass("redactor_button_disabled")},buttonInactiveVisual:function(){this.$toolbar.find("a.redactor_btn").not("a.redactor_btn_html").addClass("redactor_button_disabled")},buttonChangeIcon:function(e,t){this.buttonGet(e).addClass("redactor_btn_"+t)},buttonRemoveIcon:function(e,t){this.buttonGet(e).removeClass("redactor_btn_"+t)},buttonAddSeparator:function(){this.$toolbar.append(e(this.opts.buttonSeparator))},buttonAddSeparatorAfter:function(t){this.buttonGet(t).parent().after(e(this.opts.buttonSeparator))},buttonAddSeparatorBefore:function(t){this.buttonGet(t).parent().before(e(this.opts.buttonSeparator))},buttonRemoveSeparatorAfter:function(e){this.buttonGet(e).parent().next().remove()},buttonRemoveSeparatorBefore:function(e){this.buttonGet(e).parent().prev().remove()},buttonSetRight:function(e){this.opts.toolbar&&this.buttonGet(e).parent().addClass("redactor_btn_right")},buttonSetLeft:function(e){this.opts.toolbar&&this.buttonGet(e).parent().removeClass("redactor_btn_right")},buttonAdd:function(t,i,n,r){if(this.opts.toolbar){var o=this.buttonBuild(t,{title:i,callback:n,dropdown:r});this.$toolbar.append(e("<li>").append(o))}},buttonAddFirst:function(t,i,n,r){if(this.opts.toolbar){var o=this.buttonBuild(t,{title:i,callback:n,dropdown:r});this.$toolbar.prepend(e("<li>").append(o))}},buttonAddAfter:function(t,i,n,r,o){if(this.opts.toolbar){var a=this.buttonBuild(i,{title:n,callback:r,dropdown:o}),s=this.buttonGet(t);0!==s.size()?s.parent().after(e("<li>").append(a)):this.$toolbar.append(e("<li>").append(a))}},buttonAddBefore:function(t,i,n,r,o){if(this.opts.toolbar){var a=this.buttonBuild(i,{title:n,callback:r,dropdown:o}),s=this.buttonGet(t);0!==s.size()?s.parent().before(e("<li>").append(a)):this.$toolbar.append(e("<li>").append(a))}},buttonRemove:function(e,t){var i=this.buttonGet(e);t&&i.parent().next().remove(),i.parent().removeClass("redactor_btn_right"),i.remove()},buttonActiveObserver:function(t,i){var n=this.getParent();if(this.buttonInactiveAll(i),t===!1&&"html"!==i)return void(-1!=e.inArray(i,this.opts.activeButtons)&&this.buttonActiveToggle(i));this.$toolbar.find("a.redactor_dropdown_link").text(n&&"A"===n.tagName?this.opts.curLang.link_edit:this.opts.curLang.link_insert),this.opts.activeButtonsAdd&&(e.each(this.opts.activeButtonsAdd,e.proxy(function(e,t){this.opts.activeButtons.push(t)},this)),e.extend(this.opts.activeButtonsStates,this.opts.activeButtonsAdd)),e.each(this.opts.activeButtonsStates,e.proxy(function(t,i){0!=e(n).closest(t,this.$editor.get()[0]).length&&this.buttonActive(i)},this));var r=e(n).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);if(r.length){var o=r.css("text-align");switch(o){case"right":this.buttonActive("alignright");break;case"center":this.buttonActive("aligncenter");break;case"justify":this.buttonActive("justify");break;default:this.buttonActive("alignleft")}}},execPasteFrag:function(e){var t=this.getSelection();if(t.getRangeAt&&t.rangeCount){range=t.getRangeAt(0),range.deleteContents();var i=document.createElement("div");i.innerHTML=e;for(var n,r,o=document.createDocumentFragment();n=i.firstChild;)r=o.appendChild(n);{o.firstChild}range.insertNode(o),r&&(range=range.cloneRange(),range.setStartAfter(r),range.collapse(!0),t.removeAllRanges(),t.addRange(range))}},exec:function(e,t,i){"formatblock"===e&&this.browser("msie")&&(t="<"+t+">"),"inserthtml"===e&&this.browser("msie")?this.isIe11()?this.execPasteFrag(t):(this.$editor.focus(),this.document.selection.createRange().pasteHTML(t)):this.document.execCommand(e,!1,t),i!==!1&&this.sync(),this.callback("execCommand",e,t)},execCommand:function(e,t,i){return this.opts.visual?"inserthtml"===e?(this.insertHtml(t,i),void this.callback("execCommand",e,t)):this.currentOrParentIs("PRE")&&!this.opts.formattingPre?!1:"insertunorderedlist"===e||"insertorderedlist"===e?this.execLists(e,t):"unlink"===e?this.execUnlink(e,t):(this.exec(e,t,i),void("inserthorizontalrule"===e&&this.$editor.find("hr").removeAttr("id"))):(this.$source.focus(),!1)},execUnlink:function(t,i){this.bufferSet();var n=this.currentOrParentIs("A");return n?(e(n).replaceWith(e(n).text()),this.sync(),void this.callback("execCommand",t,i)):void 0},execLists:function(t,i){this.bufferSet();var n=this.getParent(),r=e(n).closest("ol, ul"),o=!1;if(r.length){o=!0;var a=r[0].tagName;("insertunorderedlist"===t&&"OL"===a||"insertorderedlist"===t&&"UL"===a)&&(o=!1)}if(this.selectionSave(),o){var s=this.getNodes(),l=this.getBlocks(s);"undefined"!=typeof s[0]&&s.length>1&&3==s[0].nodeType&&l.unshift(this.getBlock());var c="",d="";e.each(l,e.proxy(function(t,i){if("LI"==i.tagName){var n=e(i),r=n.clone();r.find("ul","ol").remove(),c+=this.opts.linebreaks===!1?this.outerHtml(e("<p>").append(r.contents())):r.html()+"<br>",0==t?(n.addClass("redactor-replaced").empty(),d=this.outerHtml(n)):n.remove()}},this)),html=this.$editor.html().replace(d,"</"+a+">"+c+"<"+a+">"),this.$editor.html(html),this.$editor.find(a+":empty").remove()}else{var u=this.getParent();this.document.execCommand(t);var n=this.getParent(),r=e(n).closest("ol, ul");if(u&&"TD"==u.tagName&&r.wrapAll("<td>"),r.length){var h=r.children().first();if(""==e.trim(e(h).text())){var p=e('<span id="selection-marker-1"></span>');e(h).prepend(p)}(this.browser("msie")||this.browser("mozilla"))&&"LI"!==n.tagName&&e(n).replaceWith(e(n).html());var f=r.parent();this.isParentRedactor(f)&&this.nodeTestBlocks(f[0])&&f.replaceWith(f.contents())}this.browser("mozilla")&&this.$editor.focus()}this.selectionRestore(),e(p).remove(),this.sync(),this.callback("execCommand",t,i)},indentingIndent:function(){this.indentingStart("indent")},indentingOutdent:function(){this.indentingStart("outdent")},indentingStart:function(t){if(this.bufferSet(),"indent"===t){var i=this.getBlock();if(this.selectionSave(),i&&"LI"==i.tagName){var n=this.getParent(),r=e(n).closest("ol, ul"),o=r[0].tagName,a=this.getBlocks();e.each(a,function(t,i){if("LI"==i.tagName){var n=e(i).prev();if(0!=n.size()&&"LI"==n[0].tagName){var r=n.children("ul, ol");0==r.size()?n.append(e("<"+o+">").append(i)):r.append(i)}}})}else if(i===!1&&this.opts.linebreaks===!0){this.exec("formatBlock","blockquote");var s=this.getBlock(),i=e('<div data-tagblock="">').html(e(s).html());e(s).replaceWith(i);var l=this.normalize(e(i).css("margin-left"))+this.opts.indentValue;e(i).css("margin-left",l+"px")}else{var c=this.getBlocks();e.each(c,e.proxy(function(t,i){var n=!1;if("TD"!==i.tagName){n=-1!==e.inArray(i.tagName,this.opts.alignmentTags)?e(i):e(i).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);var r=this.normalize(n.css("margin-left"))+this.opts.indentValue;n.css("margin-left",r+"px")}},this))}this.selectionRestore()}else{this.selectionSave();var i=this.getBlock();if(i&&"LI"==i.tagName){var a=this.getBlocks(),d=0;this.insideOutdent(i,d,a)}else{var c=this.getBlocks();e.each(c,e.proxy(function(t,i){var n=!1;n=-1!==e.inArray(i.tagName,this.opts.alignmentTags)?e(i):e(i).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);var r=this.normalize(n.css("margin-left"))-this.opts.indentValue;0>=r?this.opts.linebreaks===!0&&"undefined"!=typeof n.data("tagblock")?n.replaceWith(n.html()):(n.css("margin-left",""),this.removeEmptyAttr(n,"style")):n.css("margin-left",r+"px")},this))}this.selectionRestore()}this.sync()},insideOutdent:function(t,i,n){if(t&&"LI"==t.tagName){var r=e(t).parent().parent();0!=r.size()&&"LI"==r[0].tagName?r.after(t):"undefined"!=typeof n[i]?(t=n[i],i++,this.insideOutdent(t,i,n)):this.execCommand("insertunorderedlist")}},alignmentLeft:function(){this.alignmentSet("","JustifyLeft")},alignmentRight:function(){this.alignmentSet("right","JustifyRight")},alignmentCenter:function(){this.alignmentSet("center","JustifyCenter")},alignmentJustify:function(){this.alignmentSet("justify","JustifyFull")},alignmentSet:function(t,i){if(this.bufferSet(),this.oldIE())return this.document.execCommand(i,!1,!1),!0;this.selectionSave();var n=this.getBlock();if(!n&&this.opts.linebreaks){this.exec("formatBlock","blockquote");var r=this.getBlock(),n=e('<div data-tagblock="">').html(e(r).html());e(r).replaceWith(n),e(n).css("text-align",t),this.removeEmptyAttr(n,"style"),""==t&&"undefined"!=typeof e(n).data("tagblock")&&e(n).replaceWith(e(n).html())}else{var o=this.getBlocks();e.each(o,e.proxy(function(i,n){var r=!1;r=-1!==e.inArray(n.tagName,this.opts.alignmentTags)?e(n):e(n).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]),r&&(r.css("text-align",t),this.removeEmptyAttr(r,"style"))},this))}this.selectionRestore(),this.sync()},cleanEmpty:function(e){var t=this.placeholderStart(e);return t!==!1?t:(this.opts.linebreaks===!1&&(""===e?e=this.opts.emptyHtml:-1!==e.search(/^<hr\s?\/?>$/gi)&&(e="<hr>"+this.opts.emptyHtml)),e)},cleanConverters:function(e){return this.opts.convertDivs&&(e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>")),this.opts.paragraphy&&(e=this.cleanParagraphy(e)),e},cleanConvertProtected:function(e){return this.opts.templateVars&&(e=e.replace(/\{\{(.*?)\}\}/gi,"<!-- template double $1 -->"),e=e.replace(/\{(.*?)\}/gi,"<!-- template $1 -->")),e=e.replace(/<script(.*?)>([\w\W]*?)<\/script>/gi,'<title type="text/javascript" style="display: none;" class="redactor-script-tag"$1>$2</title>'),e=e.replace(/<style(.*?)>([\w\W]*?)<\/style>/gi,'<section$1 style="display: none;" rel="redactor-style-tag">$2</section>'),e=e.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>'),e=this.opts.phpTags?e.replace(/<\?php([\w\W]*?)\?>/gi,'<section style="display: none;" rel="redactor-php-tag">$1</section>'):e.replace(/<\?php([\w\W]*?)\?>/gi,"")},cleanReConvertProtected:function(e){return this.opts.templateVars&&(e=e.replace(/<!-- template double (.*?) -->/gi,"{{$1}}"),e=e.replace(/<!-- template (.*?) -->/gi,"{$1}")),e=e.replace(/<title type="text\/javascript" style="display: none;" class="redactor-script-tag"(.*?)>([\w\W]*?)<\/title>/gi,'<script$1 type="text/javascript">$2</script>'),e=e.replace(/<section(.*?) style="display: none;" rel="redactor-style-tag">([\w\W]*?)<\/section>/gi,"<style$1>$2</style>"),e=e.replace(/<section(.*?)rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>"),this.opts.phpTags&&(e=e.replace(/<section style="display: none;" rel="redactor-php-tag">([\w\W]*?)<\/section>/gi,"<?php\r\n$1\r\n?>")),e},cleanRemoveSpaces:function(t,i){if(i!==!1){var i=[],n=t.match(/<(pre|style|script|title)(.*?)>([\w\W]*?)<\/(pre|style|script|title)>/gi);if(null===n&&(n=[]),this.opts.phpTags){var r=t.match(/<\?php([\w\W]*?)\?>/gi);r&&(n=e.merge(n,r))}n&&e.each(n,function(e,n){t=t.replace(n,"buffer_"+e),i.push(n)})}return t=t.replace(/\n/g," "),t=t.replace(/[\t]*/g,""),t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/^[\s\n]*/g," "),t=t.replace(/[\s\n]*$/g," "),t=t.replace(/>\s{2,}</g,"> <"),t=this.cleanReplacer(t,i),t=t.replace(/\n\n/g,"\n")},cleanReplacer:function(t,i){return i===!1?t:(e.each(i,function(e,i){t=t.replace("buffer_"+e,i)}),t)},cleanRemoveEmptyTags:function(e){e=e.replace(/<span>([\w\W]*?)<\/span>/gi,"$1"),e=e.replace(/[\u200B-\u200D\uFEFF]/g,"");var t=["<b>\\s*</b>","<b>&nbsp;</b>","<em>\\s*</em>"],i=["<pre></pre>","<blockquote>\\s*</blockquote>","<dd></dd>","<dt></dt>","<ul></ul>","<ol></ol>","<li></li>","<table></table>","<tr></tr>","<span>\\s*<span>","<span>&nbsp;<span>","<p>\\s*</p>","<p></p>","<p>&nbsp;</p>","<p>\\s*<br>\\s*</p>","<div>\\s*</div>","<div>\\s*<br>\\s*</div>"];i=this.opts.removeEmptyTags?i.concat(t):t;for(var n=i.length,r=0;n>r;++r)e=e.replace(new RegExp(i[r],"gi"),"");return e},cleanParagraphy:function(t){function i(e,i,n){return t.replace(new RegExp(e,i),n)}if(t=e.trim(t),this.opts.linebreaks===!0)return t;if(""===t||"<p></p>"===t)return this.opts.emptyHtml;t+="\n";var n=[],r=t.match(/<(table|div|pre|object)(.*?)>([\w\W]*?)<\/(table|div|pre|object)>/gi);r||(r=[]);var o=t.match(/<!--([\w\W]*?)-->/gi);if(o&&(r=e.merge(r,o)),this.opts.phpTags){var a=t.match(/<section(.*?)rel="redactor-php-tag">([\w\W]*?)<\/section>/gi);a&&(r=e.merge(r,a))}r&&e.each(r,function(e,i){n[e]=i,t=t.replace(i,"{replace"+e+"}\n")}),t=t.replace(/<br \/>\s*<br \/>/gi,"\n\n");var s="(comment|html|body|head|title|meta|style|script|link|iframe|table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)";t=i("(<"+s+"[^>]*>)","gi","\n$1"),t=i("(</"+s+">)","gi","$1\n\n"),t=i("\r\n","g","\n"),t=i("\r","g","\n"),t=i("/\n\n+/","g","\n\n");var l=t.split(new RegExp("\ns*\n","g"),-1);t="";for(var c in l)l.hasOwnProperty(c)&&(-1==l[c].search("{replace")?(l[c]=l[c].replace(/<p>\n\t<\/p>/gi,""),l[c]=l[c].replace(/<p><\/p>/gi,""),""!=l[c]&&(t+="<p>"+l[c].replace(/^\n+|\n+$/g,"")+"</p>")):t+=l[c]);return t=i("<p>s*</p>","gi",""),t=i("<p>([^<]+)</(div|address|form)>","gi","<p>$1</p></$2>"),t=i("<p>s*(</?"+s+"[^>]*>)s*</p>","gi","$1"),t=i("<p>(<li.+?)</p>","gi","$1"),t=i("<p>s*(</?"+s+"[^>]*>)","gi","$1"),t=i("(</?"+s+"[^>]*>)s*</p>","gi","$1"),t=i("(</?"+s+"[^>]*>)s*<br />","gi","$1"),t=i("<br />(s*</?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)","gi","$1"),t=i("\n</p>","gi","</p>"),t=i("<li><p>","gi","<li>"),t=i("</p></li>","gi","</li>"),t=i("</li><p>","gi","</li>"),t=i("<p>	?\n?<p>","gi","<p>"),t=i("</dt><p>","gi","</dt>"),t=i("</dd><p>","gi","</dd>"),t=i("<br></p></blockquote>","gi","</blockquote>"),t=i("<p>	*</p>","gi",""),e.each(n,function(e,i){t=t.replace("{replace"+e+"}",i)}),e.trim(t)},cleanConvertInlineTags:function(e,t){var i="strong";"b"===this.opts.boldTag&&(i="b");var n="em";return"i"===this.opts.italicTag&&(n="i"),e=e.replace(/<span style="font-style: italic;">([\w\W]*?)<\/span>/gi,"<"+n+">$1</"+n+">"),e=e.replace(/<span style="font-weight: bold;">([\w\W]*?)<\/span>/gi,"<"+i+">$1</"+i+">"),e="strong"===this.opts.boldTag?e.replace(/<b>([\w\W]*?)<\/b>/gi,"<strong>$1</strong>"):e.replace(/<strong>([\w\W]*?)<\/strong>/gi,"<b>$1</b>"),e="em"===this.opts.italicTag?e.replace(/<i>([\w\W]*?)<\/i>/gi,"<em>$1</em>"):e.replace(/<em>([\w\W]*?)<\/em>/gi,"<i>$1</i>"),e=t!==!0?e.replace(/<strike>([\w\W]*?)<\/strike>/gi,"<del>$1</del>"):e.replace(/<del>([\w\W]*?)<\/del>/gi,"<strike>$1</strike>")},cleanStripTags:function(t){if(""==t||"undefined"==typeof t)return t;var i=!1;this.opts.allowedTags!==!1&&(i=!0);var n=i===!0?this.opts.allowedTags:this.opts.deniedTags,r=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return t=t.replace(r,function(t,r){return i===!0?e.inArray(r.toLowerCase(),n)>"-1"?t:"":e.inArray(r.toLowerCase(),n)>"-1"?"":t}),t=this.cleanConvertInlineTags(t)},cleanSavePreCode:function(t,i){var n=t.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/gi);return null!==n&&e.each(n,e.proxy(function(e,n){var r=n.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/i);r[3]=r[3].replace(/&nbsp;/g," "),i!==!1&&(r[3]=this.cleanEncodeEntities(r[3])),r[3]=r[3].replace(/\$/g,"&#36;"),t=t.replace(n,"<"+r[1]+r[2]+">"+r[3]+"</"+r[1]+">")},this)),t},cleanEncodeEntities:function(e){return e=String(e).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},cleanUnverified:function(){var t=this.$editor.find("li, img, a, b, strong, sub, sup, i, em, u, small, strike, del, span, cite");t.filter('[style*="background-color: transparent;"][style*="line-height"]').css("background-color","").css("line-height",""),t.filter('[style*="background-color: transparent;"]').css("background-color",""),t.css("line-height",""),e.each(t,e.proxy(function(e,t){this.removeEmptyAttr(t,"style")},this)),this.$editor.find('div[style="text-align: -webkit-auto;"]').contents().unwrap()},cleanHtml:function(e){var t=0,i=e.length,n=0,r=null,o=null,a="",s="",l="";for(this.cleanlevel=0;i>t;t++){if(n=t,-1==e.substr(t).indexOf("<"))return s+=e.substr(t),this.cleanFinish(s);for(;i>n&&"<"!=e.charAt(n);)n++;for(t!=n&&(l=e.substr(t,n-t),l.match(/^\s{2,}$/g)||("\n"==s.charAt(s.length-1)?s+=this.cleanGetTabs():"\n"==l.charAt(0)&&(s+="\n"+this.cleanGetTabs(),l=l.replace(/^\s+/,"")),s+=l),l.match(/\n/)&&(s+="\n"+this.cleanGetTabs())),r=n;i>n&&">"!=e.charAt(n);)n++;a=e.substr(r,n-r),t=n;var c;if("!--"==a.substr(1,3)){if(!a.match(/--$/)){for(;"-->"!=e.substr(n,3);)n++;n+=2,a=e.substr(r,n-r),t=n}"\n"!=s.charAt(s.length-1)&&(s+="\n"),s+=this.cleanGetTabs(),s+=a+">\n"}else"!"==a[1]?s=this.placeTag(a+">",s):"?"==a[1]?s+=a+">\n":(c=a.match(/^<(script|style|pre)/i))?(c[1]=c[1].toLowerCase(),a=this.cleanTag(a),s=this.placeTag(a,s),o=String(e.substr(t+1)).toLowerCase().indexOf("</"+c[1]),o&&(l=e.substr(t+1,o),t+=o,s+=l)):(a=this.cleanTag(a),s=this.placeTag(a,s))}return this.cleanFinish(s)},cleanGetTabs:function(){for(var e="",t=0;t<this.cleanlevel;t++)e+="	";return e},cleanFinish:function(e){return e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/^[\s\n]*/,""),e=e.replace(/[\s\n]*$/,""),e=e.replace(/<script(.*?)>\n<\/script>/gi,"<script$1></script>"),this.cleanlevel=0,e},cleanTag:function(e){var t="";e=e.replace(/\n/g," "),e=e.replace(/\s{2,}/g," "),e=e.replace(/^\s+|\s+$/g," ");var i="";e.match(/\/$/)&&(i="/",e=e.replace(/\/+$/,""));for(var n;n=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(e);)n[2]?t+=n[1].toLowerCase()+"="+n[2]:n[1]&&(t+=n[1].toLowerCase()),t+=" ",e=e.substr(n[0].length);return t.replace(/\s*$/,"")+i+">"},placeTag:function(e,t){var i=e.match(this.cleannewLevel);return(e.match(this.cleanlineBefore)||i)&&(t=t.replace(/\s*$/,""),t+="\n"),i&&"/"==e.charAt(1)&&this.cleanlevel--,"\n"==t.charAt(t.length-1)&&(t+=this.cleanGetTabs()),i&&"/"!=e.charAt(1)&&this.cleanlevel++,t+=e,(e.match(this.cleanlineAfter)||e.match(this.cleannewLevel))&&(t=t.replace(/ *$/,""),t+="\n"),t},formatEmpty:function(t){var i=e.trim(this.$editor.html());if(this.opts.linebreaks)""==i&&(t.preventDefault(),this.$editor.html(""),this.focus());else{i=i.replace(/<br\s?\/?>/i,"");var n=i.replace(/<p>\s?<\/p>/gi,"");if(""===i||""===n){t.preventDefault();var r=e(this.opts.emptyHtml).get(0);this.$editor.html(r),this.focus()}}this.sync()},formatBlocks:function(t){this.bufferSet();var i=this.getBlocks();this.selectionSave(),e.each(i,e.proxy(function(i,n){if("LI"!==n.tagName){var r=e(n).parent();if("p"===t){if("P"===n.tagName&&0!=r.size()&&"BLOCKQUOTE"===r[0].tagName||"BLOCKQUOTE"===n.tagName)return void this.formatQuote();if(this.opts.linebreaks)return;this.formatBlock(t,n)}else this.formatBlock(t,n)}},this)),this.selectionRestore(),this.sync()},formatBlock:function(t,i){if(i===!1&&(i=this.getBlock()),i===!1)return this.opts.linebreaks===!0&&this.execCommand("formatblock",t),!0;var n="";if("pre"!==t?n=e(i).contents():(n=e(i).html(),""===e.trim(n)&&(n='<span id="selection-marker-1"></span>')),"PRE"===i.tagName&&(t="p"),this.opts.linebreaks===!0&&"p"===t)e(i).replaceWith(e("<div>").append(n).html()+"<br>");else{var r=this.getParent(),o=e("<"+t+">").append(n);e(i).replaceWith(o),r&&"TD"==r.tagName&&e(o).wrapAll("<td>")}},formatChangeTag:function(t,i,n){n!==!1&&this.selectionSave();var r=e("<"+i+"/>");return e(t).replaceWith(function(){return r.append(e(this).contents())}),n!==!1&&this.selectionRestore(),r},formatQuote:function(){if(this.bufferSet(),this.opts.linebreaks===!1){this.selectionSave();var t=this.getBlocks(),i=!1,n=t.length;if(t){var r="",o="",a=!1,s=!0;if(e.each(t,function(e,t){"P"!==t.tagName&&(s=!1)}),e.each(t,e.proxy(function(l,c){if("BLOCKQUOTE"===c.tagName)this.formatBlock("p",c,!1);else if("P"===c.tagName)if(i=e(c).parent(),"BLOCKQUOTE"==i[0].tagName){var d=e(i).children("p").size();1==d?e(i).replaceWith(c):d==n?(a="blockquote",r+=this.outerHtml(c)):(a="html",r+=this.outerHtml(c),0==l?(e(c).addClass("redactor-replaced").empty(),o=this.outerHtml(c)):e(c).remove())}else s===!1||1==t.length?this.formatBlock("blockquote",c,!1):(a="paragraphs",r+=this.outerHtml(c));else"LI"!==c.tagName&&this.formatBlock("blockquote",c,!1)},this)),a)if("paragraphs"==a)e(t[0]).replaceWith("<blockquote>"+r+"</blockquote>"),e(t).remove();else if("blockquote"==a)e(i).replaceWith(r);else if("html"==a){var l=this.$editor.html().replace(o,"</blockquote>"+r+"<blockquote>");this.$editor.html(l),this.$editor.find("blockquote").each(function(){""==e.trim(e(this).html())&&e(this).remove()})}}this.selectionRestore()}else{var c=this.getBlock();if("BLOCKQUOTE"===c.tagName){this.selectionSave();var l=e.trim(e(c).html()),d=e.trim(this.getSelectionHtml());if(l=l.replace(/<span(.*?)id="selection-marker(.*?)<\/span>/gi,""),l==d)e(c).replaceWith(e(c).html()+"<br>");else{this.inlineFormat("tmp");var u=this.$editor.find("tmp");u.empty();var h=this.$editor.html().replace("<tmp></tmp>",'</blockquote><span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"+d+"<blockquote>");this.$editor.html(h),u.remove(),this.$editor.find("blockquote").each(function(){""==e.trim(e(this).html())&&e(this).remove()})}this.selectionRestore(),this.$editor.find("span#selection-marker-1").attr("id",!1)}else{var p=this.selectionWrap("blockquote"),l=e(p).html(),f=["ul","ol","table","tr","tbody","thead","tfoot","dl"];e.each(f,function(e,t){l=l.replace(new RegExp("<"+t+"(.*?)>","gi"),""),l=l.replace(new RegExp("</"+t+">","gi"),"")});var m=this.opts.blockLevelElements;m.push("td"),e.each(m,function(e,t){l=l.replace(new RegExp("<"+t+"(.*?)>","gi"),""),l=l.replace(new RegExp("</"+t+">","gi"),"<br>")}),e(p).html(l),this.selectionElement(p);var g=e(p).next();0!=g.size()&&"BR"===g[0].tagName&&g.remove()}}this.sync()},blockRemoveAttr:function(t){var i=this.getBlocks();e(i).removeAttr(t),this.sync()},blockSetAttr:function(t,i){var n=this.getBlocks();e(n).attr(t,i),this.sync()},blockRemoveStyle:function(t){var i=this.getBlocks();e(i).css(t,""),this.removeEmptyAttr(i,"style"),this.sync()},blockSetStyle:function(t,i){var n=this.getBlocks();e(n).css(t,i),this.sync()},blockRemoveClass:function(t){var i=this.getBlocks();e(i).removeClass(t),this.removeEmptyAttr(i,"class"),this.sync()},blockSetClass:function(t){var i=this.getBlocks();e(i).addClass(t),this.sync()},inlineRemoveClass:function(t){this.selectionSave(),this.inlineEachNodes(function(i){e(i).removeClass(t),this.removeEmptyAttr(i,"class")}),this.selectionRestore(),this.sync()},inlineSetClass:function(t){var i=this.getCurrent();e(i).hasClass(t)||this.inlineMethods("addClass",t)},inlineRemoveStyle:function(t){this.selectionSave(),this.inlineEachNodes(function(i){e(i).css(t,""),this.removeEmptyAttr(i,"style")}),this.selectionRestore(),this.sync()},inlineSetStyle:function(e,t){this.inlineMethods("css",e,t)},inlineRemoveAttr:function(t){this.selectionSave();var i=this.getRange(),n=this.getElement(),r=this.getNodes();(i.collapsed||i.startContainer===i.endContainer&&n)&&(r=e(n)),e(r).removeAttr(t),this.inlineUnwrapSpan(),this.selectionRestore(),this.sync()},inlineSetAttr:function(e,t){this.inlineMethods("attr",e,t)},inlineMethods:function(t,i,n){this.bufferSet(),this.selectionSave();var r=this.getRange(),o=this.getElement();if(!r.collapsed&&r.startContainer!==r.endContainer||!o||this.nodeTestBlocks(o)){this.document.execCommand("fontSize",!1,4);var a=this.$editor.find("font");e.each(a,e.proxy(function(e,r){this.inlineSetMethods(t,r,i,n)},this))}else e(o)[t](i,n);this.selectionRestore(),this.sync()},inlineSetMethods:function(t,i,n,r){var o,a=e(i).parent(),s=this.getSelectionText(),l=e(a).text(),c=s==l;return c&&a&&"INLINE"===a[0].tagName&&0!=a[0].attributes.length?(o=a,e(i).replaceWith(e(i).html())):(o=e("<inline>").append(e(i).contents()),e(i).replaceWith(o)),e(o)[t](n,r),o},inlineEachNodes:function(t){var i,n=this.getRange(),r=this.getElement(),o=this.getNodes();(n.collapsed||n.startContainer===n.endContainer&&r)&&(o=e(r),i=!0),e.each(o,e.proxy(function(n,r){if(!i&&"INLINE"!==r.tagName){var o=this.getSelectionText(),a=e(r).parent().text(),s=o==a;if(!s||"INLINE"!==r.parentNode.tagName||e(r.parentNode).hasClass("redactor_editor"))return;r=r.parentNode}t.call(this,r)},this))},inlineUnwrapSpan:function(){var t=this.$editor.find("inline");e.each(t,e.proxy(function(t,i){var n=e(i);void 0===n.attr("class")&&void 0===n.attr("style")&&n.contents().unwrap()},this))},inlineFormat:function(t){this.selectionSave(),this.document.execCommand("fontSize",!1,4);var i,n=this.$editor.find("font");e.each(n,function(n,r){var o=e("<"+t+"/>").append(e(r).contents());e(r).replaceWith(o),i=o}),this.selectionRestore(),this.sync()},inlineRemoveFormat:function(t){this.selectionSave();var i=t.toUpperCase(),n=this.getNodes(),r=e(this.getParent()).parent();e.each(n,function(e,t){t.tagName===i&&this.inlineRemoveFormatReplace(t)}),r&&r[0].tagName===i&&this.inlineRemoveFormatReplace(r),this.selectionRestore(),this.sync()},inlineRemoveFormatReplace:function(t){e(t).replaceWith(e(t).contents())},insertHtml:function(t,i){var n=this.getCurrent(),r=n.parentNode;this.$editor.focus(),this.bufferSet();var o=e("<div>").append(t);t=o.html(),t=this.cleanRemoveEmptyTags(t),o=e("<div>").append(t);var a=this.getBlock();if(1==o.contents().length){var s=o.contents()[0].tagName;("P"!=s&&s==a.tagName||"PRE"==s)&&(t=o.text(),o=e("<div>").append(t))}!this.opts.linebreaks&&1==o.contents().length&&3==o.contents()[0].nodeType&&(this.getRangeSelectedNodes().length>2||!n||"BODY"==n.tagName&&!r||"HTML"==r.tagName)&&(t="<p>"+t+"</p>"),t=this.setSpansVerifiedHtml(t),o.contents().length>1&&a||o.contents().is("p, :header, ul, ol, li, div, table, td, blockquote, pre, address, section, header, footer, aside, article")?this.browser("msie")?this.isIe11()?this.execPasteFrag(t):this.document.selection.createRange().pasteHTML(t):this.document.execCommand("inserthtml",!1,t):this.insertHtmlAdvanced(t,!1),this.selectall&&this.window.setTimeout(e.proxy(function(){this.opts.linebreaks?this.focusEnd():this.selectionEnd(this.$editor.contents().last())},this),1),this.observeStart(),this.setNonEditable(),i!==!1&&this.sync()},insertHtmlAdvanced:function(e,t){e=this.setSpansVerifiedHtml(e);var i=this.getSelection();if(i.getRangeAt&&i.rangeCount){var n=i.getRangeAt(0);n.deleteContents();var r=this.document.createElement("div");r.innerHTML=e;for(var o,a,s=this.document.createDocumentFragment();o=r.firstChild;)a=s.appendChild(o);n.insertNode(s),a&&(n=n.cloneRange(),n.setStartAfter(a),n.collapse(!0),i.removeAllRanges(),i.addRange(n))}t!==!1&&this.sync()},insertBeforeCursor:function(t){t=this.setSpansVerifiedHtml(t);var i=e(t),n=document.createElement("span");n.innerHTML="\u200b";var r=this.getRange();r.insertNode(n),r.insertNode(i[0]),r.collapse(!1);var o=this.getSelection();o.removeAllRanges(),o.addRange(r),this.sync()},insertText:function(t){var i=e(t);i.length&&(t=i.text()),this.$editor.focus(),this.browser("msie")&&!this.isIe11()?this.document.selection.createRange().pasteHTML(t):this.document.execCommand("inserthtml",!1,t),this.sync()},insertNode:function(t){if(t=t[0]||t,"SPAN"==t.tagName){var i="inline",n=t.outerHTML,r=new RegExp("<"+t.tagName,"i"),o=n.replace(r,"<"+i);r=new RegExp("</"+t.tagName,"i"),o=o.replace(r,"</"+i),t=e(o)[0]}var a=this.getSelection();a.getRangeAt&&a.rangeCount&&(range=a.getRangeAt(0),range.deleteContents(),range.insertNode(t),range.setEndAfter(t),range.setStartAfter(t),a.removeAllRanges(),a.addRange(range))},insertNodeToCaretPositionFromPoint:function(e,t){var i,n=e.clientX,r=e.clientY;if(this.document.caretPositionFromPoint){var o=this.document.caretPositionFromPoint(n,r);i=this.getRange(),i.setStart(o.offsetNode,o.offset),i.collapse(!0),i.insertNode(t)}else if(this.document.caretRangeFromPoint)i=this.document.caretRangeFromPoint(n,r),i.insertNode(t);else if("undefined"!=typeof document.body.createTextRange){i=this.document.body.createTextRange(),i.moveToPoint(n,r);var a=i.duplicate();a.moveToPoint(n,r),i.setEndPoint("EndToEnd",a),i.select()}},insertAfterLastElement:function(t,i){if("undefined"!=typeof i&&(t=i),this.isEndOfElement()){if(this.opts.linebreaks){var n=e("<div>").append(e.trim(this.$editor.html())).contents();if(this.outerHtml(n.last()[0])!=this.outerHtml(t))return!1}else if(this.$editor.contents().last()[0]!==t)return!1;this.insertingAfterLastElement(t)}},insertingAfterLastElement:function(t){if(this.bufferSet(),this.opts.linebreaks===!1){var i=e(this.opts.emptyHtml);e(t).after(i),this.selectionStart(i)}else{var i=e('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>",this.document)[0];e(t).after(i),e(i).after(this.opts.invisibleSpace),this.selectionRestore(),this.$editor.find("span#selection-marker-1").removeAttr("id")}},insertLineBreak:function(){this.selectionSave(),this.$editor.find("#selection-marker-1").before("<br>"+(this.browser("webkit")?this.opts.invisibleSpace:"")),this.selectionRestore()
},insertDoubleLineBreak:function(){this.selectionSave(),this.$editor.find("#selection-marker-1").before("<br><br>"+(this.browser("webkit")?this.opts.invisibleSpace:"")),this.selectionRestore()},replaceLineBreak:function(t){var i=e("<br>"+this.opts.invisibleSpace);e(t).replaceWith(i),this.selectionStart(i)},pasteClean:function(t){if(t=this.callback("pasteBefore",!1,t),this.browser("msie")){var i=e.trim(t);0==i.search(/^<a(.*?)>(.*?)<\/a>$/i)&&(t=t.replace(/^<a(.*?)>(.*?)<\/a>$/i,"$2"))}if(this.opts.pastePlainText){var i=this.document.createElement("div");return t=t.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi,"\n"),i.innerHTML=t,t=i.textContent||i.innerText,t=e.trim(t),t=t.replace("\n","<br>"),t=this.cleanParagraphy(t),this.pasteInsert(t),!1}if(this.currentOrParentIs("PRE"))return t=this.pastePre(t),this.pasteInsert(t),!0;if(t=t.replace(/<p(.*?)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi,"<ul><li$2</li>"),t=t.replace(/<p(.*?)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi,"<li$2</li>"),t=t.replace(/<p(.*?)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi,"<li$2</li></ul>"),t=t.replace(/<p(.*?)class="MsoListParagraph"([\w\W]*?)<\/p>/gi,"<ul><li$2</li></ul>"),t=t.replace(/\xb7/g,""),t=t.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,""),t=t.replace(/(&nbsp;){2,}/gi,"&nbsp;"),t=t.replace(/&nbsp;/gi," "),t=t.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),t=t.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),t=this.cleanStripTags(t),t=t.replace(/<td><\/td>/gi,"[td]"),t=t.replace(/<td>&nbsp;<\/td>/gi,"[td]"),t=t.replace(/<td><br><\/td>/gi,"[td]"),t=t.replace(/<td(.*?)colspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi,'[td colspan="$2"]$4[/td]'),t=t.replace(/<td(.*?)rowspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi,'[td rowspan="$2"]$4[/td]'),t=t.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),t=t.replace(/<iframe(.*?)>([\w\W]*?)<\/iframe>/gi,"[iframe$1]$2[/iframe]"),t=t.replace(/<video(.*?)>([\w\W]*?)<\/video>/gi,"[video$1]$2[/video]"),t=t.replace(/<audio(.*?)>([\w\W]*?)<\/audio>/gi,"[audio$1]$2[/audio]"),t=t.replace(/<embed(.*?)>([\w\W]*?)<\/embed>/gi,"[embed$1]$2[/embed]"),t=t.replace(/<object(.*?)>([\w\W]*?)<\/object>/gi,"[object$1]$2[/object]"),t=t.replace(/<param(.*?)>/gi,"[param$1]"),t=t.replace(/<img(.*?)>/gi,"[img$1]"),t=t.replace(/ class="(.*?)"/gi,""),t=t.replace(/<(\w+)([\w\W]*?)>/gi,"<$1>"),t=t.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),t=t.replace(/<div>\s*?\t*?\n*?(<ul>|<ol>|<p>)/gi,"$1"),t=t.replace(/\[td colspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi,'<td colspan="$1">$2</td>'),t=t.replace(/\[td rowspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi,'<td rowspan="$1">$2</td>'),t=t.replace(/\[td\]/gi,"<td>&nbsp;</td>"),t=t.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),t=t.replace(/\[iframe(.*?)\]([\w\W]*?)\[\/iframe\]/gi,"<iframe$1>$2</iframe>"),t=t.replace(/\[video(.*?)\]([\w\W]*?)\[\/video\]/gi,"<video$1>$2</video>"),t=t.replace(/\[audio(.*?)\]([\w\W]*?)\[\/audio\]/gi,"<audio$1>$2</audio>"),t=t.replace(/\[embed(.*?)\]([\w\W]*?)\[\/embed\]/gi,"<embed$1>$2</embed>"),t=t.replace(/\[object(.*?)\]([\w\W]*?)\[\/object\]/gi,"<object$1>$2</object>"),t=t.replace(/\[param(.*?)\]/gi,"<param$1>"),t=t.replace(/\[img(.*?)\]/gi,"<img$1>"),this.opts.convertDivs&&(t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>"),t=t.replace(/<\/div><p>/gi,"<p>"),t=t.replace(/<\/p><\/div>/gi,"</p>")),t=this.currentOrParentIs("LI")?t.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br>"):this.cleanParagraphy(t),t=t.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi,"$2"),t=t.replace(/<img>/gi,""),t=t.replace(/<[^\/>][^>][^img|param|source]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),t=t.replace(/\n{3,}/gi,"\n"),t=t.replace(/<p><p>/gi,"<p>"),t=t.replace(/<\/p><\/p>/gi,"</p>"),t=t.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>"),t=t.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>"),this.opts.linebreaks===!0&&(t=t.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi,"$2<br>")),t=t.replace(/<[^\/>][^>][^img|param|source]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),t=t.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi,""),t=t.replace(/<td(.*?)>(\s*|\t*|\n*)<p>([\w\W]*?)<\/p>(\s*|\t*|\n*)<\/td>/gi,"<td$1>$3</td>"),t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2"),t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2"),this.pasteClipboardMozilla=!1,this.browser("mozilla")){if(this.opts.clipboardUpload){var n=t.match(/<img src="data:image(.*?)"(.*?)>/gi);if(null!==n){this.pasteClipboardMozilla=n;for(k in n){var r=n[k].replace("<img",'<img data-mozilla-paste-image="'+k+'" ');t=t.replace(n[k],r)}}}for(;/<br>$/gi.test(t);)t=t.replace(/<br>$/gi,"")}for(t=t.replace(/<p>\u2022([\w\W]*?)<\/p>/gi,"<li>$1</li>");/<font>([\w\W]*?)<\/font>/gi.test(t);)t=t.replace(/<font>([\w\W]*?)<\/font>/gi,"$1");t=t.replace(/<p>\n?<li>/gi,"<li>"),this.browser("msie")&&!this.isIe11()&&(t=t.replace(/\n/g,"")),this.pasteInsert(t)},pastePre:function(e){e=e.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi,"\n");var t=this.document.createElement("div");return t.innerHTML=e,this.cleanEncodeEntities(t.textContent||t.innerText)},pasteInsert:function(t){this.selectall&&(this.$editor.html(this.opts.linebreaks?"":this.opts.emptyHtml),this.$editor.focus()),t=this.callback("pasteAfter",!1,t),this.insertHtml(t),this.selectall=!1,setTimeout(e.proxy(function(){this.rtePaste=!1,this.browser("mozilla")&&this.$editor.find("p:empty").remove(),this.pasteClipboardMozilla!==!1&&this.pasteClipboardUploadMozilla()},this),100),this.opts.autoresize&&this.fullscreen!==!0?e(this.document.body).scrollTop(this.saveScroll):this.$editor.scrollTop(this.saveScroll)},pasteClipboardUploadMozilla:function(){var t=this.$editor.find("img[data-mozilla-paste-image]");e.each(t,e.proxy(function(t,i){var n=e(i),r=i.src.split(","),o=r[1],a=r[0].split(";")[0].split(":")[1];e.post(this.opts.clipboardUploadUrl,{contentType:a,data:o},e.proxy(function(t){var i="string"==typeof t?e.parseJSON(t):t;n.attr("src",i.filelink),n.removeAttr("data-mozilla-paste-image"),this.sync(),this.callback("imageUpload",n,i)},this))},this))},pasteClipboardUpload:function(t){var i=t.target.result,n=i.split(","),r=n[1],o=n[0].split(";")[0].split(":")[1];this.opts.clipboardUpload?e.post(this.opts.clipboardUploadUrl,{contentType:o,data:r},e.proxy(function(t){var i="string"==typeof t?e.parseJSON(t):t,n='<img src="'+i.filelink+'" id="clipboard-image-marker" />';this.execCommand("inserthtml",n,!1);var r=e(this.$editor.find("img#clipboard-image-marker"));r.length?r.removeAttr("id"):r=!1,this.sync(),r&&this.callback("imageUpload",r,i)},this)):this.insertHtml('<img src="'+i+'" />')},bufferSet:function(e){void 0!==e?this.opts.buffer.push(e):(this.selectionSave(),this.opts.buffer.push(this.$editor.html()),this.selectionRemoveMarkers("buffer"))},bufferUndo:function(){return 0===this.opts.buffer.length?void this.$editor.focus():(this.selectionSave(),this.opts.rebuffer.push(this.$editor.html()),this.selectionRestore(!1,!0),this.$editor.html(this.opts.buffer.pop()),this.selectionRestore(),void setTimeout(e.proxy(this.observeStart,this),100))},bufferRedo:function(){return 0===this.opts.rebuffer.length?(this.$editor.focus(),!1):(this.selectionSave(),this.opts.buffer.push(this.$editor.html()),this.selectionRestore(!1,!0),this.$editor.html(this.opts.rebuffer.pop()),this.selectionRestore(!0),void setTimeout(e.proxy(this.observeStart,this),4))},observeStart:function(){this.observeImages(),this.opts.observeLinks&&this.observeLinks()},observeLinks:function(){this.$editor.find("a").on("click",e.proxy(this.linkObserver,this)),this.$editor.on("click.redactor",e.proxy(function(e){this.linkObserverTooltipClose(e)},this)),e(document).on("click.redactor",e.proxy(function(e){this.linkObserverTooltipClose(e)},this))},observeImages:function(){return this.opts.observeImages===!1?!1:void this.$editor.find("img").each(e.proxy(function(t,i){this.browser("msie")&&e(i).attr("unselectable","on"),this.imageResize(i)},this))},linkObserver:function(t){var i=e(t.target),n=i.offset();if(this.opts.iframe){var r=this.$frame.offset();n.top=r.top+(n.top-e(this.document).scrollTop()),n.left+=r.left}var o=e('<span class="redactor-link-tooltip"></span>'),a=i.attr("href");a.length>24&&(a=a.substring(0,24)+"...");var s=e('<a href="'+i.attr("href")+'" target="_blank">'+a+"</a>").on("click",e.proxy(function(){this.linkObserverTooltipClose(!1)},this)),l=e('<a href="#">'+this.opts.curLang.edit+"</a>").on("click",e.proxy(function(e){e.preventDefault(),this.linkShow(),this.linkObserverTooltipClose(!1)},this)),c=e('<a href="#">'+this.opts.curLang.unlink+"</a>").on("click",e.proxy(function(e){e.preventDefault(),this.execCommand("unlink"),this.linkObserverTooltipClose(!1)},this));o.append(s),o.append(" | "),o.append(l),o.append(" | "),o.append(c),o.css({top:n.top+20+"px",left:n.left+"px"}),e(".redactor-link-tooltip").remove(),e("body").append(o)},linkObserverTooltipClose:function(t){return t!==!1&&"A"==t.target.tagName?!1:void e(".redactor-link-tooltip").remove()},getSelection:function(){return this.opts.rangy?this.opts.iframe?rangy.getSelection(this.$frame[0]):rangy.getSelection():this.document.getSelection()},getRange:function(){if(this.opts.rangy)return this.opts.iframe?rangy.createRange(this.iframeDoc()):rangy.createRange();if(this.document.getSelection){var e=this.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}return this.document.createRange()},selectionElement:function(e){this.setCaret(e)},selectionStart:function(e){this.selectionSet(e[0]||e,0,null,0)},selectionEnd:function(e){this.selectionSet(e[0]||e,1,null,1)},selectionSet:function(e,t,i,n){null==i&&(i=e),null==n&&(n=t);var r=this.getSelection();if(r){var o=this.getRange();o.setStart(e,t),o.setEnd(i,n);try{r.removeAllRanges()}catch(a){}r.addRange(o)}},selectionWrap:function(e){e=e.toLowerCase();var t=this.getBlock();if(t){var i=this.formatChangeTag(t,e);return this.sync(),i}var n=this.getSelection(),r=n.getRangeAt(0),i=document.createElement(e);return i.appendChild(r.extractContents()),r.insertNode(i),this.selectionElement(i),i},selectionAll:function(){var e=this.getRange();e.selectNodeContents(this.$editor[0]);var t=this.getSelection();t.removeAllRanges(),t.addRange(e)},selectionRemove:function(){this.getSelection().removeAllRanges()},getCaretOffset:function(t){var i=0,n=this.getRange(),r=n.cloneRange();return r.selectNodeContents(t),r.setEnd(n.endContainer,n.endOffset),i=e.trim(r.toString()).length},getCaretOffsetRange:function(){return new r(this.getSelection().getRangeAt(0))},setCaret:function(e,t,i){"undefined"==typeof i&&(i=t),e=e[0]||e;var n=this.getRange();n.selectNodeContents(e);var r,o=this.getTextNodesIn(e),a=!1,s=0;if(1==o.length&&t)n.setStart(o[0],t),n.setEnd(o[0],i);else for(var l,c=0;l=o[c++];){if(r=s+l.length,!a&&t>=s&&(r>t||t==r&&c<o.length)&&(n.setStart(l,t-s),a=!0),a&&r>=i){n.setEnd(l,i-s);break}s=r}var d=this.getSelection();d.removeAllRanges(),d.addRange(n)},getTextNodesIn:function(e){var t=[];if(3==e.nodeType)t.push(e);else for(var i=e.childNodes,n=0,r=i.length;r>n;++n)t.push.apply(t,this.getTextNodesIn(i[n]));return t},getCurrent:function(){var e=!1,t=this.getSelection();return t&&t.rangeCount>0&&(e=t.getRangeAt(0).startContainer),this.isParentRedactor(e)},getParent:function(t){return t=t||this.getCurrent(),t?this.isParentRedactor(e(t).parent()[0]):!1},getBlock:function(t){for("undefined"==typeof t&&(t=this.getCurrent());t;){if(this.nodeTestBlocks(t))return e(t).hasClass("redactor_editor")?!1:t;t=t.parentNode}return!1},getBlocks:function(t){var i=[];if("undefined"==typeof t){var n=this.getRange();if(n&&n.collapsed===!0)return[this.getBlock()];var t=this.getNodes(n)}return e.each(t,e.proxy(function(t,n){return this.opts.iframe===!1&&0==e(n).parents("div.redactor_editor").size()?!1:void(this.nodeTestBlocks(n)&&i.push(n))},this)),0===i.length&&(i=[this.getBlock()]),i},nodeTestBlocks:function(e){return 1==e.nodeType&&this.rTestBlock.test(e.nodeName)},tagTestBlock:function(e){return this.rTestBlock.test(e)},getNodes:function(t,i){if("undefined"==typeof t||0==t)var t=this.getRange();if(t&&t.collapsed===!0){if("undefined"==typeof i&&this.tagTestBlock(i)){var n=this.getBlock();return n.tagName==i?[n]:[]}return[this.getCurrent()]}var r=[],o=[],a=this.document.getSelection();if(a.isCollapsed||(r=this.getRangeSelectedNodes(a.getRangeAt(0))),e.each(r,e.proxy(function(t,n){return this.opts.iframe===!1&&0==e(n).parents("div.redactor_editor").size()?!1:void("undefined"==typeof i?""!=e.trim(n.textContent)&&o.push(n):n.tagName==i&&o.push(n))},this)),0==o.length){if("undefined"==typeof i&&this.tagTestBlock(i)){var n=this.getBlock();return n.tagName==i?o.push(n):[]}o.push(this.getCurrent())}var s=o[o.length-1];return this.nodeTestBlocks(s)&&(o=o.slice(0,-1)),o},getElement:function(t){for(t||(t=this.getCurrent());t;){if(1==t.nodeType)return e(t).hasClass("redactor_editor")?!1:t;t=t.parentNode}return!1},getRangeSelectedNodes:function(e){e=e||this.getRange();var t=e.startContainer,i=e.endContainer;if(t==i)return[t];for(var n=[];t&&t!=i;)n.push(t=this.nextNode(t));for(t=e.startContainer;t&&t!=e.commonAncestorContainer;)n.unshift(t),t=t.parentNode;return n},nextNode:function(e){if(e.hasChildNodes())return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null},getSelectionText:function(){return this.getSelection().toString()},getSelectionHtml:function(){var e="",t=this.getSelection();if(t.rangeCount){for(var i=this.document.createElement("div"),n=t.rangeCount,r=0;n>r;++r)i.appendChild(t.getRangeAt(r).cloneContents());e=i.innerHTML}return this.syncClean(e)},selectionSave:function(){this.isFocused()||this.$editor.focus(),this.opts.rangy?this.savedSel=rangy.saveSelection():this.selectionCreateMarker(this.getRange())},selectionCreateMarker:function(t){if(t){var i=e('<span id="selection-marker-1" class="redactor-selection-marker">'+this.opts.invisibleSpace+"</span>",this.document)[0],n=e('<span id="selection-marker-2" class="redactor-selection-marker">'+this.opts.invisibleSpace+"</span>",this.document)[0];t.collapsed===!0?this.selectionSetMarker(t,i,!0):(this.selectionSetMarker(t,i,!0),this.selectionSetMarker(t,n,!1)),this.savedSel=this.$editor.html(),this.selectionRestore(!1,!1)}},selectionSetMarker:function(e,t,i){var n=e.cloneRange();n.collapse(i),n.insertNode(t),n.detach()},selectionRestore:function(e,t){if(this.opts.rangy)rangy.restoreSelection(this.savedSel);else{e===!0&&this.savedSel&&this.$editor.html(this.savedSel);var i=this.$editor.find("span#selection-marker-1"),n=this.$editor.find("span#selection-marker-2");this.browser("mozilla")?this.$editor.focus():this.isFocused()||this.$editor.focus(),0!=i.length&&0!=n.length?this.selectionSet(i[0],0,n[0],0):0!=i.length&&this.selectionSet(i[0],0,null,0),t!==!1&&(this.selectionRemoveMarkers(),this.savedSel=!1)}},selectionRemoveMarkers:function(){this.opts.rangy?rangy.removeMarkers(this.savedSel):e.each(this.$editor.find("span.redactor-selection-marker"),function(){var t=e.trim(e(this).html().replace(/[^\u0000-\u1C7F]/g,""));""==t?e(this).remove():e(this).removeAttr("class").removeAttr("id")})},tableShow:function(){this.selectionSave(),this.modalInit(this.opts.curLang.table,this.opts.modal_table,300,e.proxy(function(){e("#redactor_insert_table_btn").click(e.proxy(this.tableInsert,this)),setTimeout(function(){e("#redactor_table_rows").focus()},200)},this))},tableInsert:function(){var t,i,n,r,o=e("#redactor_table_rows").val(),a=e("#redactor_table_columns").val(),s=e("<div></div>"),l=Math.floor(99999*Math.random()),c=e('<table id="table'+l+'"><tbody></tbody></table>');for(t=0;o>t;t++){for(i=e("<tr></tr>"),n=0;a>n;n++)r=e("<td>"+this.opts.invisibleSpace+"</td>"),0===t&&0===n&&r.append('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"),e(i).append(r);c.append(i)}s.append(c);var d=s.html();this.modalClose(),this.selectionRestore();var u=this.getBlock()||this.getCurrent();u&&"BODY"!=u.tagName?e(u).after(d):this.insertHtmlAdvanced(d,!1),this.selectionRestore();var h=this.$editor.find("#table"+l);this.buttonActiveObserver(),h.find("span#selection-marker-1").remove(),h.removeAttr("id"),this.sync()},tableDeleteTable:function(){var t=e(this.getParent()).closest("table");return this.isParentRedactor(t)?0==t.size()?!1:(this.bufferSet(),t.remove(),void this.sync()):!1},tableDeleteRow:function(){var t=e(this.getParent()).closest("table");if(!this.isParentRedactor(t))return!1;if(0==t.size())return!1;this.bufferSet();var i=e(this.getParent()).closest("tr"),n=i.prev().length?i.prev():i.next();if(n.length){var r=n.children("td").first();r.length&&r.prepend('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>")}i.remove(),this.selectionRestore(),this.sync()},tableDeleteColumn:function(){var t=e(this.getParent()).closest("table");if(!this.isParentRedactor(t))return!1;if(0==t.size())return!1;this.bufferSet();var i=e(this.getParent()).closest("td"),n=i.get(0).cellIndex;t.find("tr").each(e.proxy(function(t,i){var r=0>n-1?n+1:n-1;0===t&&e(i).find("td").eq(r).prepend('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"),e(i).find("td").eq(n).remove()},this)),this.selectionRestore(),this.sync()},tableAddHead:function(){var t=e(this.getParent()).closest("table");if(!this.isParentRedactor(t))return!1;if(0==t.size())return!1;if(this.bufferSet(),0!==t.find("thead").size())this.tableDeleteHead();else{var i=t.find("tr").first().clone();i.find("td").html(this.opts.invisibleSpace),$thead=e("<thead></thead>"),$thead.append(i),t.prepend($thead),this.sync()}},tableDeleteHead:function(){var t=e(this.getParent()).closest("table");if(!this.isParentRedactor(t))return!1;var i=t.find("thead");return 0==i.size()?!1:(this.bufferSet(),i.remove(),void this.sync())},tableAddRowAbove:function(){this.tableAddRow("before")},tableAddRowBelow:function(){this.tableAddRow("after")},tableAddColumnLeft:function(){this.tableAddColumn("before")},tableAddColumnRight:function(){this.tableAddColumn("after")},tableAddRow:function(t){var i=e(this.getParent()).closest("table");if(!this.isParentRedactor(i))return!1;if(0==i.size())return!1;this.bufferSet();var n=e(this.getParent()).closest("tr"),r=n.clone();r.find("td").html(this.opts.invisibleSpace),"after"===t?n.after(r):n.before(r),this.sync()},tableAddColumn:function(t){var i=e(this.getParent()).closest("table");if(!this.isParentRedactor(i))return!1;if(0==i.size())return!1;this.bufferSet();var n=0,r=e(this.getParent()).closest("tr"),o=e(this.getParent()).closest("td");r.find("td").each(e.proxy(function(t,i){e(i)[0]===o[0]&&(n=t)},this)),i.find("tr").each(e.proxy(function(i,r){var o=e(r).find("td").eq(n),a=o.clone();a.html(this.opts.invisibleSpace),"after"===t?o.after(a):o.before(a)},this)),this.sync()},videoShow:function(){this.selectionSave(),this.modalInit(this.opts.curLang.video,this.opts.modal_video,600,e.proxy(function(){e("#redactor_insert_video_btn").click(e.proxy(this.videoInsert,this)),setTimeout(function(){e("#redactor_insert_video_area").focus()},200)},this))},videoInsert:function(){var t=e("#redactor_insert_video_area").val();t=this.cleanStripTags(t),this.selectionRestore();var i=this.getBlock()||this.getCurrent();i?e(i).after(t):this.insertHtmlAdvanced(t,!1),this.sync(),this.modalClose()},linkShow:function(){this.selectionSave();var t=e.proxy(function(){this.insert_link_node=!1;var t=this.getSelection(),i="",n="",r="",o=this.getParent(),a=e(o).parent().get(0);a&&"A"===a.tagName&&(o=a),o&&"A"===o.tagName?(i=o.href,n=e(o).text(),r=o.target,this.insert_link_node=o):n=t.toString(),e(".redactor_link_text").val(n);var s=self.location.href.replace(/\/$/i,""),l=i.replace(s,"");if(this.opts.linkProtocol===!1){var c=new RegExp("^(http|ftp|https)://"+self.location.host,"i");l=l.replace(c,"")}var d=e("#redactor_tabs").find("a");this.opts.linkEmail===!1&&d.eq(1).remove(),this.opts.linkAnchor===!1&&d.eq(2).remove(),this.opts.linkEmail===!1&&this.opts.linkAnchor===!1?(e("#redactor_tabs").remove(),e("#redactor_link_url").val(l)):0===i.search("mailto:")?(this.modalSetTab.call(this,2),e("#redactor_tab_selected").val(2),e("#redactor_link_mailto").val(i.replace("mailto:",""))):0===l.search(/^#/gi)?(this.modalSetTab.call(this,3),e("#redactor_tab_selected").val(3),e("#redactor_link_anchor").val(l.replace(/^#/gi,""))):e("#redactor_link_url").val(l),"_blank"===r&&e("#redactor_link_blank").prop("checked",!0),e("#redactor_insert_link_btn").click(e.proxy(this.linkProcess,this)),setTimeout(function(){e("#redactor_link_url").focus()},200)},this);this.modalInit(this.opts.curLang.link,this.opts.modal_link,460,t)},linkProcess:function(){var t=e("#redactor_tab_selected").val(),i="",n="",r="",o="";if("1"===t){i=e("#redactor_link_url").val(),n=e("#redactor_link_url_text").val(),e("#redactor_link_blank").prop("checked")&&(r=' target="_blank"',o="_blank");var a="((xn--)?[a-z0-9]+(-[a-z0-9]+)*.)+[a-z]{2,}",s=new RegExp("^(http|ftp|https)://"+a,"i"),l=new RegExp("^"+a,"i");-1==i.search(s)&&0==i.search(l)&&this.opts.linkProtocol&&(i=this.opts.linkProtocol+i)}else"2"===t?(i="mailto:"+e("#redactor_link_mailto").val(),n=e("#redactor_link_mailto_text").val()):"3"===t&&(i="#"+e("#redactor_link_anchor").val(),n=e("#redactor_link_anchor_text").val());n=n.replace(/<|>/g,""),this.linkInsert('<a href="'+i+'"'+r+">"+n+"</a>",e.trim(n),i,o)},linkInsert:function(t,i,n,r){if(this.selectionRestore(),""!==i)if(this.insert_link_node)this.bufferSet(),e(this.insert_link_node).text(i).attr("href",n),""!==r?e(this.insert_link_node).attr("target",r):e(this.insert_link_node).removeAttr("target"),this.sync();else{var o=e(t).addClass("redactor-added-link");this.exec("inserthtml",this.outerHtml(o),!1),this.$editor.find("a.redactor-added-link").removeAttr("style").removeClass("redactor-added-link").each(function(){""==this.className&&e(this).removeAttr("class")}),this.sync()}setTimeout(e.proxy(function(){this.opts.observeLinks&&this.observeLinks()},this),5),this.modalClose()},fileShow:function(){this.selectionSave();var t=e.proxy(function(){var t=this.getSelection(),i="";i=this.oldIE()?t.text:t.toString(),e("#redactor_filename").val(i),this.isMobile()||this.draguploadInit("#redactor_file",{url:this.opts.fileUpload,uploadFields:this.opts.uploadFields,success:e.proxy(this.fileCallback,this),error:e.proxy(function(e,t){this.callback("fileUploadError",t)},this),uploadParam:this.opts.fileUploadParam}),this.uploadInit("redactor_file",{auto:!0,url:this.opts.fileUpload,success:e.proxy(this.fileCallback,this),error:e.proxy(function(e,t){this.callback("fileUploadError",t)},this)})},this);this.modalInit(this.opts.curLang.file,this.opts.modal_file,500,t)},fileCallback:function(t){if(this.selectionRestore(),t!==!1){var i=e("#redactor_filename").val();""===i&&(i=t.filename);var n='<a href="'+t.filelink+'" id="filelink-marker">'+i+"</a>";this.browser("webkit")&&this.window.chrome&&(n+="&nbsp;"),this.execCommand("inserthtml",n,!1);var r=e(this.$editor.find("a#filelink-marker"));0!=r.size()?r.removeAttr("id"):r=!1,this.sync(),this.callback("fileUpload",r,t)}this.modalClose()},imageShow:function(){this.selectionSave();var t=e.proxy(function(){if(this.opts.imageGetJson?e.getJSON(this.opts.imageGetJson,e.proxy(function(t){var i={},n=0;e.each(t,e.proxy(function(e,t){"undefined"!=typeof t.folder&&(n++,i[t.folder]=n)},this));var r=!1;if(e.each(t,e.proxy(function(t,n){var o="";"undefined"!=typeof n.title&&(o=n.title);var a=0;e.isEmptyObject(i)||"undefined"==typeof n.folder||(a=i[n.folder],r===!1&&(r=".redactorfolder"+a));var s=e('<img src="'+n.thumb+'" class="redactorfolder redactorfolder'+a+'" rel="'+n.image+'" title="'+o+'" />');e("#redactor_image_box").append(s),e(s).click(e.proxy(this.imageThumbClick,this))},this)),!e.isEmptyObject(i)){e(".redactorfolder").hide(),e(r).show();var o=function(t){e(".redactorfolder").hide(),e(".redactorfolder"+e(t.target).val()).show()},a=e('<select id="redactor_image_box_select">');e.each(i,function(t,i){a.append(e('<option value="'+i+'">'+t+"</option>"))}),e("#redactor_image_box").before(a),a.change(o)}},this)):e("#redactor_tabs").find("a").eq(1).remove(),this.opts.imageUpload||this.opts.s3)this.isMobile()||this.opts.s3!==!1||e("#redactor_file").length&&this.draguploadInit("#redactor_file",{url:this.opts.imageUpload,uploadFields:this.opts.uploadFields,success:e.proxy(this.imageCallback,this),error:e.proxy(function(e,t){this.callback("imageUploadError",t)},this),uploadParam:this.opts.imageUploadParam}),this.opts.s3===!1?this.uploadInit("redactor_file",{auto:!0,url:this.opts.imageUpload,success:e.proxy(this.imageCallback,this),error:e.proxy(function(e,t){this.callback("imageUploadError",t)},this)}):e("#redactor_file").on("change.redactor",e.proxy(this.s3handleFileSelect,this));else if(e(".redactor_tab").hide(),this.opts.imageGetJson){var t=e("#redactor_tabs").find("a");t.eq(0).remove(),t.eq(1).addClass("redactor_tabs_act"),e("#redactor_tab2").show()}else e("#redactor_tabs").remove(),e("#redactor_tab3").show();e("#redactor_upload_btn").click(e.proxy(this.imageCallbackLink,this)),this.opts.imageUpload||this.opts.imageGetJson||setTimeout(function(){e("#redactor_file_link").focus()},200)},this);this.modalInit(this.opts.curLang.image,this.opts.modal_image,610,t)},imageEdit:function(t){var i=t,n=i.parent().parent(),r=e.proxy(function(){e("#redactor_file_alt").val(i.attr("alt")),e("#redactor_image_edit_src").attr("href",i.attr("src")),e("#redactor_form_image_align").val(i.css("float")),"A"===e(n).get(0).tagName&&(e("#redactor_file_link").val(e(n).attr("href")),"_blank"==e(n).attr("target")&&e("#redactor_link_blank").prop("checked",!0)),e("#redactor_image_delete_btn").click(e.proxy(function(){this.imageRemove(i)},this)),e("#redactorSaveBtn").click(e.proxy(function(){this.imageSave(i)},this))},this);this.modalInit(this.opts.curLang.edit,this.opts.modal_image_edit,380,r)},imageRemove:function(t){var i=e(t).parent();e(t).remove(),i.length&&"P"===i[0].tagName&&(this.$editor.focus(),this.selectionStart(i)),this.callback("imageDelete",t),this.modalClose(),this.sync()},imageSave:function(t){var i=e(t),n=i.parent();i.attr("alt",e("#redactor_file_alt").val());var r=e("#redactor_form_image_align").val();if("left"===r)this.imageMargin="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0",i.css({"float":"left",margin:this.imageMargin});else if("right"===r)this.imageMargin="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin,i.css({"float":"right",margin:this.imageMargin});else{this.imageMargin="0px";var o=i.closest("#redactor-image-box");0!=o.size()&&o.css({"float":"",margin:""}),i.css({"float":"",margin:""})}var a=e.trim(e("#redactor_file_link").val());if(""!==a){var s=!1;if(e("#redactor_link_blank").prop("checked")&&(s=!0),"A"!==n.get(0).tagName){var l=e('<a href="'+a+'">'+this.outerHtml(t)+"</a>");s&&l.attr("target","_blank"),i.replaceWith(l)}else n.attr("href",a),s?n.attr("target","_blank"):n.removeAttr("target")}else"A"===n.get(0).tagName&&n.replaceWith(this.outerHtml(t));this.modalClose(),this.observeImages(),this.sync()},imageResizeHide:function(t){if(t!==!1&&0!=e(t.target).parent().size()&&"redactor-image-box"===e(t.target).parent()[0].id)return!1;var i=this.$editor.find("#redactor-image-box");return 0==i.size()?!1:(this.$editor.find("#redactor-image-editter, #redactor-image-resizer").remove(),"0px"!=this.imageMargin&&(i.find("img").css("margin",this.imageMargin),i.css("margin",""),this.imageMargin="0px"),i.find("img").css("opacity",""),i.replaceWith(function(){return e(this).contents()}),e(document).off("click.redactor-image-resize-hide"),this.$editor.off("click.redactor-image-resize-hide"),this.$editor.off("keydown.redactor-image-delete"),void this.sync())},imageResize:function(t){var i=e(t);i.on("mousedown",e.proxy(function(){this.imageResizeHide(!1)},this)),i.on("dragstart",e.proxy(function(){this.$editor.on("drop.redactor-image-inside-drop",e.proxy(function(){setTimeout(e.proxy(function(){this.observeImages(),this.$editor.off("drop.redactor-image-inside-drop"),this.sync()},this),1)},this))},this)),i.on("click",e.proxy(function(){if(0!=this.$editor.find("#redactor-image-box").size())return!1;var t,n,r=i.width()/i.height(),o=20,a=this.imageResizeControls(i),s=!1;a.on("mousedown",function(e){s=!0,e.preventDefault(),r=i.width()/i.height(),t=Math.round(e.pageX-i.eq(0).offset().left),n=Math.round(e.pageY-i.eq(0).offset().top)}),e(this.document.body).on("mousemove",e.proxy(function(e){if(s){var a=(Math.round(e.pageX-i.eq(0).offset().left)-t,Math.round(e.pageY-i.eq(0).offset().top)-n),l=i.height(),c=parseInt(l,10)+a,d=Math.round(c*r);d>o&&(i.width(d),this.imageEditter.css(100>d?{marginTop:"-7px",marginLeft:"-13px",fontSize:"9px",padding:"3px 5px"}:{marginTop:"-11px",marginLeft:"-18px",fontSize:"11px",padding:"7px 10px"})),t=Math.round(e.pageX-i.eq(0).offset().left),n=Math.round(e.pageY-i.eq(0).offset().top),this.sync()}},this)).on("mouseup",function(){s=!1}),this.$editor.on("keydown.redactor-image-delete",e.proxy(function(e){var t=e.which;(this.keyCode.BACKSPACE==t||this.keyCode.DELETE==t)&&(this.bufferSet(),this.imageResizeHide(!1),this.imageRemove(i))},this)),e(document).on("click.redactor-image-resize-hide",e.proxy(this.imageResizeHide,this)),this.$editor.on("click.redactor-image-resize-hide",e.proxy(this.imageResizeHide,this))},this))},imageResizeControls:function(t){var i=e('<span id="redactor-image-box" data-redactor="verified">');i.css({position:"relative",display:"inline-block",lineHeight:0,outline:"1px dashed rgba(0, 0, 0, .6)","float":t.css("float")}),i.attr("contenteditable",!1),this.imageMargin=t[0].style.margin,"0px"!=this.imageMargin&&(i.css("margin",this.imageMargin),t.css("margin","")),t.css("opacity",.5).after(i),this.imageEditter=e('<span id="redactor-image-editter" data-redactor="verified">'+this.opts.curLang.edit+"</span>"),this.imageEditter.css({position:"absolute",zIndex:2,top:"50%",left:"50%",marginTop:"-11px",marginLeft:"-18px",lineHeight:1,backgroundColor:"#000",color:"#fff",fontSize:"11px",padding:"7px 10px",cursor:"pointer"}),this.imageEditter.attr("contenteditable",!1),this.imageEditter.on("click",e.proxy(function(){this.imageEdit(t)},this)),i.append(this.imageEditter);var n=e('<span id="redactor-image-resizer" data-redactor="verified"></span>');return n.css({position:"absolute",zIndex:2,lineHeight:1,cursor:"nw-resize",bottom:"-4px",right:"-5px",border:"1px solid #fff",backgroundColor:"#000",width:"8px",height:"8px"}),n.attr("contenteditable",!1),i.append(n),i.append(t),n},imageThumbClick:function(t){var i='<img id="image-marker" src="'+e(t.target).attr("rel")+'" alt="'+e(t.target).attr("title")+'" />',n=this.getParent();this.opts.paragraphy&&0==e(n).closest("li").size()&&(i="<p>"+i+"</p>"),this.imageInsert(i,!0)},imageCallbackLink:function(){var t=e("#redactor_file_link").val();if(""!==t){var i='<img id="image-marker" src="'+t+'" />';this.opts.linebreaks===!1&&(i="<p>"+i+"</p>"),this.imageInsert(i,!0)}else this.modalClose()},imageCallback:function(e){this.imageInsert(e)},imageInsert:function(t,i){if(this.selectionRestore(),t!==!1){var n="";if(i!==!0){n='<img id="image-marker" src="'+t.filelink+'" />';var r=this.getParent();this.opts.paragraphy&&0==e(r).closest("li").size()&&(n="<p>"+n+"</p>")}else n=t;this.execCommand("inserthtml",n,!1);var o=e(this.$editor.find("img#image-marker"));o.length?o.removeAttr("id"):o=!1,this.sync(),i!==!0&&this.callback("imageUpload",o,t)}this.modalClose(),this.observeImages()},modalTemplatesInit:function(){e.extend(this.opts,{modal_file:String()+'<section><div id="redactor-progress" class="redactor-progress redactor-progress-striped" style="display: none;"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div><form id="redactorUploadFileForm" method="post" action="" enctype="multipart/form-data"><label>'+this.opts.curLang.filename+'</label><input type="text" id="redactor_filename" class="redactor_input" /><div style="margin-top: 7px;"><input type="file" id="redactor_file" name="'+this.opts.fileUploadParam+'" /></div></form></section>',modal_image_edit:String()+"<section><label>"+this.opts.curLang.title+'</label><input id="redactor_file_alt" class="redactor_input" /><label>'+this.opts.curLang.link+'</label><input id="redactor_file_link" class="redactor_input" /><label><input type="checkbox" id="redactor_link_blank"> '+this.opts.curLang.link_new_tab+"</label><label>"+this.opts.curLang.image_position+'</label><select id="redactor_form_image_align"><option value="none">'+this.opts.curLang.none+'</option><option value="left">'+this.opts.curLang.left+'</option><option value="right">'+this.opts.curLang.right+'</option></select></section><footer><button id="redactor_image_delete_btn" class="redactor_modal_btn redactor_modal_delete_btn">'+this.opts.curLang._delete+'</button>&nbsp;&nbsp;&nbsp;<button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" name="save" class="redactor_modal_btn redactor_modal_action_btn" id="redactorSaveBtn" value="'+this.opts.curLang.save+'" /></footer>',modal_image:String()+'<section><div id="redactor_tabs"><a href="#" class="redactor_tabs_act">'+this.opts.curLang.upload+'</a><a href="#">'+this.opts.curLang.choose+'</a><a href="#">'+this.opts.curLang.link+'</a></div><div id="redactor-progress" class="redactor-progress redactor-progress-striped" style="display: none;"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div><form id="redactorInsertImageForm" method="post" action="" enctype="multipart/form-data"><div id="redactor_tab1" class="redactor_tab"><input type="file" id="redactor_file" name="'+this.opts.imageUploadParam+'" /></div><div id="redactor_tab2" class="redactor_tab" style="display: none;"><div id="redactor_image_box"></div></div></form><div id="redactor_tab3" class="redactor_tab" style="display: none;"><label>'+this.opts.curLang.image_web_link+'</label><input type="text" name="redactor_file_link" id="redactor_file_link" class="redactor_input"  /></div></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" name="upload" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_upload_btn" value="'+this.opts.curLang.insert+'" /></footer>',modal_link:String()+'<section><form id="redactorInsertLinkForm" method="post" action=""><div id="redactor_tabs"><a href="#" class="redactor_tabs_act">URL</a><a href="#">Email</a><a href="#">'+this.opts.curLang.anchor+'</a></div><input type="hidden" id="redactor_tab_selected" value="1" /><div class="redactor_tab" id="redactor_tab1"><label>URL</label><input type="text" id="redactor_link_url" class="redactor_input"  /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_url_text" /><label><input type="checkbox" id="redactor_link_blank"> '+this.opts.curLang.link_new_tab+'</label></div><div class="redactor_tab" id="redactor_tab2" style="display: none;"><label>Email</label><input type="text" id="redactor_link_mailto" class="redactor_input" /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_mailto_text" /></div><div class="redactor_tab" id="redactor_tab3" style="display: none;"><label>'+this.opts.curLang.anchor+'</label><input type="text" class="redactor_input" id="redactor_link_anchor"  /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_anchor_text" /></div></form></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_link_btn" value="'+this.opts.curLang.insert+'" /></footer>',modal_table:String()+"<section><label>"+this.opts.curLang.rows+'</label><input type="text" size="5" value="2" id="redactor_table_rows" /><label>'+this.opts.curLang.columns+'</label><input type="text" size="5" value="3" id="redactor_table_columns" /></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" name="upload" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_table_btn" value="'+this.opts.curLang.insert+'" /></footer>',modal_video:String()+'<section><form id="redactorInsertVideoForm"><label>'+this.opts.curLang.video_html_code+'</label><textarea id="redactor_insert_video_area" style="width: 99%; height: 160px;"></textarea></form></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_video_btn" value="'+this.opts.curLang.insert+'" /></footer>'})
},modalInit:function(t,i,n,r){var o=e("#redactor_modal_overlay");o.length||(this.$overlay=o=e('<div id="redactor_modal_overlay" style="display: none;"></div>'),e("body").prepend(this.$overlay)),this.opts.modalOverlay&&o.show().on("click",e.proxy(this.modalClose,this));var a=e("#redactor_modal");a.length||(this.$modal=a=e('<div id="redactor_modal" style="display: none;"><div id="redactor_modal_close">&times;</div><header id="redactor_modal_header"></header><div id="redactor_modal_inner"></div></div>'),e("body").append(this.$modal)),e("#redactor_modal_close").on("click",e.proxy(this.modalClose,this)),this.hdlModalClose=e.proxy(function(e){return e.keyCode===this.keyCode.ESC?(this.modalClose(),!1):void 0},this),e(document).keyup(this.hdlModalClose),this.$editor.keyup(this.hdlModalClose),this.modalcontent=!1,0==i.indexOf("#")?(this.modalcontent=e(i),e("#redactor_modal_inner").empty().append(this.modalcontent.html()),this.modalcontent.html("")):e("#redactor_modal_inner").empty().append(i),a.find("#redactor_modal_header").html(t),"undefined"!=typeof e.fn.draggable&&(a.draggable({handle:"#redactor_modal_header"}),a.find("#redactor_modal_header").css("cursor","move"));var s=e("#redactor_tabs");if(s.length){var l=this;s.find("a").each(function(t,i){t++,e(i).on("click",function(i){if(i.preventDefault(),s.find("a").removeClass("redactor_tabs_act"),e(this).addClass("redactor_tabs_act"),e(".redactor_tab").hide(),e("#redactor_tab"+t).show(),e("#redactor_tab_selected").val(t),l.isMobile()===!1){var n=a.outerHeight();a.css("margin-top","-"+(n+10)/2+"px")}})})}a.find(".redactor_btn_modal_close").on("click",e.proxy(this.modalClose,this)),this.saveModalScroll=this.opts.autoresize===!0?this.document.body.scrollTop:this.$editor.scrollTop(),this.isMobile()===!1?(a.css({position:"fixed",top:"-2000px",left:"50%",width:n+"px",marginLeft:"-"+(n+60)/2+"px"}).show(),this.modalSaveBodyOveflow=e(document.body).css("overflow"),e(document.body).css("overflow","hidden")):a.css({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",margin:"0",minHeight:"300px"}).show(),"function"==typeof r&&r(),this.isMobile()===!1&&setTimeout(function(){var e=a.outerHeight();a.css({top:"50%",height:"auto",minHeight:"auto",marginTop:"-"+(e+10)/2+"px"})},10)},modalClose:function(){return e("#redactor_modal_close").off("click",this.modalClose),e("#redactor_modal").fadeOut("fast",e.proxy(function(){var t=e("#redactor_modal_inner");this.modalcontent!==!1&&(this.modalcontent.html(t.html()),this.modalcontent=!1),t.html(""),this.opts.modalOverlay&&e("#redactor_modal_overlay").hide().off("click",this.modalClose),e(document).unbind("keyup",this.hdlModalClose),this.$editor.unbind("keyup",this.hdlModalClose),this.selectionRestore(),this.opts.autoresize&&this.saveModalScroll?e(this.document.body).scrollTop(this.saveModalScroll):this.opts.autoresize===!1&&this.saveModalScroll&&this.$editor.scrollTop(this.saveModalScroll)},this)),this.isMobile()===!1&&e(document.body).css("overflow",this.modalSaveBodyOveflow?this.modalSaveBodyOveflow:"visible"),!1},modalSetTab:function(t){e(".redactor_tab").hide(),e("#redactor_tabs").find("a").removeClass("redactor_tabs_act").eq(t-1).addClass("redactor_tabs_act"),e("#redactor_tab"+t).show()},s3handleFileSelect:function(e){for(var t,i=e.target.files,n=0;t=i[n];n++)this.s3uploadFile(t)},s3uploadFile:function(t){this.s3executeOnSignedUrl(t,e.proxy(function(e){this.s3uploadToS3(t,e)},this))},s3executeOnSignedUrl:function(t,i){var n=new XMLHttpRequest,r="?";"-1"!=this.opts.s3.search(/\?/)&&(r="&"),n.open("GET",this.opts.s3+r+"name="+t.name+"&type="+t.type,!0),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.onreadystatechange=function(){4==this.readyState&&200==this.status?(e("#redactor-progress").fadeIn(),i(decodeURIComponent(this.responseText))):4==this.readyState&&200!=this.status},n.send()},s3createCORSRequest:function(e,t){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(e,t,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(e,t)):i=null,i},s3uploadToS3:function(t,i){var n=this.s3createCORSRequest("PUT",i);n&&(n.onload=e.proxy(function(){if(200==n.status){e("#redactor-progress, #redactor-progress-drag").hide();var t=i.split("?");if(!t[0])return!1;this.selectionRestore();var r="";r='<img id="image-marker" src="'+t[0]+'" />',this.opts.paragraphy&&(r="<p>"+r+"</p>"),this.execCommand("inserthtml",r,!1);var o=e(this.$editor.find("img#image-marker"));o.length?o.removeAttr("id"):o=!1,this.sync(),this.callback("imageUpload",o,!1),this.modalClose(),this.observeImages()}},this),n.onerror=function(){},n.upload.onprogress=function(){},n.setRequestHeader("Content-Type",t.type),n.setRequestHeader("x-amz-acl","public-read"),n.send(t))},uploadInit:function(t,i){this.uploadOptions={url:!1,success:!1,error:!1,start:!1,trigger:!1,auto:!1,input:!1},e.extend(this.uploadOptions,i);var n=e("#"+t);n.length&&"INPUT"===n[0].tagName?(this.uploadOptions.input=n,this.el=e(n[0].form)):this.el=n,this.element_action=this.el.attr("action"),this.uploadOptions.auto?e(this.uploadOptions.input).change(e.proxy(function(e){this.el.submit(function(){return!1}),this.uploadSubmit(e)},this)):this.uploadOptions.trigger&&e("#"+this.uploadOptions.trigger).click(e.proxy(this.uploadSubmit,this))},uploadSubmit:function(){e("#redactor-progress").fadeIn(),this.uploadForm(this.element,this.uploadFrame())},uploadFrame:function(){this.id="f"+Math.floor(99999*Math.random());var t=this.document.createElement("div"),i='<iframe style="display:none" id="'+this.id+'" name="'+this.id+'"></iframe>';return t.innerHTML=i,e(t).appendTo("body"),this.uploadOptions.start&&this.uploadOptions.start(),e("#"+this.id).load(e.proxy(this.uploadLoaded,this)),this.id},uploadForm:function(t,i){if(this.uploadOptions.input){var n="redactorUploadForm"+this.id,r="redactorUploadFile"+this.id;this.form=e('<form  action="'+this.uploadOptions.url+'" method="POST" target="'+i+'" name="'+n+'" id="'+n+'" enctype="multipart/form-data" />'),this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&e.each(this.opts.uploadFields,e.proxy(function(t,i){null!=i&&0===i.toString().indexOf("#")&&(i=e(i).val());var n=e("<input/>",{type:"hidden",name:t,value:i});e(this.form).append(n)},this));var o=this.uploadOptions.input,a=e(o).clone();e(o).attr("id",r).before(a).appendTo(this.form),e(this.form).css("position","absolute").css("top","-2000px").css("left","-2000px").appendTo("body"),this.form.submit()}else t.attr("target",i).attr("method","POST").attr("enctype","multipart/form-data").attr("action",this.uploadOptions.url),this.element.submit()},uploadLoaded:function(){var t,i=e("#"+this.id)[0];if(t=i.contentDocument?i.contentDocument:i.contentWindow?i.contentWindow.document:window.frames[this.id].document,this.uploadOptions.success)if(e("#redactor-progress").hide(),"undefined"!=typeof t){var n=t.body.innerHTML,r=n.match(/\{(.|\n)*\}/)[0];r=r.replace(/^\[/,""),r=r.replace(/\]$/,"");var o=e.parseJSON(r);"undefined"==typeof o.error?this.uploadOptions.success(o):(this.uploadOptions.error(this,o),this.modalClose())}else this.modalClose(),alert("Upload failed!");this.el.attr("action",this.element_action),this.el.attr("target","")},draguploadInit:function(t,i){return this.draguploadOptions=e.extend({url:!1,success:!1,error:!1,preview:!1,uploadFields:!1,text:this.opts.curLang.drop_file_here,atext:this.opts.curLang.or_choose,uploadParam:!1},i),void 0===window.FormData?!1:(this.droparea=e('<div class="redactor_droparea"></div>'),this.dropareabox=e('<div class="redactor_dropareabox">'+this.draguploadOptions.text+"</div>"),this.dropalternative=e('<div class="redactor_dropalternative">'+this.draguploadOptions.atext+"</div>"),this.droparea.append(this.dropareabox),e(t).before(this.droparea),e(t).before(this.dropalternative),this.dropareabox.on("dragover",e.proxy(function(){return this.draguploadOndrag()},this)),this.dropareabox.on("dragleave",e.proxy(function(){return this.draguploadOndragleave()},this)),void(this.dropareabox.get(0).ondrop=e.proxy(function(e){e.preventDefault(),this.dropareabox.removeClass("hover").addClass("drop"),this.dragUploadAjax(this.draguploadOptions.url,e.dataTransfer.files[0],!1,!1,!1,this.draguploadOptions.uploadParam)},this)))},dragUploadAjax:function(t,i,n,r,o,a){if(!n){var s=e.ajaxSettings.xhr();s.upload&&s.upload.addEventListener("progress",e.proxy(this.uploadProgress,this),!1),e.ajaxSetup({xhr:function(){return s}})}var l=new FormData;a!==!1?l.append(a,i):l.append("file",i),this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&e.each(this.opts.uploadFields,e.proxy(function(t,i){null!=i&&0===i.toString().indexOf("#")&&(i=e(i).val()),l.append(t,i)},this)),e.ajax({url:t,dataType:"html",data:l,cache:!1,contentType:!1,processData:!1,type:"POST",success:e.proxy(function(t){t=t.replace(/^\[/,""),t=t.replace(/\]$/,"");var i="string"==typeof t?e.parseJSON(t):t;if(n){r.fadeOut("slow",function(){e(this).remove()});var a=e("<img>");a.attr("src",i.filelink).attr("id","drag-image-marker"),this.insertNodeToCaretPositionFromPoint(o,a[0]);var s=e(this.$editor.find("img#drag-image-marker"));s.length?s.removeAttr("id"):s=!1,this.sync(),this.observeImages(),s&&this.callback("imageUpload",s,i),"undefined"!=typeof i.error&&this.callback("imageUploadError",i)}else"undefined"==typeof i.error?this.draguploadOptions.success(i):(this.draguploadOptions.error(this,i),this.draguploadOptions.success(!1))},this)})},draguploadOndrag:function(){return this.dropareabox.addClass("hover"),!1},draguploadOndragleave:function(){return this.dropareabox.removeClass("hover"),!1},uploadProgress:function(e,t){var i=e.loaded?parseInt(e.loaded/e.total*100,10):e;this.dropareabox.text("Loading "+i+"% "+(t||""))},isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},normalize:function(e){return"undefined"==typeof e?0:parseInt(e.replace("px",""),10)},outerHtml:function(t){return e("<div>").append(e(t).eq(0).clone()).html()},isString:function(e){return"[object String]"==Object.prototype.toString.call(e)},isEmpty:function(e){return e=e.replace(/&#x200b;|<br>|<br\/>|&nbsp;/gi,""),e=e.replace(/\s/g,""),e=e.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),""==e},isIe11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},browser:function(e){var t=navigator.userAgent.toLowerCase(),i=/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return"version"==e?i[2]:"webkit"==e?"chrome"==i[1]||"webkit"==i[1]:"rv"==i[1]?"msie"==e:"opr"==i[1]?"webkit"==e:e==i[1]},oldIE:function(){return this.browser("msie")&&parseInt(this.browser("version"),10)<9?!0:!1},getFragmentHtml:function(e){var t=e.cloneNode(!0),i=this.document.createElement("div");return i.appendChild(t),i.innerHTML},extractContent:function(){for(var e,t=this.$editor[0],i=this.document.createDocumentFragment();e=t.firstChild;)i.appendChild(e);return i},isParentRedactor:function(t){return t?this.opts.iframe?t:0==e(t).parents("div.redactor_editor").length||e(t).hasClass("redactor_editor")?!1:t:!1},currentOrParentIs:function(e){var t=this.getParent(),i=this.getCurrent();return t&&t.tagName===e?t:i&&i.tagName===e?i:!1},isEndOfElement:function(){var t=this.getBlock(),i=this.getCaretOffset(t),n=e.trim(e(t).text()).replace(/\n\r\n/g,""),r=n.length;return i==r?!0:!1},isFocused:function(){var t,i=this.getSelection();return i&&i.rangeCount&&i.rangeCount>0&&(t=i.getRangeAt(0).startContainer),t?this.opts.iframe?this.getCaretOffsetRange().equals()?!this.$editor.is(t):!0:0!=e(t).closest("div.redactor_editor").length:!1},removeEmptyAttr:function(t,i){""==e(t).attr(i)&&e(t).removeAttr(i)},removeFromArrayByValue:function(e,t){for(var i=null;-1!==(i=e.indexOf(t));)e.splice(i,1);return e}},t.prototype.init.prototype=t.prototype,e.Redactor.fn.formatLinkify=function(t,i,n,r,o){for(var a=/(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,s=/(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,l=/(https?:\/\/.*\.(?:png|jpg|jpeg|gif))/gi,c=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,d=/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,u=(this.$editor?this.$editor.get(0):this).childNodes,h=u.length;h--;){var p=u[h];if(3===p.nodeType){var f=p.nodeValue;if(r&&f){var m='<iframe width="500" height="281" src="',g='" frameborder="0" allowfullscreen></iframe>';f.match(c)?(f=f.replace(c,m+"//www.youtube.com/embed/$1"+g),e(p).after(f).remove()):f.match(d)&&(f=f.replace(d,m+"//player.vimeo.com/video/$2"+g),e(p).after(f).remove())}if(n&&f&&f.match(l)&&(f=f.replace(l,'<img src="$1">'),e(p).after(f).remove()),i&&f&&(f.match(a)||f.match(s))){var v=f.match(a)||f.match(s);v=v[0],v.length>o&&(v=v.substring(0,o)+"..."),f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(a,'$1<a href="'+t+'$2">'+e.trim(v)+"</a>$3").replace(s,'$1<a href="$2">'+e.trim(v)+"</a>$5"),e(p).after(f).remove()}}else 1!==p.nodeType||/^(a|button|textarea)$/i.test(p.tagName)||e.Redactor.fn.formatLinkify.call(p,t,i,n,r,o)}}}(jQuery),window.init_redactor=function(){var e,t=$("meta[name=csrf-token]").attr("content"),i=$("meta[name=csrf-param]").attr("content");void 0!==i&&void 0!==t&&(e=i+"="+encodeURIComponent(t)),$(".redactor").redactor({imageUpload:"/redactor_rails/pictures?"+e,imageGetJson:"/redactor_rails/pictures",path:"/assets/redactor-rails",css:"style.css"})},$(document).ready(window.init_redactor),$(window).bind("page:change",window.init_redactor),/*! fancyBox v2.1.4 fancyapps.com | fancyapps.com/fancybox/#license */
function(e,t,i,n){var r=i(e),o=i(t),a=i.fancybox=function(){a.open.apply(this,arguments)},s=navigator.userAgent.match(/msie/),l=null,c=t.createTouch!==n,d=function(e){return e&&e.hasOwnProperty&&e instanceof i},u=function(e){return e&&"string"===i.type(e)},h=function(e){return u(e)&&0<e.indexOf("%")},p=function(e,t){var i=parseInt(e,10)||0;return t&&h(e)&&(i*=a.getViewport()[t]/100),Math.ceil(i)},f=function(e,t){return p(e,t)+"px"};i.extend(a,{version:"2.1.4",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!c,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(s?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){return e&&(i.isPlainObject(t)||(t={}),!1!==a.close(!0))?(i.isArray(e)||(e=d(e)?i(e).get():[e]),i.each(e,function(r,o){var s,l,c,h,p,f={};"object"===i.type(o)&&(o.nodeType&&(o=i(o)),d(o)?(f={href:o.data("fancybox-href")||o.attr("href"),title:o.data("fancybox-title")||o.attr("title"),isDom:!0,element:o},i.metadata&&i.extend(!0,f,o.metadata())):f=o),s=t.href||f.href||(u(o)?o:null),l=t.title!==n?t.title:f.title||"",h=(c=t.content||f.content)?"html":t.type||f.type,!h&&f.isDom&&(h=o.data("fancybox-type"),h||(h=(h=o.prop("class").match(/fancybox\.(\w+)/))?h[1]:null)),u(s)&&(h||(a.isImage(s)?h="image":a.isSWF(s)?h="swf":"#"===s.charAt(0)?h="inline":u(o)&&(h="html",c=o)),"ajax"===h&&(p=s.split(/\s+/,2),s=p.shift(),p=p.shift())),c||("inline"===h?s?c=i(u(s)?s.replace(/.*(?=#[^\s]+$)/,""):s):f.isDom&&(c=o):"html"===h?c=s:!h&&!s&&f.isDom&&(h="inline",c=o)),i.extend(f,{href:s,type:h,content:c,title:l,selector:p}),e[r]=f}),a.opts=i.extend(!0,{},a.defaults,t),t.keys!==n&&(a.opts.keys=t.keys?i.extend({},a.defaults.keys,t.keys):!1),a.group=e,a._start(a.opts.index)):void 0},cancel:function(){var e=a.coming;e&&!1!==a.trigger("onCancel")&&(a.hideLoading(),a.ajaxLoad&&a.ajaxLoad.abort(),a.ajaxLoad=null,a.imgPreload&&(a.imgPreload.onload=a.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),a.coming=null,a.current||a._afterZoomOut(e))},close:function(e){a.cancel(),!1!==a.trigger("beforeClose")&&(a.unbindEvents(),a.isActive&&(a.isOpen&&!0!==e?(a.isOpen=a.isOpened=!1,a.isClosing=!0,i(".fancybox-item, .fancybox-nav").remove(),a.wrap.stop(!0,!0).removeClass("fancybox-opened"),a.transitions[a.current.closeMethod]()):(i(".fancybox-wrap").stop(!0).trigger("onReset").remove(),a._afterZoomOut())))},play:function(e){var t=function(){clearTimeout(a.player.timer)},n=function(){t(),a.current&&a.player.isActive&&(a.player.timer=setTimeout(a.next,a.current.playSpeed))},r=function(){t(),i("body").unbind(".player"),a.player.isActive=!1,a.trigger("onPlayEnd")};!0===e||!a.player.isActive&&!1!==e?a.current&&(a.current.loop||a.current.index<a.group.length-1)&&(a.player.isActive=!0,i("body").bind({"afterShow.player onUpdate.player":n,"onCancel.player beforeClose.player":r,"beforeLoad.player":t}),n(),a.trigger("onPlayStart")):r()},next:function(e){var t=a.current;t&&(u(e)||(e=t.direction.next),a.jumpto(t.index+1,e,"next"))},prev:function(e){var t=a.current;t&&(u(e)||(e=t.direction.prev),a.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,i){var r=a.current;r&&(e=p(e),a.direction=t||r.direction[e>=r.index?"next":"prev"],a.router=i||"jumpto",r.loop&&(0>e&&(e=r.group.length+e%r.group.length),e%=r.group.length),r.group[e]!==n&&(a.cancel(),a._start(e)))},reposition:function(e,t){var n,r=a.current,o=r?r.wrap:null;o&&(n=a._getPosition(t),e&&"scroll"===e.type?(delete n.position,o.stop(!0,!0).animate(n,200)):(o.css(n),r.pos=i.extend({},r.dim,n)))},update:function(e){var t=e&&e.type,i=!t||"orientationchange"===t;i&&(clearTimeout(l),l=null),a.isOpen&&!l&&(l=setTimeout(function(){var n=a.current;n&&!a.isClosing&&(a.wrap.removeClass("fancybox-tmp"),(i||"load"===t||"resize"===t&&n.autoResize)&&a._setDimension(),"scroll"===t&&n.canShrink||a.reposition(e),a.trigger("onUpdate"),l=null)},i&&!c?0:300))},toggle:function(e){a.isOpen&&(a.current.fitToView="boolean"===i.type(e)?e:!a.current.fitToView,c&&(a.wrap.removeAttr("style").addClass("fancybox-tmp"),a.trigger("onUpdate")),a.update())},hideLoading:function(){o.unbind(".loading"),i("#fancybox-loading").remove()},showLoading:function(){var e,t;a.hideLoading(),e=i('<div id="fancybox-loading"><div></div></div>').click(a.cancel).appendTo("body"),o.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),a.cancel())}),a.defaults.fixed||(t=a.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x}))},getViewport:function(){var t=a.current&&a.current.locked||!1,i={x:r.scrollLeft(),y:r.scrollTop()};return t?(i.w=t[0].clientWidth,i.h=t[0].clientHeight):(i.w=c&&e.innerWidth?e.innerWidth:r.width(),i.h=c&&e.innerHeight?e.innerHeight:r.height()),i},unbindEvents:function(){a.wrap&&d(a.wrap)&&a.wrap.unbind(".fb"),o.unbind(".fb"),r.unbind(".fb")},bindEvents:function(){var e,t=a.current;t&&(r.bind("orientationchange.fb"+(c?"":" resize.fb")+(t.autoCenter&&!t.locked?" scroll.fb":""),a.update),(e=t.keys)&&o.bind("keydown.fb",function(r){var o=r.which||r.keyCode,s=r.target||r.srcElement;return 27===o&&a.coming?!1:void!(r.ctrlKey||r.altKey||r.shiftKey||r.metaKey||s&&(s.type||i(s).is("[contenteditable]"))||!i.each(e,function(e,s){return 1<t.group.length&&s[o]!==n?(a[e](s[o]),r.preventDefault(),!1):-1<i.inArray(o,s)?(a[e](),r.preventDefault(),!1):void 0}))}),i.fn.mousewheel&&t.mouseWheel&&a.wrap.bind("mousewheel.fb",function(e,n,r,o){for(var s=i(e.target||null),l=!1;s.length&&!l&&!s.is(".fancybox-skin")&&!s.is(".fancybox-wrap");)l=s[0]&&!(s[0].style.overflow&&"hidden"===s[0].style.overflow)&&(s[0].clientWidth&&s[0].scrollWidth>s[0].clientWidth||s[0].clientHeight&&s[0].scrollHeight>s[0].clientHeight),s=i(s).parent();0!==n&&!l&&1<a.group.length&&!t.canShrink&&(o>0||r>0?a.prev(o>0?"down":"left"):(0>o||0>r)&&a.next(0>o?"up":"right"),e.preventDefault())}))},trigger:function(e,t){var n,r=t||a.coming||a.current;if(r){if(i.isFunction(r[e])&&(n=r[e].apply(r,Array.prototype.slice.call(arguments,1))),!1===n)return!1;r.helpers&&i.each(r.helpers,function(t,n){n&&a.helpers[t]&&i.isFunction(a.helpers[t][e])&&(n=i.extend(!0,{},a.helpers[t].defaults,n),a.helpers[t][e](n,r))}),i.event.trigger(e+".fb")}},isImage:function(e){return u(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)},isSWF:function(e){return u(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t,n,r={};if(e=p(e),t=a.group[e]||null,!t)return!1;if(r=i.extend(!0,{},a.opts,t),t=r.margin,n=r.padding,"number"===i.type(t)&&(r.margin=[t,t,t,t]),"number"===i.type(n)&&(r.padding=[n,n,n,n]),r.modal&&i.extend(!0,r,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),r.autoSize&&(r.autoWidth=r.autoHeight=!0),"auto"===r.width&&(r.autoWidth=!0),"auto"===r.height&&(r.autoHeight=!0),r.group=a.group,r.index=e,a.coming=r,!1===a.trigger("beforeLoad"))a.coming=null;else{if(n=r.type,t=r.href,!n)return a.coming=null,a.current&&a.router&&"jumpto"!==a.router?(a.current.index=e,a[a.router](a.direction)):!1;if(a.isActive=!0,("image"===n||"swf"===n)&&(r.autoHeight=r.autoWidth=!1,r.scrolling="visible"),"image"===n&&(r.aspectRatio=!0),"iframe"===n&&c&&(r.scrolling="scroll"),r.wrap=i(r.tpl.wrap).addClass("fancybox-"+(c?"mobile":"desktop")+" fancybox-type-"+n+" fancybox-tmp "+r.wrapCSS).appendTo(r.parent||"body"),i.extend(r,{skin:i(".fancybox-skin",r.wrap),outer:i(".fancybox-outer",r.wrap),inner:i(".fancybox-inner",r.wrap)}),i.each(["Top","Right","Bottom","Left"],function(e,t){r.skin.css("padding"+t,f(r.padding[e]))}),a.trigger("onReady"),"inline"===n||"html"===n){if(!r.content||!r.content.length)return a._error("content")}else if(!t)return a._error("href");"image"===n?a._loadImage():"ajax"===n?a._loadAjax():"iframe"===n?a._loadIframe():a._afterLoad()}},_error:function(e){i.extend(a.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:a.coming.tpl.error}),a._afterLoad()},_loadImage:function(){var e=a.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,a.coming.width=this.width,a.coming.height=this.height,a._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,a._error("image")},e.src=a.coming.href,!0!==e.complete&&a.showLoading()},_loadAjax:function(){var e=a.coming;a.showLoading(),a.ajaxLoad=i.ajax(i.extend({},e.ajax,{url:e.href,error:function(e,t){a.coming&&"abort"!==t?a._error("ajax",e):a.hideLoading()},success:function(t,i){"success"===i&&(e.content=t,a._afterLoad())}}))},_loadIframe:function(){var e=a.coming,t=i(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",c?"auto":e.iframe.scrolling).attr("src",e.href);i(e.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),e.iframe.preload&&(a.showLoading(),t.one("load",function(){i(this).data("ready",1),c||i(this).bind("load.fb",a.update),i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),a._afterLoad()})),e.content=t.appendTo(e.inner),e.iframe.preload||a._afterLoad()},_preloadImages:function(){var e,t,i=a.group,n=a.current,r=i.length,o=n.preload?Math.min(n.preload,r-1):0;for(t=1;o>=t;t+=1)e=i[(n.index+t)%r],"image"===e.type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var e,t,n,r,o,s=a.coming,l=a.current;if(a.hideLoading(),s&&!1!==a.isActive)if(!1===a.trigger("afterLoad",s,l))s.wrap.stop(!0).trigger("onReset").remove(),a.coming=null;else{switch(l&&(a.trigger("beforeChange",l),l.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),a.unbindEvents(),e=s.content,t=s.type,n=s.scrolling,i.extend(a,{wrap:s.wrap,skin:s.skin,outer:s.outer,inner:s.inner,current:s,previous:l}),r=s.href,t){case"inline":case"ajax":case"html":s.selector?e=i("<div>").html(e).find(s.selector):d(e)&&(e.data("fancybox-placeholder")||e.data("fancybox-placeholder",i('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()),e=e.show().detach(),s.wrap.bind("onReset",function(){i(this).find(e).length&&e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":e=s.tpl.image.replace("{href}",r);break;case"swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+r+'"></param>',o="",i.each(s.swf,function(t,i){e+='<param name="'+t+'" value="'+i+'"></param>',o+=" "+t+'="'+i+'"'}),e+='<embed src="'+r+'" type="application/x-shockwave-flash" width="100%" height="100%"'+o+"></embed></object>"}(!d(e)||!e.parent().is(s.inner))&&s.inner.append(e),a.trigger("beforeShow"),s.inner.css("overflow","yes"===n?"scroll":"no"===n?"hidden":n),a._setDimension(),a.reposition(),a.isOpen=!1,a.coming=null,a.bindEvents(),a.isOpened?l.prevMethod&&a.transitions[l.prevMethod]():i(".fancybox-wrap").not(s.wrap).stop(!0).trigger("onReset").remove(),a.transitions[a.isOpened?s.nextMethod:s.openMethod](),a._preloadImages()}},_setDimension:function(){var e,t,n,r,o,s,l,c,d,u=a.getViewport(),m=0,g=!1,v=!1,g=a.wrap,b=a.skin,y=a.inner,x=a.current,v=x.width,w=x.height,k=x.minWidth,C=x.minHeight,_=x.maxWidth,S=x.maxHeight,T=x.scrolling,E=x.scrollOutside?x.scrollbarWidth:0,$=x.margin,N=p($[1]+$[3]),A=p($[0]+$[2]);if(g.add(b).add(y).width("auto").height("auto").removeClass("fancybox-tmp"),$=p(b.outerWidth(!0)-b.width()),e=p(b.outerHeight(!0)-b.height()),t=N+$,n=A+e,r=h(v)?(u.w-t)*p(v)/100:v,o=h(w)?(u.h-n)*p(w)/100:w,"iframe"===x.type){if(d=x.content,x.autoHeight&&1===d.data("ready"))try{d[0].contentWindow.document.location&&(y.width(r).height(9999),s=d.contents().find("body"),E&&s.css("overflow-x","hidden"),o=s.height())}catch(L){}}else(x.autoWidth||x.autoHeight)&&(y.addClass("fancybox-tmp"),x.autoWidth||y.width(r),x.autoHeight||y.height(o),x.autoWidth&&(r=y.width()),x.autoHeight&&(o=y.height()),y.removeClass("fancybox-tmp"));if(v=p(r),w=p(o),c=r/o,k=p(h(k)?p(k,"w")-t:k),_=p(h(_)?p(_,"w")-t:_),C=p(h(C)?p(C,"h")-n:C),S=p(h(S)?p(S,"h")-n:S),s=_,l=S,x.fitToView&&(_=Math.min(u.w-t,_),S=Math.min(u.h-n,S)),t=u.w-N,A=u.h-A,x.aspectRatio?(v>_&&(v=_,w=p(v/c)),w>S&&(w=S,v=p(w*c)),k>v&&(v=k,w=p(v/c)),C>w&&(w=C,v=p(w*c))):(v=Math.max(k,Math.min(v,_)),x.autoHeight&&"iframe"!==x.type&&(y.width(v),w=y.height()),w=Math.max(C,Math.min(w,S))),x.fitToView)if(y.width(v).height(w),g.width(v+$),u=g.width(),N=g.height(),x.aspectRatio)for(;(u>t||N>A)&&v>k&&w>C&&!(19<m++);)w=Math.max(C,Math.min(S,w-10)),v=p(w*c),k>v&&(v=k,w=p(v/c)),v>_&&(v=_,w=p(v/c)),y.width(v).height(w),g.width(v+$),u=g.width(),N=g.height();else v=Math.max(k,Math.min(v,v-(u-t))),w=Math.max(C,Math.min(w,w-(N-A)));E&&"auto"===T&&o>w&&t>v+$+E&&(v+=E),y.width(v).height(w),g.width(v+$),u=g.width(),N=g.height(),g=(u>t||N>A)&&v>k&&w>C,v=x.aspectRatio?s>v&&l>w&&r>v&&o>w:(s>v||l>w)&&(r>v||o>w),i.extend(x,{dim:{width:f(u),height:f(N)},origWidth:r,origHeight:o,canShrink:g,canExpand:v,wPadding:$,hPadding:e,wrapSpace:N-b.outerHeight(!0),skinSpace:b.height()-w}),!d&&x.autoHeight&&w>C&&S>w&&!v&&y.height("auto")},_getPosition:function(e){var t=a.current,i=a.getViewport(),n=t.margin,r=a.wrap.width()+n[1]+n[3],o=a.wrap.height()+n[0]+n[2],n={position:"absolute",top:n[0],left:n[3]};return t.autoCenter&&t.fixed&&!e&&o<=i.h&&r<=i.w?n.position="fixed":t.locked||(n.top+=i.y,n.left+=i.x),n.top=f(Math.max(n.top,n.top+(i.h-o)*t.topRatio)),n.left=f(Math.max(n.left,n.left+(i.w-r)*t.leftRatio)),n},_afterZoomIn:function(){var e=a.current;e&&(a.isOpen=a.isOpened=!0,a.wrap.css("overflow","visible").addClass("fancybox-opened"),a.update(),(e.closeClick||e.nextClick&&1<a.group.length)&&a.inner.css("cursor","pointer").bind("click.fb",function(t){!i(t.target).is("a")&&!i(t.target).parent().is("a")&&(t.preventDefault(),a[e.closeClick?"close":"next"]())}),e.closeBtn&&i(e.tpl.closeBtn).appendTo(a.skin).bind("click.fb",function(e){e.preventDefault(),a.close()}),e.arrows&&1<a.group.length&&((e.loop||0<e.index)&&i(e.tpl.prev).appendTo(a.outer).bind("click.fb",a.prev),(e.loop||e.index<a.group.length-1)&&i(e.tpl.next).appendTo(a.outer).bind("click.fb",a.next)),a.trigger("afterShow"),e.loop||e.index!==e.group.length-1?a.opts.autoPlay&&!a.player.isActive&&(a.opts.autoPlay=!1,a.play()):a.play(!1))},_afterZoomOut:function(e){e=e||a.current,i(".fancybox-wrap").trigger("onReset").remove(),i.extend(a,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),a.trigger("afterClose",e)}}),a.transitions={getOrigPosition:function(){var e=a.current,t=e.element,i=e.orig,n={},r=50,o=50,s=e.hPadding,l=e.wPadding,c=a.getViewport();return!i&&e.isDom&&t.is(":visible")&&(i=t.find("img:first"),i.length||(i=t)),d(i)?(n=i.offset(),i.is("img")&&(r=i.outerWidth(),o=i.outerHeight())):(n.top=c.y+(c.h-o)*e.topRatio,n.left=c.x+(c.w-r)*e.leftRatio),("fixed"===a.wrap.css("position")||e.locked)&&(n.top-=c.y,n.left-=c.x),n={top:f(n.top-s*e.topRatio),left:f(n.left-l*e.leftRatio),width:f(r+l),height:f(o+s)}},step:function(e,t){var i,n,r=t.prop;n=a.current;var o=n.wrapSpace,s=n.skinSpace;("width"===r||"height"===r)&&(i=t.end===t.start?1:(e-t.start)/(t.end-t.start),a.isClosing&&(i=1-i),n="width"===r?n.wPadding:n.hPadding,n=e-n,a.skin[r](p("width"===r?n:n-o*i)),a.inner[r](p("width"===r?n:n-o*i-s*i)))},zoomIn:function(){var e=a.current,t=e.pos,n=e.openEffect,r="elastic"===n,o=i.extend({opacity:1},t);delete o.position,r?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===n&&(t.opacity=.1),a.wrap.css(t).animate(o,{duration:"none"===n?0:e.openSpeed,easing:e.openEasing,step:r?this.step:null,complete:a._afterZoomIn})},zoomOut:function(){var e=a.current,t=e.closeEffect,i="elastic"===t,n={opacity:.1};i&&(n=this.getOrigPosition(),e.closeOpacity&&(n.opacity=.1)),a.wrap.animate(n,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:i?this.step:null,complete:a._afterZoomOut})},changeIn:function(){var e,t=a.current,i=t.nextEffect,n=t.pos,r={opacity:1},o=a.direction;n.opacity=.1,"elastic"===i&&(e="down"===o||"up"===o?"top":"left","down"===o||"right"===o?(n[e]=f(p(n[e])-200),r[e]="+=200px"):(n[e]=f(p(n[e])+200),r[e]="-=200px")),"none"===i?a._afterZoomIn():a.wrap.css(n).animate(r,{duration:t.nextSpeed,easing:t.nextEasing,complete:a._afterZoomIn})},changeOut:function(){var e=a.previous,t=e.prevEffect,n={opacity:.1},r=a.direction;"elastic"===t&&(n["down"===r||"up"===r?"top":"left"]=("up"===r||"left"===r?"-":"+")+"=200px"),e.wrap.animate(n,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}},a.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!c,fixed:!0},overlay:null,fixed:!1,create:function(e){e=i.extend({},this.defaults,e),this.overlay&&this.close(),this.overlay=i('<div class="fancybox-overlay"></div>').appendTo("body"),this.fixed=!1,e.fixed&&a.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(e){var t=this;e=i.extend({},this.defaults,e),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e),this.fixed||(r.bind("resize.overlay",i.proxy(this.update,this)),this.update()),e.closeClick&&this.overlay.bind("click.overlay",function(e){i(e.target).hasClass("fancybox-overlay")&&(a.isActive?a.close():t.close())}),this.overlay.css(e.css).show()},close:function(){i(".fancybox-overlay").remove(),r.unbind("resize.overlay"),this.overlay=null,!1!==this.margin&&(i("body").css("margin-right",this.margin),this.margin=!1),this.el&&this.el.removeClass("fancybox-lock")},update:function(){var e,i="100%";this.overlay.width(i).height("100%"),s?(e=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),o.width()>e&&(i=o.width())):o.width()>r.width()&&(i=o.width()),this.overlay.width(i).height(o.height())},onReady:function(e,n){i(".fancybox-overlay").stop(!0,!0),this.overlay||(this.margin=o.height()>r.height()||"scroll"===i("body").css("overflow-y")?i("body").css("margin-right"):!1,this.el=i(t.all&&!t.querySelector?"html":"body"),this.create(e)),e.locked&&this.fixed&&(n.locked=this.overlay.append(n.wrap),n.fixed=!1),!0===e.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){t.locked&&(this.el.addClass("fancybox-lock"),!1!==this.margin&&i("body").css("margin-right",p(this.margin)+t.scrollbarWidth)),this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!a.isActive&&this.overlay.fadeOut(e.speedOut,i.proxy(this.close,this))}},a.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var t=a.current,n=t.title,r=e.type;if(i.isFunction(n)&&(n=n.call(t.element,t)),u(n)&&""!==i.trim(n)){switch(t=i('<div class="fancybox-title fancybox-title-'+r+'-wrap">'+n+"</div>"),r){case"inside":r=a.skin;break;case"outside":r=a.wrap;break;case"over":r=a.inner;break;default:r=a.skin,t.appendTo("body"),s&&t.width(t.width()),t.wrapInner('<span class="child"></span>'),a.current.margin[2]+=Math.abs(p(t.css("margin-bottom")))}t["top"===e.position?"prependTo":"appendTo"](r)}}},i.fn.fancybox=function(e){var t,n=i(this),r=this.selector||"",s=function(o){var s,l,c=i(this).blur(),d=t;!(o.ctrlKey||o.altKey||o.shiftKey||o.metaKey||c.is(".fancybox-wrap")||(s=e.groupAttr||"data-fancybox-group",l=c.attr(s),l||(s="rel",l=c.get(0)[s]),l&&""!==l&&"nofollow"!==l&&(c=r.length?i(r):n,c=c.filter("["+s+'="'+l+'"]'),d=c.index(this)),e.index=d,!1===a.open(c,e)||!o.preventDefault()))};return e=e||{},t=e.index||0,r&&!1!==e.live?o.undelegate(r,"click.fb-start").delegate(r+":not('.fancybox-item, .fancybox-nav')","click.fb-start",s):n.unbind("click.fb-start").bind("click.fb-start",s),this.filter("[data-fancybox-start=1]").trigger("click"),this},o.ready(function(){if(i.scrollbarWidth===n&&(i.scrollbarWidth=function(){var e=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),t=t.innerWidth()-t.height(99).innerWidth();return e.remove(),t}),i.support.fixedPosition===n){var e=i.support,t=i('<div style="position:fixed;top:20px;"></div>').appendTo("body"),r=20===t[0].offsetTop||15===t[0].offsetTop;t.remove(),e.fixedPosition=r}i.extend(a.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")})})}(window,document,jQuery),function(e,t){"use strict";var i=t.Modernizr;e.CBPFWSlider=function(t,i){this.$el=e(i),this._init(t)},e.CBPFWSlider.defaults={speed:500,easing:"ease"},e.CBPFWSlider.prototype={_init:function(t){this.options=e.extend(!0,{},e.CBPFWSlider.defaults,t),this._config(),this._initEvents()},_config:function(){this.$list=this.$el.children("ul"),this.$items=this.$list.children("li"),this.itemsCount=this.$items.length,this.support=i.csstransitions&&i.csstransforms,this.support3d=i.csstransforms3d;var t={WebkitTransition:{transitionEndEvent:"webkitTransitionEnd",tranformName:"-webkit-transform"},MozTransition:{transitionEndEvent:"transitionend",tranformName:"-moz-transform"},OTransition:{transitionEndEvent:"oTransitionEnd",tranformName:"-o-transform"},msTransition:{transitionEndEvent:"MSTransitionEnd",tranformName:"-ms-transform"},transition:{transitionEndEvent:"transitionend",tranformName:"transform"}};if(this.support&&(this.transEndEventName=t[i.prefixed("transition")].transitionEndEvent+".cbpFWSlider",this.transformName=t[i.prefixed("transition")].tranformName),this.current=0,this.old=0,this.isAnimating=!1,this.$list.css("width",100*this.itemsCount+"%"),this.support&&this.$list.css("transition",this.transformName+" "+this.options.speed+"ms "+this.options.easing),this.$items.css("width",100/this.itemsCount+"%"),this.itemsCount>1){this.$navPrev=e('<span class="cbp-fwprev"><</span>').hide(),this.$navNext=e('<span class="cbp-fwnext">></span>'),e("<nav/>").append(this.$navPrev,this.$navNext).appendTo(this.$el);for(var n="",r=0;r<this.itemsCount;++r){var o=r===this.current?'<span class="cbp-fwcurrent"></span>':"<span></span>";n+=o}var a=e('<div class="cbp-fwdots"/>').append(n).appendTo(this.$el);this.$navDots=a.children("span")}},_initEvents:function(){var t=this;this.itemsCount>1&&(this.$navPrev.on("click.cbpFWSlider",e.proxy(this._navigate,this,"previous")),this.$navNext.on("click.cbpFWSlider",e.proxy(this._navigate,this,"next")),this.$navDots.on("click.cbpFWSlider",function(){t._jump(e(this).index())}))},_navigate:function(e){return this.isAnimating?!1:(this.isAnimating=!0,this.old=this.current,"next"===e&&this.current<this.itemsCount-1?++this.current:"previous"===e&&this.current>0&&--this.current,void this._slide())},_slide:function(){this._toggleNavControls();var t=-1*this.current*100/this.itemsCount;this.support?this.$list.css("transform",this.support3d?"translate3d("+t+"%,0,0)":"translate("+t+"%)"):this.$list.css("margin-left",-1*this.current*100+"%");var i=e.proxy(function(){this.isAnimating=!1},this);this.support?this.$list.on(this.transEndEventName,e.proxy(i,this)):i.call()},_toggleNavControls:function(){switch(this.current){case 0:this.$navNext.show(),this.$navPrev.hide();break;case this.itemsCount-1:this.$navNext.hide(),this.$navPrev.show();break;default:this.$navNext.show(),this.$navPrev.show()}this.$navDots.eq(this.old).removeClass("cbp-fwcurrent").end().eq(this.current).addClass("cbp-fwcurrent")},_jump:function(e){return e===this.current||this.isAnimating?!1:(this.isAnimating=!0,this.old=this.current,this.current=e,void this._slide())},destroy:function(){this.itemsCount>1&&(this.$navPrev.parent().remove(),this.$navDots.parent().remove()),this.$list.css("width","auto"),this.support&&this.$list.css("transition","none"),this.$items.css("width","auto")}};var n=function(e){t.console&&t.console.error(e)};e.fn.cbpFWSlider=function(t){if("string"==typeof t){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var r=e.data(this,"cbpFWSlider");return r?e.isFunction(r[t])&&"_"!==t.charAt(0)?void r[t].apply(r,i):void n("no such method '"+t+"' for cbpFWSlider instance"):void n("cannot call methods on cbpFWSlider prior to initialization; attempted to call method '"+t+"'")})}else this.each(function(){var i=e.data(this,"cbpFWSlider");i?i._init():i=e.data(this,"cbpFWSlider",new e.CBPFWSlider(t,this))});return this}}(jQuery,window),function(){}.call(this),function(){}.call(this),$(document).ready(function(){var e,t=$("meta[name=csrf-token]").attr("content"),i=$("meta[name=csrf-param]").attr("content");void 0!==i&&void 0!==t&&(e=i+"="+encodeURIComponent(t)),$(".redactor").redactor({imageUpload:"/redactor_rails/pictures?"+e,imageGetJson:"/redactor_rails/pictures",fileUpload:"/redactor_rails/documents?"+e,fileGetJson:"/redactor_rails/documents",path:"/assets/redactor-rails",css:"style.css"})}),$(document).ready(function(){$(".fancybox").fancybox(),$("#cbp-fwslider").cbpFWSlider(),jQuery(".minicart_link").click(function(){$(".cart_drop").slideToggle(300)}),$("#button_imobiliaria").click(function(){$(".imobiliarias").toggle()}),$("#button_automotiva").click(function(){$(".automotivas").toggle()})});